"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5088],{28292:(e,t,a)=>{a.d(t,{Rz:()=>L,Tt:()=>O,Zn:()=>A});var n=a(95155);a(48731);var r=a(55594),l=a(12115),s=a(38543),i=a(62177),o=a(90221),c=a(20041),d=a(68074),u=a(29716),m=a(62966),p=a(80158),x=a(12422),h=a(21030),g=a(96801),f=a(96358),y=a(66292),b=a(74234),C=a(54961);let v=(e,t)=>r.z.string().min(e,{message:t}).optional().nullable().or(r.z.literal("")),j=(e,t,a)=>r.z.union([r.z.number().min(e,{message:a}).max(t,{message:a}),r.z.null()]).optional().nullable(),N=r.z.object({firstName:r.z.string().min(1,{message:"First name is required!"}),lastName:r.z.string().min(1,{message:"Last name is required!"}),phoneNumber:C.yf.phoneNumber({isValid:c.g0}),email:r.z.string().email({message:"Invalid email address"}).optional().nullable().or(r.z.literal("")),city:v(2,"City must be at least 2 characters long"),state:v(2,"State must be at least 2 characters long"),address:v(5,"Address must be at least 5 characters long"),zipCode:r.z.string().regex(/^[A-Za-z0-9\- ]{3,10}$/,{message:"Invalid postal/ZIP code format"}).optional().nullable().or(r.z.literal("")),brokerLicence:r.z.string().optional().nullable().or(r.z.literal("")),commisionRate:j(0,100,"Commission rate must be between 0 and 100"),yearsExperience:j(0,100,"Years of experience cannot be negative"),specialization:v(3,"Specialization must be at least 3 characters long")});function A(e){let{title:t,type:a,open:r,onClose:v,onCreate:j}=e,A=(0,l.useMemo)(()=>({firstName:"",lastName:"",phoneNumber:"",email:"",city:"",state:"",zipCode:"",address:"",brokerLicence:"",commisionRate:0,yearsExperience:0,specialization:""}),[]),E=(0,i.mN)({mode:"all",resolver:(0,o.u)(N),defaultValues:A}),{reset:z,control:S,handleSubmit:L,setError:k,formState:{isSubmitting:I}}=E,T=(0,l.useMemo)(()=>"Broker"===a,[a]);async function D(e){try{let t=await (0,b.vY)(e);return s.oR.dismiss(),s.oR.success("Successfully added new ".concat("Broker"===a?"Broker":"Customer"," !"),{containerId:"success"}),t}catch(e){throw console.log("Error (addContact) : ",e),"string"==typeof e&&e.includes("already exists")?k("phoneNumber",{type:"server",message:"Record with this number already exists, try different number."}):(s.oR.dismiss(),s.oR.error("Failed to add new ".concat("Broker"===a?"Broker":"Customer"," !"),{containerId:"error"})),e}}let R=L(async e=>{try{let t=(0,c.lq)(e.phoneNumber),n={ContactFName:e.firstName,ContactLName:e.lastName,ContactNo:Number(t.nationalNumber),ContactEmail:e.email||null,ContactCity:e.city||null,ContactState:e.state||null,ContactPostalCode:e.zipCode||null,ContactAddress:e.address||null,ContactType:a,...T?{AccountId:null,BrokerLicence:e.brokerLicence||null,CommisionRate:e.commisionRate||null,YearsExperience:e.yearsExperience||null,Specialization:e.specialization||null}:{},ContactCountryCode:t.country};console.log("Submitted data : ",n);let r={ContactId:(await D(n)).ContactId,ContactFName:e.firstName,ContactLName:e.lastName,ContactNo:Number(t.nationalNumber)};j(r),z(),v()}catch(e){console.log("Error in submittion of contact data : ",e)}});return(0,n.jsx)(u.A,{fullWidth:!0,maxWidth:"sm",open:r,onClose:v,children:(0,n.jsxs)(C.lV,{methods:E,onSubmit:R,children:[(0,n.jsx)(m.A,{sx:{display:"grid",placeItems:"center"},children:t}),(0,n.jsx)(p.default,{}),(0,n.jsx)(x.A,{dividers:!0,children:(0,n.jsxs)(h.A,{spacing:2,children:[(0,n.jsxs)(g.A,{sx:{mt:1,gap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)"}},children:[(0,n.jsx)(C.D0.Text2,{name:"firstName",label:"First name"}),(0,n.jsx)(C.D0.Text2,{name:"lastName",label:"Last name"}),(0,n.jsx)(C.D0.Phone,{name:"phoneNumber",label:"Phone number",country:"IN"}),(0,n.jsx)(C.D0.Text2,{name:"email",label:"Email address"})]}),(0,n.jsxs)(g.A,{sx:{gap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(3, 1fr)"}},children:[(0,n.jsx)(C.D0.Text2,{name:"city",label:"City/Town"}),(0,n.jsx)(C.D0.Text2,{name:"state",label:"State"}),(0,n.jsx)(C.D0.Text2,{name:"zipCode",label:"Zip/code"})]}),(0,n.jsx)(C.D0.Text2,{name:"address",label:"Address",placeholder:"Ex- Flat/House Number, Floor Number, Street Name and Number,Building Name or Number, Area/Locality, Landmark etc.",multiline:!0,minRows:3,InputLabelProps:{shrink:!0}}),T&&(0,n.jsxs)(g.A,{sx:{gap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)"}},children:[(0,n.jsx)(C.D0.Text2,{name:"brokerLicence",label:"Broker Licence"}),(0,n.jsx)(C.D0.Text2,{name:"commisionRate",label:"Commision Rate (%)",type:"number",inputProps:{min:0,max:100}}),(0,n.jsx)(C.D0.Text2,{name:"yearsExperience",label:"Years of Experience",type:"number",inputProps:{min:0,max:100}}),(0,n.jsx)(C.D0.Text2,{name:"specialization",label:"Specialization"})]})]})}),(0,n.jsxs)(f.default,{children:[(0,n.jsx)(y.default,{color:"inherit",variant:"outlined",onClick:()=>{z(),v()},children:"Cancel"}),(0,n.jsx)(d.default,{type:"submit",variant:"contained",loading:I,disabled:I,children:"Create"})]})]})})}let E=(e,t)=>r.z.string().min(e,{message:t}).optional().nullable().or(r.z.literal("")),z=(e,t,a)=>r.z.union([r.z.number().min(e,{message:a}).max(t,{message:a}),r.z.null()]).optional().nullable(),S=r.z.object({firstName:r.z.string().min(1,{message:"First name is required!"}),lastName:r.z.string().min(1,{message:"Last name is required!"}),phoneNumber:C.yf.phoneNumber({isValid:c.g0}),email:r.z.string().email({message:"Invalid email address"}).optional().nullable().or(r.z.literal("")),city:E(2,"City must be at least 2 characters long"),state:E(2,"State must be at least 2 characters long"),address:E(5,"Address must be at least 5 characters long"),zipCode:r.z.string().regex(/^[A-Za-z0-9\- ]{3,10}$/,{message:"Invalid postal/ZIP code format"}).optional().nullable().or(r.z.literal("")),brokerLicence:r.z.string().optional().nullable().or(r.z.literal("")),commissionRate:z(0,100,"Commission rate must be between 0 and 100"),yearsExperience:z(0,100,"Years of experience cannot be negative"),specialization:E(3,"Specialization must be at least 3 characters long")});function L(e){let{currentContact:t,title:a,type:r,open:v,onClose:j,onCreate:N}=e,A=(0,l.useMemo)(()=>{var e,a,n,r,l,s,i,o,d;return{firstName:t.ContactFName,lastName:t.ContactLName,phoneNumber:function(e){if(!e.ContactNo||!e.ContactCountryCode)return null;try{let t=(0,c.lq)(e.ContactNo.toString(),e.ContactCountryCode);return t?t.format("E.164"):null}catch(e){return console.log("Invalid phone number:",e),null}}(t),email:null!=(e=t.ContactEmail)?e:"",city:null!=(a=t.ContactCity)?a:"",state:null!=(n=t.ContactState)?n:"",zipCode:null!=(r=t.ContactPostalCode)?r:"",address:null!=(l=t.ContactAddress)?l:"",brokerLicence:null!=(s=t.BrokerLicence)?s:"",commissionRate:null!=(i=t.CommisionRate)?i:0,yearsExperience:null!=(o=t.YearsExperience)?o:0,specialization:null!=(d=t.Specialization)?d:""}},[t]),E=(0,i.mN)({mode:"all",resolver:(0,o.u)(S),defaultValues:A}),{reset:z,control:L,setError:k,handleSubmit:I,formState:{isSubmitting:T}}=E,D=(0,l.useMemo)(()=>"Broker"===r,[r]);async function R(e,t){try{let a=await (0,b.CI)(e,t);return s.oR.dismiss(),s.oR.success("Successfully edited ".concat("Broker"===r?"Broker":"Customer","!"),{containerId:"success"}),a}catch(e){throw"BAD_REQUEST"===e.code&&console.log("BAD_REQUEST---------------"),"string"==typeof e&&e.includes("already exists.")?(console.log("Error (editContact):",e),k("phoneNumber",{type:"server",message:"Record with this number already exists, try different number."})):(s.oR.dismiss(),s.oR.error("Failed to edit ".concat("Broker"===r?"Broker":"Customer","!"),{containerId:"error"})),e}}let w=I(async e=>{try{let a=(0,c.lq)(e.phoneNumber),n={ContactFName:e.firstName,ContactLName:e.lastName,ContactNo:Number(a.nationalNumber),ContactEmail:e.email||null,ContactCity:e.city||null,ContactState:e.state||null,ContactPostalCode:e.zipCode||null,ContactAddress:e.address||null,ContactType:r,...D?{AccountId:null,BrokerLicence:e.brokerLicence||null,CommisionRate:e.commissionRate||null,YearsExperience:e.yearsExperience||null,Specialization:e.specialization||null}:{},ContactCountryCode:a.country};console.log("Submitted data : ",n),await R(t.ContactId,n),N(n),z(),j()}catch(e){console.log("Error in submittion of contact data : ",e)}});return(0,n.jsx)(u.A,{fullWidth:!0,maxWidth:"sm",open:v,onClose:j,children:(0,n.jsxs)(C.lV,{methods:E,onSubmit:w,children:[(0,n.jsx)(m.A,{sx:{display:"grid",placeItems:"center"},children:a}),(0,n.jsx)(p.default,{}),t.ContactId&&(0,n.jsx)(x.A,{dividers:!0,children:(0,n.jsxs)(h.A,{spacing:2,children:[(0,n.jsxs)(g.A,{sx:{mt:1,gap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)"}},children:[(0,n.jsx)(C.D0.Text2,{name:"firstName",label:"First name"}),(0,n.jsx)(C.D0.Text2,{name:"lastName",label:"Last name"}),(0,n.jsx)(C.D0.Phone,{name:"phoneNumber",label:"Phone number",country:t.ContactCountryCode}),(0,n.jsx)(C.D0.Text2,{name:"email",label:"Email address"})]}),(0,n.jsxs)(g.A,{sx:{gap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(3, 1fr)"}},children:[(0,n.jsx)(C.D0.Text2,{name:"city",label:"City/Town"}),(0,n.jsx)(C.D0.Text2,{name:"state",label:"State"}),(0,n.jsx)(C.D0.Text2,{name:"zipCode",label:"Zip/code"})]}),(0,n.jsx)(C.D0.Text2,{name:"address",label:"Address",placeholder:"Ex- Flat/House Number, Floor Number, Street Name and Number,Building Name or Number, Area/Locality, Landmark etc.",multiline:!0,minRows:3,InputLabelProps:{shrink:!0}}),D&&(0,n.jsxs)(g.A,{sx:{gap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)"}},children:[(0,n.jsx)(C.D0.Text2,{name:"brokerLicence",label:"Broker Licence"}),(0,n.jsx)(C.D0.Text2,{name:"commissionRate",label:"Commission Rate (%)",type:"number",inputProps:{min:0,max:100}}),(0,n.jsx)(C.D0.Text2,{name:"yearsExperience",label:"Years of Experience",type:"number",inputProps:{min:0,max:100}}),(0,n.jsx)(C.D0.Text2,{name:"specialization",label:"Specialization"})]})]})}),(0,n.jsxs)(f.default,{children:[(0,n.jsx)(y.default,{color:"inherit",variant:"outlined",onClick:()=>{z(),j()},children:"Cancel"}),(0,n.jsx)(d.default,{type:"submit",variant:"contained",loading:T,disabled:T,children:"Save"})]})]})})}var k=a(45964),I=a.n(k),T=a(36339),D=a(95946),R=a(38017),w=a(9670),F=a(73816),B=a(25114),P=a(38867),U=a(56626),Z=a(57948);function O(e){let{open:t,onClose:a,selected:r,onSelect:i,title:o="List",type:c}=e,[d,m]=(0,l.useState)(""),[p,x]=(0,l.useState)([]),[f,b]=(0,l.useState)(!1),[C,v]=(0,l.useState)(!1),j=(0,T.Cg)(),N=(0,l.useCallback)(I()(async e=>{if(e.trim()){b(!0);try{let t=(await (0,B.P8)(e,c)).map(e=>({id:e.data.ContactId,name:"".concat(e.data.ContactFName," ").concat(e.data.ContactLName),phoneNumber:e.data.ContactNo}));x(t),v(0===t.length)}catch(e){s.oR.error("Error in searching contact!",{containerId:"error"}),console.log("Error (fetchContacts):",e),x([]),v(!0)}finally{b(!1)}}},500),[]);(0,l.useEffect)(()=>{if(!d.trim()){x([]),v(!1);return}N(d)},[d]);let E=(0,l.useCallback)(e=>{i(e),m(""),x([]),a()},[a,i]),z=e=>{i({id:e.ContactId,name:"".concat(e.ContactFName," ").concat(e.ContactLName),phoneNumber:e.ContactNo}),m(""),x([]),a()},S=(0,l.useMemo)(()=>(0,n.jsx)(U.Z,{sx:{p:.5,maxHeight:480},children:p.map(e=>(0,n.jsxs)(R.A,{onClick:()=>E(e),sx:{py:1,my:.5,px:1.5,gap:.5,width:1,borderRadius:1,display:"flex",flexDirection:"column",alignItems:"flex-start",...r(e.id)&&{bgcolor:"action.selected"}},children:[(0,n.jsx)(g.A,{sx:{gap:1,display:"flex",alignItems:"center"},children:(0,n.jsx)(w.default,{variant:"subtitle2",children:e.name})}),e.phoneNumber&&(0,n.jsx)(w.default,{variant:"body2",sx:{color:"text.secondary"},children:e.phoneNumber})]},e.id))}),[p,E,r]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(u.A,{fullWidth:!0,maxWidth:"xs",open:t,onClose:a,children:[(0,n.jsxs)(g.A,{sx:{p:3,pr:1.5,display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,n.jsxs)(w.default,{variant:"h6",children:[" ",o," "]}),(0,n.jsx)(y.default,{size:"small",startIcon:(0,n.jsx)(P.W,{icon:"mingcute:add-line"}),sx:{alignSelf:"flex-end"},onClick:j.onTrue,children:"New"})]}),(0,n.jsx)(h.A,{sx:{p:2,pt:0},children:(0,n.jsx)(D.default,{value:d,onChange:e=>m(e.target.value),placeholder:"Search...",InputProps:{startAdornment:(0,n.jsx)(F.A,{position:"start",children:(0,n.jsx)(P.W,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})}})}),f?(0,n.jsx)(w.default,{variant:"body2",sx:{px:3,pt:5,pb:10,textAlign:"center"},children:"Loading..."}):C?(0,n.jsx)(Z.c,{query:d,sx:{px:3,pt:5,pb:10}}):0===p.length?(0,n.jsx)(w.default,{variant:"body2",sx:{px:3,pt:5,pb:10,textAlign:"center"},children:"Search by name and number."}):S]}),"Customer"===c&&(0,n.jsx)(A,{title:"Create Contact",type:c,open:j.value,onClose:j.onFalse,onCreate:z}),"Broker"===c&&(0,n.jsx)(A,{title:"Create Broker",type:c,open:j.value,onClose:j.onFalse,onCreate:z})]})}},32030:(e,t,a)=>{a.d(t,{A:()=>u});var n=a(95155),r=a(12115),l=a(35695),s=a(29716),i=a(62966),o=a(12422),c=a(96358),d=a(66292);let u=e=>{let{isDirty:t}=e,a=(0,l.useRouter)();(0,l.usePathname)();let[u,m]=(0,r.useState)(!1),[p,x]=(0,r.useState)(null);(0,r.useEffect)(()=>{let e=e=>{t&&(e.preventDefault(),e.returnValue="")};return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}},[t]);let h=()=>{m(!1),x(null)};return(0,r.useEffect)(()=>{p&&t&&m(!0)},[p]),(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(s.A,{open:u,onClose:h,children:[(0,n.jsx)(i.A,{children:"Unsaved Changes"}),(0,n.jsx)(o.A,{children:"You have unsaved changes. Are you sure you want to leave this page?"}),(0,n.jsxs)(c.default,{children:[(0,n.jsx)(d.default,{onClick:h,color:"primary",children:"Stay"}),(0,n.jsx)(d.default,{onClick:()=>{m(!1),p&&a.push(p)},color:"secondary",children:"Leave"})]})]})})}},56117:(e,t,a)=>{a.d(t,{AK:()=>c,oB:()=>d,zS:()=>o});var n=a(19169),r=a(12115),l=a(18835);let s=async e=>{let[t,a]=Array.isArray(e)?e:[e];try{return(await l.Ay.get(t,{...a})).data}catch(e){if("string"==typeof e&&(e.includes("No infrastructure found")||e.includes("No data found")||e.includes("not found")))return[];throw console.error("Failed to fetch (".concat(t,"):"),e),e}},i={revalidateIfStale:!1,revalidateOnFocus:!1,revalidateOnReconnect:!1};function o(e){let t=e?[l.vZ.infraUnit.searchBySiteId(e)]:"",{data:a,isLoading:o,error:c,isValidating:d,mutate:u}=(0,n.Ay)(t,s,i),m=c&&"string"==typeof c&&(c.includes("No infrastructure found")||c.includes("not found")||c.includes("No data found"));return(0,r.useMemo)(()=>({infraUnitsData:m||!a?[]:a,infraUnitsLoading:o,infraUnitsError:m?null:c?(null==c?void 0:c.message)||"Error fetching (useGetDetailedLead)":null,infraUnitsValidating:d,infraUnitsEmpty:!o&&!d&&(!Array.isArray(a)||0===a.length||m),refetch:()=>u()}),[a,c,o,d,u,m])}function c(e,t,a,s,o){let c=e=>null==e||""===e||"string"==typeof e&&""===e.trim(),d=!c(e)||!c(t)||!c(a)||!c(s)||!c(o),u=d?l.vZ.infraUnit.searchSWR(e,t,a,s,o):null,{data:m,isLoading:p,error:x,isValidating:h,mutate:g}=(0,n.Ay)(u,l.GO,i);return(0,r.useMemo)(()=>({infraUnitSearchData:null!=m?m:[],infraUnitSearchLoading:p&&d,infraUnitSearchError:x?(null==x?void 0:x.message)||"Error searching infra units":null,infraUnitSearchValidating:h&&d,infraUnitSearchEmpty:d&&!p&&!h&&(!Array.isArray(m)||0===m.length),refetchInfraUnit:()=>d&&g(),hasValidParams:d}),[m,x,p,h,g,d])}function d(e){let t=e?[l.vZ.infraUnit.readSingle(e)]:"",{data:a,isLoading:s,error:o,isValidating:c,mutate:d}=(0,n.Ay)(t,l.GO,i);return(0,r.useMemo)(()=>({infraUnitsData:null!=a?a:[],infraUnitsLoading:s,infraUnitsError:o?(null==o?void 0:o.message)||"Error fetching (useGetDetailedLead)":null,infraUnitsValidating:c,infraUnitsEmpty:!s&&!c&&(!Array.isArray(a)||0===a.length),refetch:()=>d()}),[a,o,s,c,d])}},71984:(e,t,a)=>{a.d(t,{MZ:()=>i,Q$:()=>c,d0:()=>o,lr:()=>d});var n=a(19169),r=a(12115),l=a(18835);let s={revalidateIfStale:!1,revalidateOnFocus:!1,revalidateOnReconnect:!1};function i(){let e=l.vZ.site.readAll,{data:t,isLoading:a,error:i,isValidating:o,mutate:c}=(0,n.Ay)(e,l.GO,s);return(0,r.useMemo)(()=>({sitesData:null!=t?t:[],sitesLoading:a,sitesError:i?(null==i?void 0:i.message)||"Error fetching data":null,sitesValidating:o,sitesEmpty:!a&&!o&&(!Array.isArray(t)||0===t.length),mutateAllSites:c}),[t,i,a,o,c])}function o(){let e=l.vZ.site.siteType,{data:t,isLoading:a,error:i,isValidating:o,mutate:c}=(0,n.Ay)(e,l.GO,s);return(0,r.useMemo)(()=>({sitesTypeData:null!=t?t:[],sitesTypeLoading:a,sitesTypeError:i?(null==i?void 0:i.message)||"Error fetching data":null,sitesTypeValidating:o,sitesTypeEmpty:!a&&!o&&(!Array.isArray(t)||0===t.length),getAllSitesMutations:c}),[t,i,a,o,c])}function c(){let e=l.vZ.site.siteFullDetails,{data:t,isLoading:a,error:i,isValidating:o,mutate:c}=(0,n.Ay)(e,l.GO,s);return(0,r.useMemo)(()=>({siteFullData:null!=t?t:[],siteFullLoading:a,siteFullError:i?(null==i?void 0:i.message)||"Error fetching data":null,siteFullValidating:o,siteFullEmpty:!a&&!o&&(!Array.isArray(t)||0===t.length),getSiteFullDetailsMutation:c}),[t,i,a,o,c])}function d(e){let t=e?l.vZ.site.readSingle(e):null,{data:a,isLoading:i,error:o,isValidating:c,mutate:d}=(0,n.Ay)(t,l.GO,s);return(0,r.useMemo)(()=>({siteData:null!=a?a:[],siteLoading:i,siteError:o?(null==o?void 0:o.message)||"Error fetching data":null,siteValidating:c,siteEmpty:!i&&!c&&(!Array.isArray(a)||0===a.length),getSiteMutation:d}),[a,o,i,c,d])}},78129:(e,t,a)=>{a.d(t,{XL:()=>i,ig:()=>d,ot:()=>o,vY:()=>c});var n=a(19169),r=a(12115),l=a(18835);let s={revalidateIfStale:!1,revalidateOnFocus:!1,revalidateOnReconnect:!1};function i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=l.vZ.contact.readAll(e,t,a,i),{data:c,isLoading:d,error:u,isValidating:m,mutate:p}=(0,n.Ay)(o,l.GO,{...s,keepPreviousData:!0});return(0,r.useMemo)(()=>({contactsData:null!=c?c:[],contactsLoading:d,contactsError:u?(null==u?void 0:u.message)||"Error fetching data":null,contactsValidating:m,contactsEmpty:!d&&!m&&(!Array.isArray(c)||0===c.length),refetchContact:()=>p()}),[c,u,d,m,p])}function o(e){let t=e?l.vZ.contact.readSingle(e):null,{data:a,isLoading:i,error:o,isValidating:c,mutate:d}=(0,n.Ay)(t,l.GO,s);return(0,r.useMemo)(()=>({contactData:null!=a?a:[],contactLoading:i,contactError:o?(null==o?void 0:o.message)||"Error fetching data":null,contactValidating:c,contactEmpty:!i&&!c&&(!Array.isArray(a)||0===a.length),refetchContact:()=>d()}),[a,o,i,c,d])}let c=async e=>{let t=l.vZ.contact.create;return(await (0,l.D5)([t,e])).data};function d(e,t){let a=e?l.vZ.contact.search(e,t):null,{data:i,isLoading:o,error:c,isValidating:d,mutate:u}=(0,n.Ay)(a,l.ev,s);return(0,r.useMemo)(()=>({searchResults:null!=i?i:[],searchLoading:o,searchError:c?(null==c?void 0:c.message)||"Error searching contacts":null,searchValidating:d,searchEmpty:!o&&!d&&(!Array.isArray(i)||0===i.length),refetchContactSearch:()=>u()}),[i,c,o,d,u])}},83919:(e,t,a)=>{a.d(t,{u:()=>u});var n=a(95155),r=a(38543),l=a(12115),s=a(77498),i=a(92634),o=a(95946),c=a(62516),d=a(78129);function u(e){let{handleFilterContact:t,contactType:a,defaultValue:u=null,onClear:m,size:p,width:x,marginTop:h}=e,[g,f]=(0,l.useState)(""),[y,b]=(0,l.useState)(u),[C,v]=(0,l.useState)(""),j=(0,l.useRef)(t);(0,l.useEffect)(()=>{j.current=t},[t]),(0,l.useEffect)(()=>{let e=setTimeout(()=>{if(!g)return void v("");v(g.trim().replace(/\s+/g," "))},500);return()=>clearTimeout(e)},[g]);let{searchResults:N,searchLoading:A,searchError:E}=(0,d.ig)(C,a),z=(0,l.useCallback)(e=>e&&Array.isArray(e)&&0!==e.length?e.map(e=>{let t=e.data||e;return{label:"".concat(t.ContactFName||""," ").concat(t.ContactLName||""," (").concat(t.ContactNo||"",")").trim(),value:t.ContactId,ContactNo:t.ContactNo,ContactFName:t.ContactFName,ContactLName:t.ContactLName}}):[],[])(N);(0,l.useEffect)(()=>{b(u),u||(f(""),v(""))},[u]),(0,l.useEffect)(()=>{E&&(console.error("Error (contactSearch):",E),r.oR.error("Something went wrong!",{containerId:"error"}))},[E]);let S=(0,l.useCallback)((e,t)=>{b(t),j.current(t),!t&&m&&m()},[m]);return(0,n.jsx)(s.A,{sx:{flexShrink:0,...h&&{marginTop:h},...x&&{width:x}},children:(0,n.jsx)(i.default,{size:p||"small",options:z,getOptionLabel:e=>(null==e?void 0:e.label)||"-",isOptionEqualToValue:(e,t)=>(null==e?void 0:e.value)===(null==t?void 0:t.value),loading:A,value:y,onChange:S,onInputChange:(e,t,a)=>{"input"===a&&f(t)},getOptionDisabled:e=>(null==e?void 0:e.disabled)||!1,noOptionsText:"No contacts found",clearOnEscape:!0,filterOptions:e=>e,renderInput:e=>(0,n.jsx)(o.default,{...e,label:"Broker"===a?"Select Broker":"Select Customer",placeholder:"Search by name or contact number",InputLabelProps:{shrink:!0},InputProps:{...e.InputProps,endAdornment:(0,n.jsxs)(n.Fragment,{children:[A?(0,n.jsx)(c.default,{color:"inherit",size:20}):null,e.InputProps.endAdornment]})}})})})}},95383:(e,t,a)=>{a.d(t,{ND:()=>y});var n=a(95155);a(48731);var r=a(55594),l=a(20041),s=a(54961);r.z.object({city:r.z.string().min(1,{message:"City is required!"}),state:r.z.string().min(1,{message:"State is required!"}),name:r.z.string().min(1,{message:"Name is required!"}),address:r.z.string().min(1,{message:"Address is required!"}),zipCode:r.z.string().min(1,{message:"Zip code is required!"}),phoneNumber:s.yf.phoneNumber({isValid:l.g0}),country:s.yf.nullableInput(r.z.string().min(1,{message:"Country is required!"}),{message:"Country is required!"}),primary:r.z.boolean(),addressType:r.z.string()});var i=a(12115),o=a(96801),c=a(21030),d=a(29716),u=a(95946),m=a(38017),p=a(9670),x=a(73816),h=a(38867),g=a(56626),f=a(57948);function y(e){let{list:t,open:a,action:r,onClose:l,selected:s,onSelect:y,title:b="Address book"}=e,[C,v]=(0,i.useState)(""),j=function(e){let{inputData:t,query:a}=e;return a?t.filter(e=>{let{name:t,fullAddress:n,phoneNumber:r}=e;return[t,n,r].some(e=>null==e?void 0:e.toLowerCase().includes(a.toLowerCase()))}):t}({inputData:t,query:C}),N=!j.length&&!!C,A=(0,i.useCallback)(e=>{v(e.target.value)},[]),E=(0,i.useCallback)(e=>{y(e),v(""),l()},[l,y]);return(0,n.jsxs)(d.A,{fullWidth:!0,maxWidth:"xs",open:a,onClose:l,children:[(0,n.jsxs)(o.A,{sx:{p:3,pr:1.5,display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,n.jsxs)(p.default,{variant:"h6",children:[" ",b," "]}),r&&r]}),(0,n.jsx)(c.A,{sx:{p:2,pt:0},children:(0,n.jsx)(u.default,{value:C,onChange:A,placeholder:"Search...",slotProps:{input:{startAdornment:(0,n.jsx)(x.A,{position:"start",children:(0,n.jsx)(h.W,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})}}})}),N?(0,n.jsx)(f.c,{query:C,sx:{px:3,pt:5,pb:10}}):(0,n.jsx)(g.Z,{sx:{p:.5,maxHeight:480},children:j.map(e=>(0,n.jsxs)(m.A,{onClick:()=>E(e),sx:{py:1,my:.5,px:1.5,gap:.5,width:1,borderRadius:1,display:"flex",flexDirection:"column",alignItems:"flex-start",...s("".concat(e.id))&&{bgcolor:"action.selected"}},children:[(0,n.jsx)(o.A,{sx:{gap:1,display:"flex",alignItems:"center"},children:(0,n.jsx)(p.default,{variant:"subtitle2",children:e.name})}),(0,n.jsx)(p.default,{variant:"body2",sx:{color:"text.secondary"},children:e.fullAddress}),e.phoneNumber&&(0,n.jsx)(p.default,{variant:"body2",sx:{color:"text.secondary"},children:e.phoneNumber})]},e.id))})]})}},98294:(e,t,a)=>{a.d(t,{Hv:()=>l,T7:()=>x,NJ:()=>p});var n=a(95155),r=a(35881);function l(e){let{label:t,children:a,isShow:r,sx:l,...c}=e;return r?(0,n.jsxs)(s,{sx:l,...c,children:[(0,n.jsx)(i,{children:t}),(0,n.jsx)(o,{children:a})]}):null}let s=(0,r.default)("div")(e=>{let{theme:t}=e;return{display:"flex",overflow:"hidden",gap:t.spacing(1),padding:t.spacing(1),borderRadius:t.shape.borderRadius,border:"dashed 1px ".concat(t.vars.palette.divider)}}),i=(0,r.default)("span")(e=>{let{theme:t}=e;return{height:24,lineHeight:"24px",fontSize:t.typography.subtitle2.fontSize,fontWeight:t.typography.subtitle2.fontWeight}}),o=(0,r.default)("div")(e=>{let{theme:t}=e;return{display:"flex",flexWrap:"wrap",gap:t.spacing(1)}});var c=a(31274),d=a(66292),u=a(38867);function m(){let e=(0,c._)([""]);return m=function(){return e},e}let p={size:"small",variant:"soft"};function x(e){let{sx:t,onReset:a,children:r,totalResults:l,...s}=e;return(0,n.jsxs)(h,{sx:t,...s,children:[(0,n.jsxs)(g,{children:[(0,n.jsx)("strong",{children:l}),(0,n.jsx)("span",{children:" results found"})]}),(0,n.jsxs)(f,{children:[r,(0,n.jsx)(d.default,{color:"error",onClick:a,startIcon:(0,n.jsx)(u.W,{icon:"solar:trash-bin-trash-bold"}),children:"Clear"})]})]})}let h=(0,r.default)("div")(m()),g=(0,r.default)("div")(e=>{let{theme:t}=e;return{...t.typography.body2,marginBottom:t.spacing(1.5),"& span":{color:t.vars.palette.text.secondary}}}),f=(0,r.default)("div")(e=>{let{theme:t}=e;return{flexGrow:1,display:"flex",flexWrap:"wrap",alignItems:"center",gap:t.spacing(1)}})}}]);