(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8074],{5932:(e,t,a)=>{"use strict";a.d(t,{G:()=>u});var r=a(95155),o=a(38637),n=a.n(o),i=a(12115),l=a(95946),s=a(73816),c=a(53494),d=a(38867);function u(e){let{onSearchChange:t,isLoading:a=!1,placeholder:o="Search contact by name, email, phone...",debounceTime:n=500,value:u=""}=e,[h,p]=(0,i.useState)(u),m=(0,i.useRef)(null);(0,i.useEffect)(()=>{p(u)},[u]);let x=(0,i.useCallback)(e=>{let a=e.target.value;p(a),m.current&&clearTimeout(m.current),m.current=setTimeout(()=>{t(a)},n)},[n,t]),g=(0,i.useCallback)(()=>{p(""),m.current&&clearTimeout(m.current),t("")},[t]);return(0,i.useEffect)(()=>()=>{m.current&&clearTimeout(m.current)},[]),(0,r.jsx)(l.default,{fullWidth:!0,placeholder:o,size:"small",value:h,onChange:x,disabled:a,autoComplete:"off",InputProps:{startAdornment:(0,r.jsx)(s.A,{position:"start",children:(0,r.jsx)(d.W,{icon:"eva:search-fill",width:23})}),endAdornment:h?(0,r.jsx)(s.A,{position:"end",children:(0,r.jsx)(c.default,{onClick:g,edge:"end",disabled:a,size:"small",children:(0,r.jsx)(d.W,{icon:"eva:close-fill",width:16})})}):null},sx:{"& .MuiOutlinedInput-root":{borderRadius:1.5,bgcolor:e=>"dark"===e.palette.mode?"rgba(255, 255, 255, 0.05)":"grey.100","& fieldset":{borderColor:"transparent"},"&:hover fieldset":{borderColor:e=>"dark"===e.palette.mode?"rgba(255, 255, 255, 0.1)":"transparent"},"&.Mui-focused fieldset":{borderColor:e=>"dark"===e.palette.mode?"rgba(255, 255, 255, 0.2)":"transparent"},"& input":{color:e=>e.palette.text.primary}}}})}u.propTypes={onSearchChange:n().func.isRequired,isLoading:n().bool,placeholder:n().string,debounceTime:n().number,value:n().string}},7497:(e,t,a)=>{"use strict";a.d(t,{M:()=>w});var r=a(95155),o=a(12115),n=a(96801),i=a(17764),l=a(21030),s=a(25949),c=a(60032),d=a(57236),u=a(72330),h=a(72137),p=a(9670),m=a(62516),x=a(49742),g=a(72635),f=a(32104),b=a(85098);let C={width:"90%",marginLeft:"3.5%",bgcolor:"background.paper",borderRadius:1,boxShadow:"0 1px 3px 0 rgba(0,0,0,0.1)",overflow:"auto",my:1.5,border:"1px solid",borderColor:"divider",maxWidth:"100%"},v={px:3,py:2,fontWeight:600,fontSize:"0.9rem",borderBottom:"1px solid",borderColor:"divider"},y={fontWeight:600,fontSize:"0.75rem"},j={fontSize:"0.875rem"},w=o.memo(function(e){let{id:t,type:a}=e,{visitByLeadData:w,visitByLeadLoading:A,visitByLeadError:k,visitByLeadEmpty:S}=(0,b.jE)("lead"===a?t:null),z=(0,o.useMemo)(()=>["Action","Visit Date","Site","Infra","Status","Purpose","Outlook"],[]);return(0,r.jsxs)(n.A,{sx:C,children:[(0,r.jsx)(p.default,{variant:"subtitle1",sx:v,children:"Visit History"}),A?(0,r.jsx)(n.A,{sx:{display:"flex",justifyContent:"center",p:3},children:(0,r.jsx)(m.default,{size:24})}):k?(0,r.jsx)(p.default,{color:"error",sx:{p:3},children:"Something Went Wrong, Please Try Again!"}):S||!w||0===w.length?(0,r.jsx)(p.default,{sx:{px:3,py:2,fontStyle:"italic",color:"text.secondary"},children:"No visit data available for this lead."}):(0,r.jsxs)(s.A,{size:"small",children:[(0,r.jsx)(h.A,{sx:{bgcolor:"#f7f7f9"},children:(0,r.jsx)(c.default,{children:z.map(e=>(0,r.jsx)(u.default,{sx:y,children:e},e))})}),(0,r.jsx)(d.A,{children:w.map(e=>{var t,a;return(0,r.jsxs)(c.default,{hover:!0,children:[(0,r.jsx)(u.default,{children:(0,r.jsx)(i.A,{component:g.W,href:x.f.dashboard.visit.profile(e.VisitId),underline:"hover",sx:j,"aria-label":"View details for visit ".concat(e.VisitId),children:"View More"})}),(0,r.jsx)(u.default,{children:(0,r.jsxs)(l.A,{spacing:.5,children:[(0,r.jsx)(n.A,{component:"span",sx:{fontSize:"0.875rem",fontWeight:500},children:(0,f.ts)(e.VisitDate)}),(0,r.jsx)(n.A,{component:"span",sx:{fontSize:"0.75rem",color:"text.secondary"},children:(0,f.qi)(e.VisitDate)})]})}),(0,r.jsx)(u.default,{sx:j,children:(null==(t=e.site)?void 0:t.SiteName)||"-"}),(0,r.jsx)(u.default,{sx:j,children:(null==(a=e.infra)?void 0:a.InfraName)||"-"}),(0,r.jsx)(u.default,{sx:j,children:e.VisitStatus||"-"}),(0,r.jsx)(u.default,{sx:j,children:e.Purpose||"-"}),(0,r.jsx)(u.default,{sx:j,children:e.VisitOutlook||"-"})]},e.VisitId)})})]})]})})},15486:(e,t,a)=>{"use strict";a.d(t,{IY:()=>l,iK:()=>m,dF:()=>x,PN:()=>h});var r=a(95155),o=a(68074),n=a(21030),i=a(66292);function l(e){let{onCancel:t,loading:a=!1,submitText:l="Submit",cancelText:s="Cancel",submitColor:c="primary",cancelColor:d="inherit",direction:u="row",justifyContent:h="flex-end",spacing:p=2,fullWidth:m=!1,submitVariant:x="contained",cancelVariant:g="outlined",...f}=e;return(0,r.jsxs)(n.A,{direction:u,justifyContent:h,spacing:p,...f,children:[(0,r.jsx)(i.default,{variant:g,color:d,onClick:t,fullWidth:m,disabled:a,children:s}),(0,r.jsx)(o.default,{type:"submit",variant:x,color:c,loading:a,fullWidth:m,disabled:a,children:l})]})}var s=a(77347),c=a(78822),d=a(53494),u=a(72635);function h(e){let{href:t,title:a,icon:o,iconSize:n=30,tooltipPlacement:i="top",...l}=e;return(0,r.jsx)(c.default,{title:a,arrow:!0,placement:i,children:(0,r.jsx)(d.default,{component:u.W,href:t,...l,children:(0,r.jsx)(s.In,{icon:o,sx:{width:n,height:n}})})})}var p=a(38867);function m(e){let{title:t="Edit",icon:a="solar:pen-bold",iconSize:o=20,size:n="small",onClick:i,tooltipPlacement:l="left",variant:s="glass",position:u="absolute",top:h=16,right:m=16,bottom:x,left:g,color:f="inherit",disabled:b=!1,sx:C={},...v}=e,y="absolute"===u?{position:"absolute",...void 0!==h&&{top:h},...void 0!==m&&{right:m},...void 0!==x&&{bottom:x},...void 0!==g&&{left:g}}:{};return(0,r.jsx)(c.default,{title:t,placement:l,children:(0,r.jsx)(d.default,{onClick:i,size:n,disabled:b,sx:{...y,...{glass:{color:"inherit"===f?"common.white":f,bgcolor:"rgba(255, 255, 255, 0.08)",backdropFilter:"blur(8px)",transition:"all 0.2s","&:hover":{bgcolor:"rgba(255, 255, 255, 0.16)",transform:"scale(1.05)"}},solid:{color:"common.white",bgcolor:"primary.main",transition:"all 0.2s","&:hover":{bgcolor:"primary.dark",transform:"scale(1.05)"}},outlined:{color:"inherit"===f?"text.primary":f,border:1,borderColor:"divider",transition:"all 0.2s","&:hover":{bgcolor:"action.hover",transform:"scale(1.05)"}},ghost:{color:"inherit"===f?"text.secondary":f,transition:"all 0.2s","&:hover":{bgcolor:"action.hover",color:"text.primary"}}}[s],...C},...v,children:(0,r.jsx)(p.W,{icon:a,width:o})})})}function x(e){let{href:t,label:a="New",icon:n="mingcute:add-line",title:i="",size:l="small",color:s="inherit",variant:d="contained",loading:h=!1,disabled:m=!1,tooltipPlacement:x="top",sx:g={},...f}=e,b=(0,r.jsx)(o.default,{size:l,color:s,variant:d,component:u.W,href:t,startIcon:(0,r.jsx)(p.W,{icon:n}),loading:h,disabled:m,sx:{pr:1.5,mr:1.5,...g},...f,children:a});return i?(0,r.jsx)(c.default,{title:i,arrow:!0,placement:x,children:b}):b}},17173:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>T});var r=a(95155);a(85716);var o=a(38543),n=a(96801),i=a(49742),l=a(35046),s=a(15486),c=a(83469),d=a(55594),u=a(62177),h=a(12115),p=a(90221),m=a(24967),x=a(80918),g=a(84256),f=a(21030),b=a(9670),C=a(40001),v=a(2360),y=a(695),j=a(78129),w=a(38867),A=a(54961);let k=d.z.object({ContactFName:d.z.string().min(1,"First name is required").refine(e=>!/\d/.test(e),{message:"First name should not contain numbers"}),ContactLName:d.z.string().min(1,"Last name is required").refine(e=>!/\d/.test(e),{message:"Last name should not contain numbers"}),ContactNo:A.yf.phoneNumber({isValid:m.g0}),ContactEmail:d.z.string().email("Invalid email").optional().or(d.z.literal("")),ContactType:d.z.string().min(1,"Contact type is required"),ContactState:d.z.string().optional(),ContactCity:d.z.string().optional(),ContactPostalCode:d.z.string().optional(),ContactAddress:d.z.string().optional(),avatarUrl:d.z.any().optional(),BrokerLicence:d.z.string().optional(),YearsExperience:d.z.number().optional(),CommisionRate:d.z.number().optional(),Specialization:d.z.string().optional(),accountName:d.z.string().optional(),industry:d.z.string().optional(),accountPhone:d.z.string().optional(),website:d.z.string().optional(),accountAddress:d.z.string().optional(),Instagram:d.z.string().optional(),Facebook:d.z.string().optional(),Twitter:d.z.string().optional()}),S={ContactFName:"",ContactLName:"",ContactNo:"",ContactType:"Customer",ContactEmail:"",ContactCity:"",ContactState:"",ContactAddress:"",ContactPostalCode:"",BrokerLicence:"",CommisionRate:0,YearsExperience:0,Specialization:"",accountName:"",industry:"",accountPhone:"",website:"",accountAddress:"",Instagram:"",Facebook:"",Twitter:""};function z(){let e=(0,y.rd)(),[t,a]=(0,h.useState)(""),n=(0,h.useRef)(""),l=(0,u.mN)({resolver:(0,p.u)(k),defaultValues:S}),{reset:c,handleSubmit:d,control:z,formState:{isSubmitting:T}}=l,N=(0,u.FH)({control:z,name:"ContactType",defaultValue:"Customer"}),I=(0,h.useCallback)(async t=>{try{n.current=t.ContactNo,a("");let r=(0,m.lq)(t.ContactNo||""),l={ContactFName:t.ContactFName,ContactLName:t.ContactLName,ContactNo:r?Number(r.nationalNumber):t.ContactNo,ContactCountryCode:r?r.country:"IN",ContactType:t.ContactType,ContactEmail:t.ContactEmail||null,ContactCity:t.ContactCity||null,ContactState:t.ContactState||null,ContactAddress:t.ContactAddress||null,ContactPostalCode:t.ContactPostalCode||null,..."Broker"===t.ContactType?{BrokerLicence:t.BrokerLicence||null,CommisionRate:t.CommisionRate?Number(t.CommisionRate):null,YearsExperience:t.YearsExperience?Number(t.YearsExperience):null,Specialization:t.Specialization||null}:{},Instagram:t.Instagram||null,Facebook:t.Facebook||null,Twitter:t.Twitter||null},s=await (0,j.vY)(l);o.oR.success("Contact created successfully!"),c(),a(""),s&&s.ContactId&&e.push(i.f.dashboard.contact.profile(s.ContactId))}catch(n){var r,l,s,d;let e=(null==n||null==(l=n.response)||null==(r=l.data)?void 0:r.detail)||(null==n||null==(d=n.response)||null==(s=d.data)?void 0:s.message),t=null==n?void 0:n.message;if(e&&("Contact with this ContactNo already exists."===e||e.includes("ContactNo already exists")))return void a("This phone number is already registered in the system. Please use a different number.");e?o.oR.error(e):t?o.oR.error(t):o.oR.error("Failed to create contact. Please try again.")}},[e,c]);return(0,r.jsx)(A.lV,{methods:l,onSubmit:d(I),children:(0,r.jsxs)(x.A,{container:!0,spacing:3,children:[(0,r.jsx)(x.A,{size:{xs:12,md:4},children:(0,r.jsx)(g.A,{sx:{pt:5,pb:3,px:3,height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:(0,r.jsxs)(f.A,{spacing:2.5,alignItems:"center",sx:{width:"100%"},children:[(0,r.jsx)(f.A,{sx:{width:144,height:144,borderRadius:"50%",border:e=>"2px dashed ".concat(e.palette.divider),display:"flex",alignItems:"center",justifyContent:"center",bgcolor:e=>e.palette.action.hover,position:"relative",transition:"all 0.2s ease","&:hover":{bgcolor:e=>e.palette.action.selected,borderColor:e=>e.palette.primary.main}},children:(0,r.jsxs)(f.A,{spacing:1,alignItems:"center",children:[(0,r.jsx)(w.W,{icon:"solar:camera-add-bold",sx:{width:48,height:48,color:"text.disabled",opacity:.48}}),(0,r.jsx)(b.default,{variant:"caption",sx:{color:"text.secondary",fontWeight:600},children:"Coming Soon"})]})}),(0,r.jsxs)(f.A,{spacing:.5,alignItems:"center",children:[(0,r.jsx)(b.default,{variant:"subtitle2",sx:{color:"text.primary"},children:"Upload Photo"}),(0,r.jsx)(b.default,{variant:"caption",sx:{textAlign:"center",color:"text.secondary"},children:"Feature will be available in future updates"})]})]})})}),(0,r.jsx)(x.A,{size:{xs:12,md:8},children:(0,r.jsxs)(g.A,{sx:{p:3},children:[(0,r.jsx)(b.default,{variant:"h6",gutterBottom:!0,children:"Contact Details"}),(0,r.jsxs)(x.A,{container:!0,spacing:2,children:[(0,r.jsx)(x.A,{size:{xs:12,sm:6},children:(0,r.jsx)(A.D0.Text2,{name:"ContactFName",label:"First Name",placeholder:"Enter Contact First Name"})}),(0,r.jsx)(x.A,{size:{xs:12,sm:6},children:(0,r.jsx)(A.D0.Text2,{name:"ContactLName",label:"Last Name",placeholder:"Enter Contact Last Name"})}),(0,r.jsx)(x.A,{size:{xs:12,sm:6},children:(0,r.jsx)(A.D0.Phone,{name:"ContactNo",label:"Contact Number",placeholder:"+91 XXXXX-XXXXX",country:"IN"})}),(0,r.jsx)(x.A,{size:{xs:12,sm:6},children:(0,r.jsx)(A.D0.Text2,{name:"ContactEmail",label:"Contact Email",placeholder:"abc@gmail.com"})}),t&&(0,r.jsx)(x.A,{size:12,children:(0,r.jsx)(C.default,{severity:"error",sx:{mt:1},children:t})}),(0,r.jsx)(x.A,{size:{xs:12,sm:6},children:(0,r.jsxs)(A.D0.Select,{name:"ContactType",label:"Contact Type",placeholder:"Select Contact Type",children:[(0,r.jsx)(v.default,{value:"Customer",children:"Customer"}),(0,r.jsx)(v.default,{value:"Broker",children:"Broker"})]})}),(0,r.jsx)(x.A,{size:{xs:12,sm:6},children:(0,r.jsx)(A.D0.Text2,{name:"ContactState",label:"State Name",placeholder:"Select State"})}),(0,r.jsx)(x.A,{size:{xs:12,sm:6},children:(0,r.jsx)(A.D0.Text2,{name:"ContactCity",label:"City Name",placeholder:"Select City"})}),(0,r.jsx)(x.A,{size:{xs:12,sm:6},children:(0,r.jsx)(A.D0.Text2,{name:"ContactPostalCode",label:"Postal Code",placeholder:"Ex-391242"})}),(0,r.jsx)(x.A,{size:12,children:(0,r.jsx)(A.D0.Text2,{name:"ContactAddress",label:"Address",placeholder:"Ex-Flat/House Number, Floor Number, Street Name and Number, Building Name or Number, Area/Locality, Landmark etc.",multiline:!0,rows:2,fullWidth:!0})})]})]})}),"Broker"===N&&(0,r.jsx)(x.A,{size:{xs:12,md:4},children:(0,r.jsxs)(g.A,{sx:{p:3},children:[(0,r.jsx)(b.default,{variant:"h6",gutterBottom:!0,children:"Other Details (Broker Only)"}),(0,r.jsxs)(f.A,{spacing:1,children:[(0,r.jsx)(A.D0.Text2,{name:"BrokerLicence",label:"Broker License",placeholder:"License Number"}),(0,r.jsx)(A.D0.Text2,{name:"YearsExperience",label:"Years of Experience",placeholder:"Ex- 0,1,2 years",type:"number"}),(0,r.jsx)(A.D0.Text2,{name:"CommisionRate",label:"Commission Rate %",placeholder:"Ex-5%",type:"number"}),(0,r.jsx)(A.D0.Text2,{name:"Specialization",label:"Specialization",placeholder:"Ex-Area of expertise (Residential etc.)"})]})]})}),"Broker"===N&&(0,r.jsx)(x.A,{size:{xs:12,md:8},children:(0,r.jsxs)(g.A,{sx:{p:3},children:[(0,r.jsx)(b.default,{variant:"h6",gutterBottom:!0,children:"Account Details (Broker Only)"}),(0,r.jsxs)(x.A,{container:!0,spacing:2,children:[(0,r.jsx)(x.A,{size:{xs:12,sm:6},children:(0,r.jsx)(A.D0.Text2,{name:"accountName",label:"Account Name",placeholder:"Company or business name"})}),(0,r.jsx)(x.A,{size:{xs:12,sm:6},children:(0,r.jsx)(A.D0.Text2,{name:"industry",label:"Industry",placeholder:"Ex-Real estate, IT, Finance etc."})}),(0,r.jsx)(x.A,{size:{xs:12,sm:6},children:(0,r.jsx)(A.D0.Phone,{name:"accountPhone",label:"Phone Number",placeholder:"+91 XXXXX-XXXXX",country:"IN"})}),(0,r.jsx)(x.A,{size:{xs:12,sm:6},children:(0,r.jsx)(A.D0.Text2,{name:"website",label:"Website Name",placeholder:"Ex-www.abc.com"})}),(0,r.jsx)(x.A,{size:12,children:(0,r.jsx)(A.D0.Text2,{name:"accountAddress",label:"Address",placeholder:"Ex-Flat/House Number, Floor Number, Street Name and Number, Building Name or Number, Area/Locality, Landmark etc.",multiline:!0,rows:3,fullWidth:!0})})]})]})}),(0,r.jsx)(x.A,{size:12,children:(0,r.jsxs)(g.A,{sx:{p:3},children:[(0,r.jsx)(b.default,{variant:"h6",gutterBottom:!0,children:"Social"}),(0,r.jsxs)(x.A,{container:!0,spacing:2,children:[(0,r.jsx)(x.A,{size:{xs:12,sm:4},children:(0,r.jsx)(A.D0.Text2,{name:"Instagram",label:"Instagram",placeholder:"@yourhandle"})}),(0,r.jsx)(x.A,{size:{xs:12,sm:4},children:(0,r.jsx)(A.D0.Text2,{name:"Facebook",label:"Facebook",placeholder:"facebook.com/yourprofile"})}),(0,r.jsx)(x.A,{size:{xs:12,sm:4},children:(0,r.jsx)(A.D0.Text2,{name:"Twitter",label:"Twitter",placeholder:"@yourhandle"})})]})]})}),(0,r.jsx)(x.A,{size:12,children:(0,r.jsx)(s.IY,{onCancel:()=>c(),loading:T,submitText:"Submit",cancelText:"Cancel",submitColor:"inherit"})})]})})}function T(){return(0,r.jsxs)(l.KG,{children:[(0,r.jsx)(c.g,{links:[{name:"Dashboard",href:i.f.dashboard.root},{name:"Contact",href:i.f.dashboard.contact.root},{name:"New Contact"}],sx:{mb:{xs:1,xl:2}}}),(0,r.jsxs)(n.A,{sx:{display:"flex",alignItems:"center",mb:1},children:[(0,r.jsx)(s.PN,{title:"View Contact List",href:i.f.dashboard.contact.list,icon:"material-symbols:view-list"}),(0,r.jsx)(s.PN,{title:"View Contact Cards",href:i.f.dashboard.contact.root,icon:"material-symbols:view-module"})]}),(0,r.jsx)(z,{}),(0,r.jsx)(o.N9,{position:"top-right",autoClose:3e3})]})}},20991:(e,t,a)=>{"use strict";function r(e,t){return t.split(".").reduce((e,t)=>e&&e[t],e)}function o(e,t,a){let o=r(e,a),n=r(t,a);return n<o?-1:+(n>o)}function n(e,t){return"desc"===e?(e,a)=>o(e,a,t):(e,a)=>-o(e,a,t)}a.d(t,{nz:()=>y,cY:()=>b,V2:()=>j,F2:()=>f,gR:()=>v,Sb:()=>C,hz:()=>n,K2:()=>l});var i=a(12115);function l(e){var t,a,r,o,n;let[l,s]=(0,i.useState)(!!(null==e?void 0:e.defaultDense)),[c,d]=(0,i.useState)(null!=(t=null==e?void 0:e.defaultCurrentPage)?t:0),[u,h]=(0,i.useState)(null!=(a=null==e?void 0:e.defaultOrderBy)?a:"customerName"),[p,m]=(0,i.useState)(null!=(r=null==e?void 0:e.defaultRowsPerPage)?r:5),[x,g]=(0,i.useState)(null!=(o=null==e?void 0:e.defaultOrder)?o:"asc"),[f,b]=(0,i.useState)(null!=(n=null==e?void 0:e.defaultSelected)?n:[]),C=(0,i.useCallback)(e=>{let t=u===e&&"asc"===x;""!==e&&(g(t?"desc":"asc"),h(e))},[x,u]),v=(0,i.useCallback)(e=>{b(f.includes(e)?f.filter(t=>t!==e):[...f,e])},[f]),y=(0,i.useCallback)(e=>{d(0),m(parseInt(e.target.value,10))},[]),j=(0,i.useCallback)(e=>{s(e.target.checked)},[]),w=(0,i.useCallback)((e,t)=>{if(e)return void b(t);b([])},[]),A=(0,i.useCallback)((e,t)=>{d(t)},[]),k=(0,i.useCallback)(()=>{d(0)},[]),S=(0,i.useCallback)(e=>{b([]),c&&e<2&&d(c-1)},[c]),z=(0,i.useCallback)((e,t)=>{let a=f.length;b([]),c&&(a===e?d(c-1):a===t?d(0):a>e&&d(Math.ceil((t-a)/p)-1))},[c,p,f.length]);return{dense:l,order:x,page:c,orderBy:u,rowsPerPage:p,selected:f,onSelectRow:v,onSelectAllRows:w,onSort:C,onChangePage:A,onChangeDense:j,onResetPage:k,onChangeRowsPerPage:y,onUpdatePageDeleteRow:S,onUpdatePageDeleteRows:z,setPage:d,setDense:s,setOrder:g,setOrderBy:h,setSelected:b,setRowsPerPage:m}}var s=a(95155);a(69004);var c=a(96801),d=a(21030),u=a(55398),h=a(17764),p=a(9670),m=a(72635),x=a(31224),g=a(32104);let f=(0,i.memo)(function(e){var t;let{params:a,href:r,emptyValue:o="—"}=e,n=null==a||null==(t=a.row)?void 0:t[a.field];return null==n||""===n?(0,s.jsx)("span",{children:o}):(0,s.jsx)(h.A,{component:m.W,href:r,color:"inherit",variant:"subtitle2",sx:{"&:hover":{color:"primary.main"},overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",textTransform:"capitalize"},children:n})}),b=(0,i.memo)(function(e){var t,a;let{params:r,href:o,emptyValue:n="—"}=e;if((null==r||null==(t=r.rowNode)?void 0:t.type)==="group")return(0,s.jsx)(p.default,{variant:"subtitle2",sx:{fontWeight:600},children:r.value||n});let i=null==r||null==(a=r.row)?void 0:a.customerName;if(!i)return(0,s.jsxs)(c.A,{sx:{display:"flex",alignItems:"center",minWidth:1,py:1},children:[(0,s.jsx)(u.A,{sx:{width:30,height:30,mr:2,fontSize:"0.875rem"}}),(0,s.jsx)("span",{children:n})]});let l=i.charAt(0).toUpperCase();return(0,s.jsxs)(c.A,{sx:{display:"flex",alignItems:"center",minWidth:1,py:1},children:[(0,s.jsx)(u.A,{alt:i,sx:{width:30,height:30,mr:2,fontSize:"0.875rem"},children:l}),(0,s.jsx)(h.A,{component:m.W,href:o,variant:"body2",color:"inherit",sx:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical","&:hover":{color:"primary.main"},textTransform:"capitalize"},children:i})]})}),C=(0,i.memo)(function(e){var t,a;let{params:r,emptyValue:o="—"}=e;if((null==r||null==(t=r.rowNode)?void 0:t.type)==="group")return(0,s.jsx)(p.default,{variant:"subtitle2",sx:{fontWeight:600,textTransform:"capitalize"},children:r.value||o});let n=null==r||null==(a=r.row)?void 0:a[r.field];if(null==n||""===n)return(0,s.jsx)("span",{children:o});let i="string"==typeof n?n:String(n);return(0,s.jsx)(p.default,{variant:"body2",color:"inherit",sx:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",wordBreak:"break-word"},children:i})}),v=(0,i.memo)(function(e){var t,a;let{params:r,emptyValue:o="—"}=e;if((null==r||null==(t=r.rowNode)?void 0:t.type)==="group")return(0,s.jsx)(p.default,{variant:"subtitle2",sx:{fontWeight:600},children:r.value||o});let n=null==r||null==(a=r.row)?void 0:a[r.field];return null==n||""===n?(0,s.jsx)("span",{children:o}):(0,s.jsx)(p.default,{variant:"body2",color:"inherit",sx:{fontVariantNumeric:"tabular-nums",textAlign:"right",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:n})}),y=(0,i.memo)(function(e){var t;let{params:a,emptyValue:r="—"}=e,o=null==a||null==(t=a.row)?void 0:t[a.field];return null==o||""===o?(0,s.jsx)("span",{children:r}):(0,s.jsx)(p.default,{variant:"body2",color:"inherit",sx:{fontVariantNumeric:"tabular-nums",textAlign:"right",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:(0,x.KZ)(o)})}),j=(0,i.memo)(function(e){var t;let{params:a,emptyValue:r="—",showTime:o=!0}=e,n=null==a||null==(t=a.row)?void 0:t[a.field];return!n||isNaN(new Date(n).getTime())?(0,s.jsx)("span",{children:r}):(0,s.jsxs)(d.A,{spacing:.5,alignItems:"flex-start",children:[(0,s.jsx)(p.default,{variant:"body2",children:(0,g.ts)(n)}),o&&(0,s.jsx)(p.default,{variant:"caption",color:"text.secondary",children:(0,g.qi)(n)})]})})},25114:(e,t,a)=>{"use strict";a.d(t,{CI:()=>l,M6:()=>s,P8:()=>n,T5:()=>c,vY:()=>i});var r=a(18835),o=a(25560);let n=async(e,t)=>{let a=sessionStorage.getItem(o.A);return(await r.Ay.get(r.vZ.contact.search(e,t),{headers:{accept:"application/json",Authorization:"Bearer ".concat(a)}})).data},i=async e=>{try{let t=sessionStorage.getItem(o.A);return(await r.Ay.post(r.vZ.contact.create,e,{headers:{accept:"*/*",Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}})).data}catch(e){throw console.log("Contact creation error:",e),e}},l=async(e,t)=>{try{let a=sessionStorage.getItem(o.A);return(await r.Ay.put(r.vZ.contact.update(e),t,{headers:{accept:"application/json",Authorization:"Bearer ".concat(a),"Content-Type":"application/json"}})).data}catch(e){throw console.log("Error (updateContact):",e),e}},s=async(e,t)=>{try{let a=sessionStorage.getItem(o.A),n=r.vZ.contact.count(t,e);return(await r.Ay.get(n,{headers:{accept:"application/json",Authorization:"Bearer ".concat(a)}})).data}catch(e){throw console.log("Error (getLeadCountByContactId):",e),e}},c=async e=>{try{let t=sessionStorage.getItem(o.A),a=r.vZ.contact.siteWiseCount(e);return(await r.Ay.get(a,{headers:{accept:"application/json",Authorization:"Bearer ".concat(t)}})).data}catch(e){throw console.log("Error (getSiteWiseLeadCount):",e),e}}},35046:(e,t,a)=>{"use strict";a.d(t,{KG:()=>r.DashboardContent}),a(57452);var r=a(39303)},35086:(e,t,a)=>{"use strict";a.d(t,{t1:()=>T,NV:()=>g,zS:()=>x,uy:()=>W});var r=a(95155),o=a(12115),n=a(36339),i=a(11654),l=a(35881),s=a(90516);let c={root:(0,s.L)("chart__root"),loading:(0,s.L)("chart__loading"),legends:{root:(0,s.L)("chart__legends__root"),item:{wrap:(0,s.L)("chart__legends__item__wrap"),root:(0,s.L)("chart__legends__item__root"),dot:(0,s.L)("chart__legends__item__dot"),icon:(0,s.L)("chart__legends__item__icon"),label:(0,s.L)("chart__legends__item__label"),value:(0,s.L)("chart__legends__item__value")}}};var d=a(41476),u=a(2360),h=a(38017),p=a(38867),m=a(71690);function x(e){var t,a,o,l;let{options:s,value:c,onChange:x,slotProps:g,...f}=e,{open:b,anchorEl:C,onClose:v,onOpen:y}=(0,n.fP)();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(h.A,{onClick:y,...null==g?void 0:g.button,sx:[e=>({pr:1,pl:1.5,gap:1.5,height:34,borderRadius:1,typography:"subtitle2",border:"solid 1px ".concat((0,i.IG)(e.vars.palette.grey["500Channel"],.24))}),...Array.isArray(null==g||null==(t=g.button)?void 0:t.sx)?null!=(l=null==g||null==(a=g.button)?void 0:a.sx)?l:[]:[null==g||null==(o=g.button)?void 0:o.sx]],...f,children:[c,(0,r.jsx)(p.W,{width:16,icon:b?"eva:arrow-ios-upward-fill":"eva:arrow-ios-downward-fill"})]}),(0,r.jsx)(m.t,{open:b,anchorEl:C,onClose:v,...null==g?void 0:g.popover,children:(0,r.jsx)(d.A,{children:s.map(e=>(0,r.jsx)(u.default,{selected:e===c,onClick:()=>{v(),x(e)},children:e},e))})})]})}function g(e){let{sx:t,className:a,slotProps:o,icons:n=[],values:l=[],labels:s=[],colors:d=[],sublabels:u=[],...h}=e;return(0,r.jsx)(f,{className:(0,i.zP)([c.legends.root,a]),sx:t,...h,children:s.map((e,t)=>{var a,i,s,h;return(0,r.jsxs)(b,{className:c.legends.item.wrap,sx:[{"--icon-color":d[t],...null==o?void 0:o.wrapper},...Array.isArray(null==o||null==(a=o.wrapper)?void 0:a.sx)?null!=(h=null==o||null==(i=o.wrapper)?void 0:i.sx)?h:[]:[null==o||null==(s=o.wrapper)?void 0:s.sx]],children:[(0,r.jsxs)(C,{className:c.legends.item.root,...null==o?void 0:o.root,children:[n.length?(0,r.jsx)(v,{className:c.legends.item.icon,...null==o?void 0:o.icon,children:n[t]}):(0,r.jsx)(y,{className:c.legends.item.dot,...null==o?void 0:o.dot}),(0,r.jsxs)(j,{className:c.legends.item.label,...null==o?void 0:o.label,children:[e,!!u.length&&(0,r.jsxs)(r.Fragment,{children:[" "," (".concat(u[t],")")]})]})]}),l&&(0,r.jsx)(w,{className:c.legends.item.value,...null==o?void 0:o.value,children:l[t]})]},e)})})}let f=(0,l.default)("ul")(e=>{let{theme:t}=e;return{display:"flex",flexWrap:"wrap",gap:t.spacing(2)}}),b=(0,l.default)("li")(()=>({display:"inline-flex",flexDirection:"column"})),C=(0,l.default)("div")(e=>{let{theme:t}=e;return{gap:2,alignItems:"center",display:"inline-flex",justifyContent:"flex-start",fontSize:t.typography.pxToRem(9.6),fontWeight:t.typography.fontWeightMedium}}),v=(0,l.default)("span")({display:"inline-flex",color:"var(--icon-color)","& > :first-of-type:not(style):not(:first-of-type ~ *), & > style + *":{width:20,height:20}}),y=(0,l.default)("span")({width:8,height:8,flexShrink:0,display:"flex",borderRadius:"50%",position:"relative",alignItems:"center",justifyContent:"center",color:"var(--icon-color)",backgroundColor:"currentColor"}),j=(0,l.default)("span")({flexShrink:0}),w=(0,l.default)("span")(e=>{let{theme:t}=e;return{...t.typography.h12,marginTop:t.spacing(1)}});var A=a(96801),k=a(68086);function S(e){let{sx:t,className:a,type:o,...n}=e;return(0,r.jsx)(A.A,{className:(0,i.zP)([c.loading,a]),sx:[()=>({top:0,left:0,width:1,zIndex:9,height:1,p:"inherit",overflow:"hidden",alignItems:"center",position:"absolute",borderRadius:"inherit",justifyContent:"center"}),...Array.isArray(t)?t:[t]],...n,children:(0,r.jsx)(k.A,{variant:"circular",sx:{width:1,height:1,borderRadius:"inherit",...["donut","radialBar","pie","polarArea"].includes(o)&&{borderRadius:"50%"}}})})}let z=(0,o.lazy)(()=>Promise.all([a.e(7776),a.e(8699)]).then(a.bind(a,78699)).then(e=>({default:e.default}))),T=(0,o.forwardRef)((e,t)=>{let{type:a,series:l,options:s,slotProps:d,className:u,sx:h,...p}=e,m=(0,n.DE)(),x=()=>(0,r.jsx)(S,{type:a,sx:null==d?void 0:d.loading});return(0,r.jsx)(N,{ref:t,dir:"ltr",className:(0,i.zP)([c.root,u]),sx:h,...p,children:m?(0,r.jsx)(o.Suspense,{fallback:x(),children:(0,r.jsx)(z,{type:a,series:l,options:s,width:"100%",height:"100%"})}):x()})}),N=(0,l.default)("div")(e=>{let{theme:t}=e;return{width:"100%",flexShrink:0,position:"relative",borderRadius:1.5*t.shape.borderRadius}});var I=a(84089),L=a(73746);function W(e){var t;let a=null!=(t=E((0,L.default)()))?t:{};return(0,I.h)(a,null!=e?e:{})}let E=e=>{let t={show:!0,label:"Total",color:e.vars.palette.text.secondary,fontSize:e.typography.subtitle2.fontSize,fontWeight:e.typography.subtitle2.fontWeight},a={offsetY:8,color:e.vars.palette.text.primary,fontSize:e.typography.h4.fontSize,fontWeight:e.typography.h4.fontWeight};return{chart:{toolbar:{show:!1},zoom:{enabled:!1},parentHeightOffset:0,fontFamily:e.typography.fontFamily,foreColor:e.vars.palette.text.disabled,animations:{enabled:!0,speed:360,animateGradually:{enabled:!0,delay:120},dynamicAnimation:{enabled:!0,speed:360}}},colors:[e.palette.primary.main,e.palette.secondary.main,e.palette.warning.main,e.palette.info.main,e.palette.error.main,e.palette.success.main,e.palette.warning.dark,e.palette.success.darker,e.palette.info.dark,e.palette.info.darker],states:{hover:{filter:{type:"darken"}},active:{filter:{type:"darken"}}},fill:{opacity:1,gradient:{type:"vertical",shadeIntensity:0,opacityFrom:.4,opacityTo:0,stops:[0,100]}},dataLabels:{enabled:!1},stroke:{width:2.5,curve:"smooth",lineCap:"round"},grid:{strokeDashArray:3,borderColor:e.vars.palette.divider,padding:{top:0,right:0,bottom:0},xaxis:{lines:{show:!1}}},xaxis:{axisBorder:{show:!1},axisTicks:{show:!1}},yaxis:{tickAmount:5},markers:{size:0,strokeColors:e.vars.palette.background.paper},tooltip:{theme:"false",fillSeriesColor:!1,x:{show:!0}},legend:{show:!1,position:"top",fontWeight:500,fontSize:"13px",horizontalAlign:"right",markers:{shape:"circle"},labels:{colors:e.vars.palette.text.primary},itemMargin:{horizontal:8,vertical:8}},plotOptions:{bar:{borderRadius:4,columnWidth:"48%",borderRadiusApplication:"end"},pie:{donut:{labels:{show:!0,value:{...a},total:{...t}}}},radialBar:{hollow:{margin:-8,size:"100%"},track:{margin:-8,strokeWidth:"50%",background:(0,i.IG)(e.vars.palette.grey["500Channel"],.16)},dataLabels:{value:{...a},total:{...t}}},radar:{polygons:{fill:{colors:["transparent"]},strokeColors:e.vars.palette.divider,connectorColors:e.vars.palette.divider}},polarArea:{rings:{strokeColor:e.vars.palette.divider},spokes:{connectorColors:e.vars.palette.divider}},heatmap:{distributed:!0}},responsive:[{breakpoint:e.breakpoints.values.sm,options:{plotOptions:{bar:{borderRadius:3,columnWidth:"80%"}}}},{breakpoint:e.breakpoints.values.md,options:{plotOptions:{bar:{columnWidth:"60%"}}}}]}}},48074:(e,t,a)=>{Promise.resolve().then(a.bind(a,89227)),Promise.resolve().then(a.bind(a,17173)),Promise.resolve().then(a.bind(a,67762)),Promise.resolve().then(a.bind(a,59482))},59482:(e,t,a)=>{"use strict";a.r(t),a.d(t,{ContactProfileView:()=>eA});var r=a(95155),o=a(38543),n=a(12115),i=a(96801),l=a(84256),s=a(35695),c=a(49742),d=a(695),u=a(27740),h=a(35046),p=a(78129),m=a(83469),x=a(15486),g=a(26494),f=a(64637),b=a(53494),C=a(21030),v=a(9670),y=a(17764),j=a(3951),w=a(31224),A=a(25114),k=a(38867),S=a(40001),z=a(33106),T=a(26403),N=a(78822),I=a(2360),L=a(68895),W=a(62516),E=a(78880),D=a(77498),M=a(97911),R=a(8873),F=a(9559),B=a(6270),P=a(16451),_=a(57033),O=a(65068),H=a(56156),V=a(449),G=a(89360),Z=a(11743),U=a(26096),X=a(88165),Y=a(31847),q=a(69004),K=a(20991);a(72635),a(32104);var Q=a(48731);function $(e){var t,a;let{params:o,emptyValue:n="—"}=e;if((null==o||null==(t=o.rowNode)?void 0:t.type)==="group")return(0,r.jsx)(v.default,{variant:"subtitle2",sx:{fontWeight:600,textTransform:"capitalize"},children:o.value||n});let i=null==o||null==(a=o.row)?void 0:a[o.field];return null==i||""===i?(0,r.jsx)("span",{children:n}):(0,r.jsx)(Q.JU,{variant:"soft",color:(e=>{switch(e){case"New":default:return"default";case"Stale":return"info";case"Qualify":return"success";case"Lost":return"error";case"Win":return"primary"}})(i),children:i})}var J=a(7497);let ee=[{field:"",label:"No Grouping"},{field:"siteName",label:"Site Name"},{field:"leadStatus",label:"Lead Status"},{field:"leadSource",label:"Lead Source"}],et={siteName:!0},ea=["siteName","actions"],er=[10,20,50,100],eo=e=>{var t,a,r,o;return{leadId:e.data.LeadId,leadName:e.data.LeadName,brokerId:e.data.BrokerId,brokerName:e.data.BrokerId&&"".concat(null==(t=e.data.broker)?void 0:t.ContactFName," ").concat(null==(a=e.data.broker)?void 0:a.ContactLName),brokerContact:e.data.BrokerId&&(null==(r=e.data.broker)?void 0:r.ContactNo),leadStatus:e.data.LeadStatus,leadSource:e.data.LeadSource,createdDate:e.data.LeadCreatedDate,siteId:e.data.SiteId,siteName:null==(o=e.data.site)?void 0:o.SiteName,viewType:e.data.ViewType,floorPreference:e.data.FloorPreference,direction:e.data.Direction,bedrooms:e.data.Bedrooms,sizeSqFt:e.data.SizeSqFt}};function en(e){let{visibleRowCount:t}=e,a=(0,M.h)(),o=(0,R.Nc)(a,F.r4);return(0,r.jsxs)(i.A,{sx:{mx:2},children:[o," lead",1!==o?"s":""," in ",t," group",1!==t?"s":""]})}function ei(e){let{rowGroupingModel:t,onGroupByChange:a}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.A,{sx:{px:2,py:1,borderBottom:"1px solid",borderColor:"divider",backgroundColor:"background.paper",display:"flex",justifyContent:"space-between",alignItems:"center"},children:(0,r.jsxs)(D.A,{size:"small",sx:{minWidth:200},children:[(0,r.jsx)(E.default,{children:"Group By"}),(0,r.jsx)(T.A,{value:t.length>0?t[0]:"",onChange:e=>a(e.target.value),label:"Group By",sx:{"& .MuiOutlinedInput-root":{borderRadius:1,backgroundColor:"background.paper",fontSize:"0.875rem",height:40}},children:ee.map(e=>(0,r.jsx)(I.default,{value:e.field,children:e.label},e.field))})]})}),(0,r.jsxs)(B.b,{sx:{px:2,py:1,justifyContent:"space-between",alignItems:"center",backgroundColor:"background.paper"},children:[(0,r.jsx)(P.b,{placeholder:"Search...",sx:{width:250,"& .MuiOutlinedInput-root":{borderRadius:1,backgroundColor:"background.paper",fontSize:"0.875rem",height:40}}}),(0,r.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,r.jsx)(N.default,{title:"Manage Columns",placement:"bottom",children:(0,r.jsx)(_.j,{sx:{minWidth:40,width:40,height:40,padding:1,color:"text.secondary",border:"1px solid",borderColor:"divider",borderRadius:1,"& .MuiButton-startIcon":{margin:0},"& .MuiButton-text":{minWidth:0},"&:hover":{borderColor:"primary.main",backgroundColor:"primary.lighter"}},startIcon:(0,r.jsx)(k.W,{icon:"solar:layers-minimalistic-bold",width:18})})}),(0,r.jsx)(N.default,{title:"Show Filters",placement:"bottom",children:(0,r.jsx)(O.Q,{sx:{minWidth:40,width:40,height:40,padding:1,color:"text.secondary",border:"1px solid",borderColor:"divider",borderRadius:1,"& .MuiButton-startIcon":{margin:0},"& .MuiButton-text":{minWidth:0},"&:hover":{borderColor:"primary.main",backgroundColor:"primary.lighter"}},startIcon:(0,r.jsx)(k.W,{icon:"solar:filter-bold",width:18})})}),(0,r.jsx)(N.default,{title:"Export Data",placement:"bottom",children:(0,r.jsx)(H.qn,{sx:{minWidth:40,width:40,height:40,padding:1,color:"text.secondary",border:"1px solid",borderColor:"divider",borderRadius:1,"& .MuiButton-startIcon":{margin:0},"& .MuiButton-text":{minWidth:0},"&:hover":{borderColor:"primary.main",backgroundColor:"primary.lighter"}},startIcon:(0,r.jsx)(k.W,{icon:"solar:export-bold",width:18}),printOptions:{hideFooter:!0,hideToolbar:!0,pageStyle:"@page { margin: 1in; }"},csvOptions:{fileName:"leads-export",utf8WithBom:!0,delimiter:","}})})]})]})]})}function el(e){return(0,r.jsx)(z.A,{...e,direction:"up"})}function es(e){let{contactId:t,contactType:a}=e,o=(0,V.b)(),[i,s]=(0,n.useState)([]),[d,u]=(0,n.useState)(!1),[p,m]=(0,n.useState)({page:0,pageSize:10}),[x,g]=(0,n.useState)(et),f=(null==a?void 0:a.toLowerCase())==="customer"?t:null,b=(null==a?void 0:a.toLowerCase())==="broker"?t:null,{searchedLeadsData:C,searchedLeadsLoading:v}=(0,X.Me)(null,f,b),y=(0,n.useMemo)(()=>C&&Array.isArray(C)?C.map(e=>eo(e)):[],[C]),j=(0,n.useMemo)(()=>(null==y?void 0:y.length)?y:[],[y]),w=(0,n.useCallback)(e=>{s(""===e?[]:[e])},[]),A=(0,n.useMemo)(()=>[{field:"leadName",headerName:"Lead Name",flex:1,minWidth:130,hideable:!1,groupable:!1,renderCell:e=>(0,r.jsx)(K.F2,{params:e,href:c.f.dashboard.lead.profile(e.row.leadId)})},{field:"siteName",headerName:"Site Name",minWidth:130,renderCell:e=>(0,r.jsx)(K.Sb,{params:e})},{field:"leadStatus",headerName:"Lead Status",width:120,valueOptions:Y.eD,renderCell:e=>(0,r.jsx)($,{params:e})},{field:"leadSource",headerName:"Lead Source",width:160,renderCell:e=>(0,r.jsx)(K.Sb,{params:e})},{field:"bedrooms",headerName:"Bedrooms",width:160,renderCell:e=>(0,r.jsx)(K.Sb,{params:e})},{field:"brokerName",headerName:"Broker Name",width:160,renderCell:e=>(0,r.jsx)(K.F2,{params:e,href:c.f.dashboard.contact.profile(e.row.brokerId)})},{field:"brokerContact",headerName:"Broker Contact",width:140,renderCell:e=>(0,r.jsx)(K.gR,{params:e})},{field:"createdDate",headerName:"Created Date",width:160,renderCell:e=>(0,r.jsx)(K.V2,{params:e})}],[]),k=(0,n.useCallback)(()=>A.filter(e=>!1!==e.hideable&&!ea.includes(e.field)).map(e=>e.field),[A]),z=(0,G.s)({apiRef:o,initialState:{rowGrouping:{model:i},pagination:{paginationModel:{page:0,pageSize:10}},sorting:{sortModel:[{field:"CreatedDate",sort:"desc"}]},filter:{filterModel:{items:[],quickFilterValues:[]}}}}),T=(0,n.useCallback)(e=>{let{row:t}=e;return(0,r.jsx)(J.M,{id:t.leadId,type:"lead"})},[]),N=(0,n.useCallback)(()=>"auto",[]);return(0,r.jsxs)(h.KG,{sx:{flexGrow:1,display:"flex",flexDirection:"column",maxWidth:"none !important",width:"100% !important",padding:0,margin:0},children:[(0,r.jsx)(L.A,{open:d,TransitionComponent:el,anchorOrigin:{vertical:"bottom",horizontal:"right"},sx:{mb:2},children:(0,r.jsx)(S.default,{severity:"info",icon:(0,r.jsx)(W.default,{size:20}),sx:{backgroundColor:"white",color:"text.primary","& .MuiAlert-icon":{color:"primary.main"}},children:"Exporting data..."})}),(0,r.jsx)(l.A,{sx:{minHeight:785,width:"100%",maxWidth:"none",flexGrow:{md:1},display:{md:"flex"},height:{xs:800,md:"calc(100vh - 200px)"},flexDirection:{md:"column"},margin:0},children:(0,r.jsx)(Z._,{apiRef:o,checkboxSelection:!0,rows:j,columns:A,loading:v,getRowId:e=>e.leadId,showToolbar:!0,initialState:z,rowGroupingModel:i,onRowGroupingModelChange:s,slots:{toolbar:()=>(0,r.jsx)(ei,{rowGroupingModel:i,onGroupByChange:w}),noRowsOverlay:q.H,noResultsOverlay:()=>(0,r.jsx)(q.H,{title:"No results found"}),loadingOverlay:W.default,footerRowCount:en},getDetailPanelHeight:N,getDetailPanelContent:T,pageSizeOptions:er,paginationModel:p,onPaginationModelChange:m,pagination:!0,paginationMode:"client",onRowSelectionModelChange:e=>{},columnVisibilityModel:x,onColumnVisibilityModelChange:g,disableRowSelectionOnClick:!0,disableAggregation:!0,disablePivoting:!0,onExcelExportStateChange:e=>{u("pending"===e)},slotProps:{columnsManagement:{getTogglableColumns:k},toolbar:{showQuickFilter:!0,showColumnsButton:!0,showFilterButton:!0,showExport:!0,quickFilterProps:{debounceMs:500,placeholder:"Search leads..."},csvOptions:{fileName:"leads-export",utf8WithBom:!0,delimiter:","},printOptions:{hideFooter:!0,hideToolbar:!0,pageStyle:"@page { margin: 1in; }"},excelOptions:{fileName:"leads-export"}}},sx:{["& .".concat(U.x.cell)]:{padding:"8px 16px"},"& .MuiDataGrid-virtualScroller":{overflow:"auto"},"& .MuiDataGrid-cell:focus, & .MuiDataGrid-cell:focus-within":{outline:"none !important"},"& .MuiDataGrid-footerContainer":{borderTop:"1px solid",borderColor:"divider",justifyContent:"space-between"},"& .MuiTablePagination-root":{overflow:"visible"},"& .MuiTablePagination-displayedRows, & .MuiTablePagination-selectLabel":{fontSize:"0.875rem"},"& .MuiDataGrid-columnHeaders":{borderTop:"2px solid",borderColor:"divider"},"& .MuiDataGrid-cell":{borderRight:"1px solid",borderColor:"divider",alignItems:"center",display:"inline-flex"},"& .MuiDataGrid-row":{borderColor:"divider"},"& .MuiDataGrid-columnHeader":{borderColor:"divider"}}})})]})}var ec=a(73746),ed=a(35086);function eu(e){let{contactId:t,title:a,subheader:o,sx:s,...c}=e,d=(0,ec.default)(),[u,h]=(0,n.useState)(null),[p,m]=(0,n.useState)(!0),[x,g]=(0,n.useState)("All"),[b,C]=(0,n.useState)(0);(0,n.useEffect)(()=>{(async()=>{try{m(!0);let e=await (0,A.T5)(t),a=function(e,t){let a={Lost:t.palette.error.main,lost:t.palette.error.main,New:t.palette.success.main,new:t.palette.success.main,Stale:t.palette.warning.main,stale:t.palette.warning.main,Win:t.palette.info.main,win:t.palette.info.main,Quality:t.palette.grey.main,quality:t.palette.grey.main,Qualify:t.palette.grey[500],qualify:t.palette.grey[500]},r=new Set;Object.values(e).forEach(e=>{Object.keys(e).forEach(e=>{r.add(e)})});let o=["New","Win","Quality","Qualify","Stale","Lost"],n=Array.from(r).sort((e,t)=>{let a=o.findIndex(t=>t.toLowerCase()===e.toLowerCase()),r=o.findIndex(e=>e.toLowerCase()===t.toLowerCase());return -1===a&&-1===r?e.localeCompare(t):-1===a?1:-1===r?-1:a-r}),i=Object.entries(e).map(e=>{let[t,a]=e;return{siteName:t,totalLeads:Object.values(a).reduce((e,t)=>e+t,0),statusCounts:a}});i.sort((e,t)=>t.totalLeads-e.totalLeads);let l=i.map(e=>e.siteName),s={};n.forEach(t=>{s[t]=l.map(a=>e[a][t]||0)});let c=n.map(e=>({name:e,data:s[e]})),d=c.map(e=>a[e.name]||a[e.name.toLowerCase()]||t.palette.grey[500]);return{series:c,seriesByStatus:s,categories:l,colors:d,statuses:n,statusColors:n.map(e=>a[e]||a[e.toLowerCase()]||t.palette.grey[500]),statusColorMap:a}}(e,d),r=0;Object.values(e).forEach(e=>{Object.values(e).forEach(e=>{r+=e})}),C(r),h(a)}catch(e){console.error("Error fetching site-wise lead data:",e)}finally{m(!1)}})()},[t,d]);let y=(0,n.useCallback)(e=>{g(e)},[]),j=(0,ed.uy)({chart:{type:"bar",stacked:!0,toolbar:{show:!1},zoom:{enabled:!1}},plotOptions:{bar:{horizontal:!0,barHeight:"70%",borderRadius:4,borderRadiusApplication:"end",dataLabels:{position:"center"}}},stroke:{width:0,colors:["transparent"]},tooltip:{y:{formatter:e=>"".concat((0,w.kB)(e)," leads")},theme:"light"},grid:{borderColor:d.palette.divider,strokeDashArray:3,padding:{top:5,right:10,bottom:5,left:10},xaxis:{lines:{show:!0}},yaxis:{lines:{show:!1}}},dataLabels:{enabled:!0,formatter:e=>e>0?(0,w.kB)(e):"",style:{fontSize:"11px",fontWeight:600,colors:["#fff"]}},legend:{show:!1},responsive:[{breakpoint:768,options:{plotOptions:{bar:{barHeight:"60%"}},dataLabels:{style:{fontSize:"10px"}}}}]});if(p||!u)return(0,r.jsxs)(l.A,{sx:s,...c,children:[(0,r.jsx)(f.A,{title:a,subheader:o}),(0,r.jsx)(i.A,{sx:{height:420,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,r.jsx)(ed.t1,{type:"bar",series:[],options:j,slotProps:{loading:{p:2.5}},sx:{height:"100%",width:"100%"}})})]});let k="All"===x,S=(e,t)=>t[e]||t[e.toLowerCase()]||d.palette.grey[500],z=u.statuses.map(e=>u.seriesByStatus[e].reduce((e,t)=>e+t,0)),T=k?u.series:[{name:x,data:u.seriesByStatus[x],color:S(x,u.statusColorMap)}],N=["All",...u.statuses],I=40*u.categories.length+80,L=I>420,W=L?I:Math.max(I,300),E={...j,colors:k?u.statusColors:[S(x,u.statusColorMap)],xaxis:{...j.xaxis,categories:u.categories,labels:{formatter:e=>(0,w.kB)(e),style:{fontSize:"12px",fontWeight:500,colors:d.palette.text.secondary}},axisBorder:{show:!0,color:d.palette.divider},axisTicks:{show:!0,color:d.palette.divider}},yaxis:{labels:{style:{fontSize:"12px",fontWeight:500,colors:d.palette.text.primary},maxWidth:120,formatter:e=>e.length>15?"".concat(e.substring(0,15),"..."):e}},chart:{...j.chart,height:W}};return(0,r.jsxs)(l.A,{sx:{...s,height:"fit-content"},...c,children:[(0,r.jsx)(f.A,{title:a,subheader:(0,r.jsxs)(v.default,{variant:"body2",color:"text.secondary",sx:{mt:.5},children:["Total Lead Count: ",(0,w.kB)(b)]}),action:(0,r.jsx)(ed.zS,{options:N,value:x,onChange:y}),sx:{mb:2}}),(0,r.jsx)(ed.NV,{colors:u.statusColors,labels:u.statuses,values:z.map(e=>(0,w.kB)(e)),sx:{px:3,gap:2,mb:2}}),(0,r.jsx)(i.A,{sx:{px:2,height:L?420:"auto",maxHeight:420,overflowY:L?"auto":"visible",overflowX:"hidden","&::-webkit-scrollbar":{width:"8px"},"&::-webkit-scrollbar-track":{backgroundColor:d.palette.grey[50],borderRadius:"4px",margin:"4px 0"},"&::-webkit-scrollbar-thumb":{backgroundColor:d.palette.grey[400],borderRadius:"4px",border:"1px solid ".concat(d.palette.grey[100]),"&:hover":{backgroundColor:d.palette.grey[500]},"&:active":{backgroundColor:d.palette.grey[600]}},"&::-webkit-scrollbar-corner":{backgroundColor:"transparent"},scrollbarWidth:"thin",scrollbarColor:"".concat(d.palette.grey[400]," ").concat(d.palette.grey[50]),scrollBehavior:"smooth"},children:(0,r.jsx)(ed.t1,{type:"bar",series:T,options:E,slotProps:{loading:{p:2.5}},sx:{height:W,width:"100%","& .apexcharts-canvas":{overflow:"visible !important"},"& > div":{height:"".concat(W,"px !important")},"& .apexcharts-inner":{overflow:"visible"},"& .apexcharts-yaxis":{position:"sticky",left:0,zIndex:1,backgroundColor:d.palette.background.paper}}},x)}),L&&(0,r.jsxs)(v.default,{variant:"caption",color:"text.secondary",sx:{px:2,pb:1,display:"block",textAlign:"center",fontSize:"0.75rem"},children:["Scroll to view all ",u.categories.length," sites"]})]})}var eh=a(70788);function ep(e){let{info:t,onEditSuccess:a}=e,[o,c]=(0,n.useState)(!1),[d,u]=(0,n.useState)(null),{id:h}=(0,s.useParams)();(0,n.useEffect)(()=>{(async()=>{try{let e=await (0,A.M6)(h,"win");u(e.lead_count)}catch(e){console.error("Error fetching ".concat("win"," lead count:"),e)}})()},[h,"win"]);let p=()=>{c(!1)};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(j.Ay,{container:!0,spacing:3,children:[(0,r.jsx)(j.Ay,{item:!0,xs:12,md:4,children:(0,r.jsxs)(C.A,{spacing:3,children:[(0,r.jsxs)(l.A,{children:[(0,r.jsx)(f.A,{title:"About",action:(0,r.jsx)(b.default,{"aria-label":"edit",onClick:()=>{c(!0)},children:(0,r.jsx)(k.W,{icon:"solar:pen-bold",width:20})}),sx:{"& .MuiCardHeader-action":{alignSelf:"center",margin:0}}}),(0,r.jsxs)(C.A,{spacing:2,sx:{p:3},children:[(0,r.jsxs)(i.A,{sx:{display:"flex",alignItems:"center"},children:[(0,r.jsx)(k.W,{width:24,icon:"mingcute:location-fill",sx:{mr:2}}),(0,r.jsxs)(v.default,{variant:"body2",children:["Lives in"," ",(0,r.jsx)(y.A,{component:"span",color:"inherit",sx:{fontWeight:600},children:(null==t?void 0:t.location)||"N/A"})]})]}),(0,r.jsxs)(i.A,{sx:{display:"flex",alignItems:"center"},children:[(0,r.jsx)(k.W,{width:24,icon:"solar:phone-bold",sx:{mr:2}}),(0,r.jsx)(v.default,{variant:"body2",children:(null==t?void 0:t.phone)||"N/A"})]}),(0,r.jsxs)(i.A,{sx:{display:"flex",alignItems:"center"},children:[(0,r.jsx)(k.W,{width:24,icon:"fluent:mail-24-filled",sx:{mr:2}}),(0,r.jsx)(v.default,{variant:"body2",children:(null==t?void 0:t.email)||"N/A"})]})]})]}),(0,r.jsxs)(C.A,{direction:"row",spacing:2,justifyContent:"space-between",children:[(0,r.jsx)(l.A,{sx:{flex:1,py:2,px:2,textAlign:"center"},children:(0,r.jsxs)(C.A,{spacing:.5,alignItems:"center",justifyContent:"center",marginTop:1,children:[(0,r.jsx)(v.default,{variant:"body2",color:"text.secondary",children:"Win Leads"}),(0,r.jsxs)(v.default,{variant:"h6",children:[" ",d," "]})]})}),(0,r.jsx)(l.A,{sx:{flex:1,py:2,px:2,textAlign:"center"},children:(0,r.jsxs)(C.A,{spacing:.5,alignItems:"center",children:[(0,r.jsx)(v.default,{variant:"body2",color:"text.secondary",children:"Negotiation Phase Lead"}),(0,r.jsx)(v.default,{variant:"h6",children:(0,w.kB)((null==t?void 0:t.negotiationLeads)||0)})]})})]}),(0,r.jsx)(eu,{contactId:h,title:"Site wise Leads"})]})}),(0,r.jsx)(j.Ay,{item:!0,xs:12,md:8,children:(0,r.jsx)(es,{contactId:h,contactType:null==t?void 0:t.role})})]}),(0,r.jsx)(eh.A,{currentContact:t,open:o,onClose:p,onCreate:e=>{a&&a(e),p()}})]})}var em=a(11654),ex=a(55398);let eg=e=>e&&"string"==typeof e?e.trim().split(" ").filter(e=>e.length>0).map(e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join(" "):"No Name",ef=e=>{if(!e||"string"!=typeof e)return"";let t=e.trim().split(" ").filter(e=>e.length>0);return 0===t.length?"":1===t.length?t[0].charAt(0).toUpperCase():(t[0].charAt(0)+t[t.length-1].charAt(0)).toUpperCase()};function eb(e){let{sx:t,name:a="",role:o="Contact",coverUrl:l,avatarUrl:s,contactData:c,onEditSuccess:d,details:u=[],socialLinks:h={},...p}=e,[m,g]=(0,n.useState)(!1),f=(0,n.useMemo)(()=>eg(a),[a]),b=(0,n.useMemo)(()=>ef(a),[a]);(0,n.useMemo)(()=>u.filter(e=>(null==e?void 0:e.text)&&"string"==typeof e.text&&""!==e.text.trim()),[u]);let y=(0,n.useMemo)(()=>{let e={facebook:"eva:facebook-fill",twitter:"eva:twitter-fill",instagram:"ant-design:instagram-filled"};return Object.entries(h||{}).filter(e=>{let[t,a]=e;return a&&"string"==typeof a&&""!==a.trim()}).map(t=>{let[a,r]=t;return{name:a,url:r,icon:e[a.toLowerCase()]||"eva:link-fill"}})},[h]),j=()=>{g(!1)};return(0,r.jsxs)(i.A,{sx:[e=>({...e.mixins.bgGradient({images:["linear-gradient(0deg, ".concat((0,em.IG)(e.vars.palette.primary.darkerChannel,.8),", ").concat((0,em.IG)(e.vars.palette.primary.darkerChannel,.8),")"),"url(".concat(l,")")]}),height:1,color:"common.white",position:"relative"}),...Array.isArray(t)?t:[t]],...p,children:[(0,r.jsx)(x.iK,{title:"Edit Contact",onClick:()=>{g(!0)},variant:"glass"}),(0,r.jsxs)(i.A,{sx:{display:"flex",left:{md:24},bottom:{md:24},zIndex:{md:10},pt:{xs:6,md:0},position:{md:"absolute"},flexDirection:{xs:"column",md:"row"}},children:[(0,r.jsx)(ex.A,{alt:f,src:s,sx:[e=>({mx:"auto",width:{xs:64,md:128},height:{xs:64,md:128},border:"solid 2px ".concat(e.vars.palette.common.white),fontSize:{xs:24,md:48},fontWeight:600})],children:b}),(0,r.jsxs)(i.A,{sx:{mt:3,ml:{md:3},textAlign:{xs:"center",md:"unset"}},children:[(0,r.jsx)(v.default,{variant:"h4",sx:{color:"common.white"},children:f}),(0,r.jsx)(v.default,{variant:"body2",sx:{mt:.5,color:"common.white",opacity:.72,fontWeight:500},children:o}),y.length>0&&(0,r.jsx)(C.A,{direction:"row",spacing:1,sx:{mt:2,justifyContent:{xs:"center",md:"flex-start"}},children:y.map(e=>(0,r.jsx)(i.A,{component:"a",href:e.url,target:"_blank",rel:"noopener noreferrer",sx:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:32,height:32,borderRadius:1,bgcolor:"rgba(255, 255, 255, 0.08)",color:"common.white",transition:"all 0.2s",textDecoration:"none","&:hover":{bgcolor:"rgba(255, 255, 255, 0.16)",transform:"scale(1.1)"}},children:(0,r.jsx)(k.W,{icon:e.icon,width:20})},e.name))})]})]}),(0,r.jsx)(eh.A,{currentContact:c,open:m,onClose:j,onCreate:e=>{d&&d(e),j()}})]})}var eC=a(4007),ev=a(66292);function ey(e){let{error:t,onRetry:a}=e;return(0,r.jsx)(h.KG,{children:(0,r.jsxs)(i.A,{sx:{maxWidth:500,width:"100%",mx:"auto",mt:8},children:[(0,r.jsxs)(S.default,{severity:"error",sx:{mb:2,"& .MuiAlert-message":{width:"100%"}},children:[(0,r.jsx)(eC.A,{children:"Error Loading Contact"}),(null==t?void 0:t.message)||"An unexpected error occurred while loading the contact."]}),(0,r.jsx)(i.A,{sx:{display:"flex",justifyContent:"center"},children:(0,r.jsx)(ev.default,{variant:"outlined",onClick:()=>{a?a():window.location.reload()},sx:{mt:1},children:"Try Again"})})]})})}var ej=a(68086);function ew(){let e=(0,n.useMemo)(()=>Array.from({length:5}).map((e,t)=>({key:t,width:"".concat(40*Math.random()+60,"%")})),[]);return(0,r.jsxs)(h.KG,{children:[(0,r.jsx)(ej.A,{variant:"text",width:300,height:25}),(0,r.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",mb:1,gap:2},children:[(0,r.jsx)(ej.A,{variant:"rectangular",width:100,height:36,sx:{borderRadius:1}}),(0,r.jsx)(ej.A,{variant:"circular",width:40,height:40}),(0,r.jsx)(ej.A,{variant:"circular",width:40,height:40})]}),(0,r.jsxs)(l.A,{sx:{mb:2,height:290,position:"relative",overflow:"hidden"},children:[(0,r.jsx)(ej.A,{variant:"rectangular",width:"100%",height:"100%"}),(0,r.jsx)(ej.A,{variant:"circular",width:128,height:128,sx:{position:"absolute",bottom:60,left:24,border:4,borderColor:"background.paper"}}),(0,r.jsxs)(i.A,{sx:{position:"absolute",bottom:80,left:170},children:[(0,r.jsx)(ej.A,{variant:"text",width:200,height:28,sx:{mb:1}}),(0,r.jsx)(ej.A,{variant:"text",width:150,height:20})]})]}),(0,r.jsx)(l.A,{sx:{p:3},children:(0,r.jsx)(i.A,{sx:{display:"flex",flexDirection:"column",gap:2},children:e.map(e=>{let{key:t,width:a}=e;return(0,r.jsx)(ej.A,{variant:"text",width:a,height:20},t)})})})]})}function eA(){let e=(0,d.g)(),t=(0,d.rd)(),a=(0,s.useSearchParams)(),{user:f}=(0,g.EB)(),[b,C]=(0,n.useState)(null),v=(null==e?void 0:e.id)||a.get("id"),y=v&&!isNaN(v)&&Number.isInteger(Number(v))&&Number(v)>0,{contactData:j,contactLoading:w,contactError:A}=(0,p.ot)(y?v:null),k=(0,n.useCallback)(e=>{console.log("Contact updated:",e),C(e)},[]);(0,n.useEffect)(()=>{!w&&j&&C(j)},[j,w]),(0,n.useEffect)(()=>{y||t.replace("/404")},[y,t]);let S=b?{...b,name:"".concat(b.ContactFName||""," ").concat(b.ContactLName||""),email:b.ContactEmail||"",phone:b.ContactNo||"",location:"".concat(b.ContactCity||"",", ").concat(b.ContactState||""),role:b.ContactType||"Contact",address:b.ContactAddress||"",postalCode:b.ContactPostalCode||"",socialLinks:{facebook:b.Facebook||"",twitter:b.Twitter||"",instagram:b.Instagram||""}}:{};return!y||w?(0,r.jsx)(ew,{}):A?(0,r.jsx)(ey,{error:A}):(0,r.jsxs)(h.KG,{children:[(0,r.jsx)(m.g,{links:[{name:"Dashboard",href:c.f.dashboard.root},{name:"Contact",href:c.f.dashboard.contact.root},{name:S.name||"Profile"}]}),(0,r.jsxs)(i.A,{sx:{display:"flex",alignItems:"center"},children:[(0,r.jsx)(x.dF,{href:c.f.dashboard.contact.new,label:"New",icon:"mingcute:add-line",title:"Create New Contact"}),(0,r.jsx)(x.PN,{title:"View Contact List",href:c.f.dashboard.contact.list,icon:"material-symbols:view-list"}),(0,r.jsx)(x.PN,{title:"View Contact Cards",href:c.f.dashboard.contact.root,icon:"material-symbols:view-module"})]}),(0,r.jsxs)(l.A,{sx:{mb:3,height:290},children:[(0,r.jsx)(eb,{role:S.role||"Contact",name:S.name,avatarUrl:null==f?void 0:f.photoURL,contactData:b,coverUrl:"".concat(u.P.assetsDir,"/assets/images/mock/cover/cover-4.webp"),onEditSuccess:k,socialLinks:S.socialLinks,details:[{icon:"mingcute:location-fill",text:S.location},{icon:"solar:phone-bold",text:S.phone},{icon:"fluent:mail-24-filled",text:S.email}]}),(0,r.jsx)(i.A,{sx:{width:1,bottom:0,zIndex:9,px:{md:3},display:"flex",position:"absolute",bgcolor:"background.paper",justifyContent:{xs:"center",md:"flex-end"},minHeight:50}})]}),(0,r.jsx)(ep,{info:S,onEditSuccess:k}),(0,r.jsx)(o.N9,{position:"top-right",autoClose:3e3})]})}},67762:(e,t,a)=>{"use strict";a.r(t),a.d(t,{ContactListView:()=>_});var r=a(95155),o=a(82940),n=a.n(o),i=a(12115),l=a(68074),s=a(96801),c=a(78822),d=a(53494),u=a(49742),h=a(72635),p=a(78129),m=a(35046),x=a(38867),g=a(83469),f=a(91580),b=a(84256),C=a(9670),v=a(26403),y=a(2360),j=a(6722),w=a(6270),A=a(57033),k=a(65068),S=a(44775),z=a(56156),T=a(11743),N=a(93972),I=a(26096),L=a(69004),W=a(20991);let E=["name","email","phone","contactType","totalleadcount","city","state","createdDate"],D=["name","email","phone","contactType","totalleadcount","city","state"],M=e=>"".concat(e,"_").concat(new Date().toISOString().split("T")[0]);function R(){return(0,r.jsxs)(w.b,{sx:{p:1.5,gap:1,borderBottom:1,borderColor:"divider",display:"flex",alignItems:"center",minHeight:56,"& .MuiButton-root":{fontSize:"0.875rem",fontWeight:500}},children:[(0,r.jsx)(A.j,{}),(0,r.jsx)(k.Q,{}),(0,r.jsx)(S.z,{}),(0,r.jsx)(z.qn,{csvOptions:{fileName:M("contacts_export"),delimiter:",",utf8WithBom:!0,includeHeaders:!0,fields:E},printOptions:{fileName:M("contacts_print"),hideFooter:!0,hideToolbar:!0,pageStyle:"@page { size: landscape; margin: 10mm; }",fields:D}})]})}function F(e){let{contacts:t=[],isLoading:a=!1,totalCount:o=0,paginationModel:n={page:0,pageSize:10},onPaginationModelChange:l}=e,c=(0,i.useMemo)(()=>[{field:"name",headerName:"Name",minWidth:180,flex:1.2,hideable:!1,groupable:!1,renderCell:e=>(0,r.jsx)(W.F2,{params:e,href:u.f.dashboard.contact.profile(e.row.id)})},{field:"phone",headerName:"Phone",minWidth:180,flex:.8,hideable:!1,groupable:!1,renderCell:e=>(0,r.jsx)(W.Sb,{params:e})},{field:"email",headerName:"Email",minWidth:200,flex:1.2,groupable:!1,renderCell:e=>(0,r.jsx)(W.Sb,{params:e})},{field:"contactType",headerName:"Type",minWidth:100,flex:.6,hideable:!1,renderCell:e=>(0,r.jsx)(f.default,{label:e.value,size:"small",color:"Broker"===e.value?"warning":"info",variant:"soft"})},{field:"totalleadcount",headerName:"Leads",minWidth:80,flex:.5,type:"number",align:"center",headerAlign:"center",groupable:!1,renderCell:e=>(0,r.jsx)(f.default,{label:e.value||0,size:"small",variant:"outlined"})},{field:"city",headerName:"City",minWidth:120,flex:.8,renderCell:e=>(0,r.jsx)(W.Sb,{params:e})},{field:"state",headerName:"State",minWidth:100,flex:.7,renderCell:e=>(0,r.jsx)(W.Sb,{params:e})},{field:"createdDate",headerName:"Created Date",minWidth:140,flex:.9,groupable:!1,renderCell:e=>(0,r.jsx)(W.V2,{params:e})}],[]),d=(0,i.useCallback)(e=>{l&&l(e)},[l]),h=Array.isArray(t)?t:[];if(!a&&0===h.length)return(0,r.jsx)(b.A,{sx:{py:10},children:(0,r.jsx)(L.H,{title:"No Contacts Found",description:"Try adjusting your search or filter to find what you're looking for.",sx:{py:10}})});let p=Math.ceil(o/n.pageSize),m=0===o?0:n.page*n.pageSize+1,x=Math.min((n.page+1)*n.pageSize,o);return(0,r.jsx)(b.A,{children:(0,r.jsxs)(s.A,{sx:{width:"100%"},children:[(0,r.jsx)(T._,{rows:h,columns:c,loading:a,rowCount:o,pageSizeOptions:[5,10,25,50,100],paginationModel:n,onPaginationModelChange:d,paginationMode:"server",checkboxSelection:!0,disableRowSelectionOnClick:!0,disableAggregation:!0,disablePivoting:!0,hideFooter:!0,slots:{toolbar:R},showToolbar:!0,initialState:{pinnedColumns:{left:[N.f.field,"name"]}},sx:{minHeight:400,border:"none",["& .".concat(I.x.cell)]:{alignItems:"center",display:"inline-flex"},["& .".concat(I.x.columnHeaderTitle)]:{fontWeight:600},["& .".concat(I.x.toolbarContainer)]:{backgroundColor:"background.paper",padding:2}}}),(0,r.jsxs)(s.A,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",px:2,py:1.5,borderTop:1,borderColor:"divider",backgroundColor:"background.paper"},children:[(0,r.jsxs)(s.A,{sx:{display:"flex",alignItems:"center",gap:2},children:[(0,r.jsx)(C.default,{variant:"body2",color:"text.secondary",children:"Rows per page:"}),(0,r.jsx)(v.A,{value:n.pageSize,onChange:e=>l&&l({...n,pageSize:Number(e.target.value),page:0}),size:"small",variant:"standard",sx:{"& .MuiSelect-select":{py:.5,pr:3,minWidth:40}},children:[5,10,25,50,100].map(e=>(0,r.jsx)(y.default,{value:e,children:e},e))})]}),(0,r.jsx)(C.default,{variant:"body2",color:"text.secondary",children:0===o?"0 results":"".concat(m,"-").concat(x," of ").concat(o)}),(0,r.jsx)(j.A,{count:p,page:n.page+1,onChange:(e,t)=>l&&l({...n,page:t-1}),size:"small",shape:"rounded",showFirstButton:!0,showLastButton:!0,disabled:a,sx:{"& .MuiPaginationItem-root":{minWidth:32,height:32}}})]})]})})}var B=a(72845);let P=e=>e?n()(e).format("DD MMM YYYY"):"-";function _(){let[e,t]=(0,i.useState)({page:0,pageSize:10}),[a,o]=(0,i.useState)(""),[n,f]=(0,i.useState)(""),[b,C]=(0,i.useState)([]),[v,y]=(0,i.useState)(0),j=e.page*e.pageSize+1,{contactsData:w,contactsLoading:A}=(0,p.XL)(j,e.pageSize,n,a),k=(0,i.useCallback)(e=>e&&Array.isArray(e)?e.map(e=>({id:e.ContactId,name:"".concat((null==e?void 0:e.ContactFName)||""," ").concat((null==e?void 0:e.ContactLName)||"").trim(),phone:e.ContactNo,email:e.ContactEmail,address:"".concat(e.ContactCity||""," ").concat(e.ContactState||"").trim(),city:e.ContactCity||"",state:e.ContactState||"",contactType:e.ContactType,totalleadcount:"Broker"===e.ContactType?e.broker_leadcount||0:e.customer_leadcount||0,createdDate:P(e.CreatedDate),brokerLicence:e.BrokerLicence||null,commisionRate:e.CommisionRate||0,yearsExperience:e.YearsExperience||0,specialization:e.Specialization||""})):[],[]);(0,i.useEffect)(()=>{(null==w?void 0:w.data)?(C(k(w.data)),y(w.total_records||0)):(C([]),y(0))},[w,k]);let S=(0,i.useCallback)(e=>{let{type:a,query:r}=e;t(e=>({...e,page:0})),o(a||""),f(r||"")},[]),z=(0,i.useCallback)(e=>{t(t=>e.pageSize!==t.pageSize?{...e,page:0}:e)},[]),{customerCount:T,brokerCount:N,allCount:I}=(0,i.useMemo)(()=>({customerCount:"Customer"===a?v:null,brokerCount:"Broker"===a?v:null,allCount:""===a?v:null}),[a,v]);return(0,r.jsxs)(m.KG,{sx:{maxWidth:"none !important",width:"100% !important",margin:0,"& .MuiContainer-root":{maxWidth:"none !important",width:"100% !important",padding:0}},children:[(0,r.jsx)(g.g,{links:[{name:"Home",href:u.f.dashboard.root},{name:"Contact"},{name:"List View"}],sx:{mb:{xs:1,xl:2}}}),(0,r.jsxs)(s.A,{sx:{display:"flex",alignItems:"center",mb:{xs:1,xl:2},width:"100%"},children:[(0,r.jsx)(l.default,{size:"small",color:"inherit",variant:"contained",component:h.W,href:u.f.dashboard.contact.new,startIcon:(0,r.jsx)(x.W,{icon:"mingcute:add-line"}),sx:{pr:1.5,mr:1.5},children:"New"}),(0,r.jsx)(c.default,{title:"View Cards",arrow:!0,children:(0,r.jsx)(d.default,{component:h.W,href:u.f.dashboard.contact.root,children:(0,r.jsx)(x.W,{icon:"material-symbols:view-module",sx:{width:30,height:30}})})})]}),(0,r.jsx)(s.A,{sx:{width:"100%"},children:(0,r.jsx)(B.p,{onFilterChange:S,isLoading:A,totalContacts:I,customerCount:T,brokerCount:N,activeType:a,searchQuery:n})}),(0,r.jsx)(s.A,{sx:{width:"100%"},children:(0,r.jsx)(F,{contacts:b,isLoading:A,totalCount:v,paginationModel:e,onPaginationModelChange:z})})]})}},70788:(e,t,a)=>{"use strict";a.d(t,{A:()=>N});var r=a(95155);a(85716);var o=a(55594),n=a(62177),i=a(90221),l=a(38543),s=a(12115),c=a(20041),d=a(68074),u=a(29716),h=a(62966),p=a(80158),m=a(12422),x=a(21030),g=a(96801),f=a(9670),b=a(2360),C=a(96358),v=a(66292),y=a(25114),j=a(54961);let w={CUSTOMER:"Customer",BROKER:"Broker"},A={"":"91",IN:"91",US:"1",GB:"44",CA:"1",AU:"61",SG:"65",AE:"971"},k=(e,t)=>o.z.string().min(e,{message:t}).optional().nullable().or(o.z.literal("")).transform(e=>e||null),S=(e,t,a)=>o.z.union([o.z.string().regex(/^\d*\.?\d*$/,"Must be a valid number"),o.z.number(),o.z.literal("")]).optional().nullable().transform(e=>{if(""===e||null==e)return null;let t="string"==typeof e?parseFloat(e):e;return isNaN(t)?null:t}).refine(a=>null===a||a>=e&&a<=t,{message:a}),z=o.z.object({firstName:o.z.string().min(1,"First name is required").max(50,"First name must be less than 50 characters").refine(e=>!/\d/.test(e),{message:"First name should not contain numbers"}).transform(e=>e.trim()),lastName:o.z.string().min(1,"Last name is required").max(50,"Last name must be less than 50 characters").refine(e=>!/\d/.test(e),{message:"Last name should not contain numbers"}).transform(e=>e.trim()),phoneNumber:j.yf.phoneNumber({isValid:c.g0}),email:o.z.string().email({message:"Invalid email address"}).toLowerCase().optional().nullable().or(o.z.literal("")).transform(e=>e||null),city:k(2,"City must be at least 2 characters"),state:k(2,"State must be at least 2 characters"),address:k(5,"Address must be at least 5 characters"),zipCode:o.z.string().regex(/^[A-Za-z0-9\- ]{3,10}$/,{message:"Invalid postal/ZIP code format"}).optional().nullable().or(o.z.literal("")).transform(e=>e||null),brokerLicence:o.z.string().optional().nullable().or(o.z.literal("")).transform(e=>e||null),commisionRate:S(0,100,"Commission rate must be between 0 and 100"),yearsExperience:S(0,100,"Years of experience must be between 0 and 100"),specialization:k(3,"Specialization must be at least 3 characters"),contactType:o.z.string().min(1,{message:"Role is required"}).refine(e=>Object.values(w).includes(e),{message:"Invalid contact type"}),instagram:o.z.string().optional().nullable().or(o.z.literal("")).transform(e=>e||null),facebook:o.z.string().optional().nullable().or(o.z.literal("")).transform(e=>e||null),twitter:o.z.string().optional().nullable().or(o.z.literal("")).transform(e=>e||null)}),T=e=>{if(!(null==e?void 0:e.ContactNo))return"";try{let t=e.ContactNo.toString(),a="91";return e.ContactCountryCode&&(a=/^\d+$/.test(e.ContactCountryCode)?e.ContactCountryCode:A[e.ContactCountryCode]||"91"),"+".concat(a).concat(t)}catch(e){return""}};function N(e){let{currentContact:t,open:a,onClose:o,onCreate:A}=e,k=(0,s.useMemo)(()=>{var e,a;return{firstName:(null==t?void 0:t.ContactFName)||"",lastName:(null==t?void 0:t.ContactLName)||"",phoneNumber:T(t),email:(null==t?void 0:t.ContactEmail)||"",city:(null==t?void 0:t.ContactCity)||"",state:(null==t?void 0:t.ContactState)||"",zipCode:(null==t?void 0:t.ContactPostalCode)||"",address:(null==t?void 0:t.ContactAddress)||"",brokerLicence:(null==t?void 0:t.BrokerLicence)||"",commisionRate:(null==t||null==(e=t.CommisionRate)?void 0:e.toString())||"",yearsExperience:(null==t||null==(a=t.YearsExperience)?void 0:a.toString())||"",specialization:(null==t?void 0:t.Specialization)||"",contactType:(null==t?void 0:t.ContactType)||w.CUSTOMER,instagram:(null==t?void 0:t.Instagram)||"",facebook:(null==t?void 0:t.Facebook)||"",twitter:(null==t?void 0:t.Twitter)||""}},[t]),S=(0,n.mN)({mode:"onChange",resolver:(0,i.u)(z),defaultValues:k}),{reset:N,handleSubmit:I,watch:L,setValue:W,formState:{isSubmitting:E}}=S;(0,s.useEffect)(()=>{a&&t&&N(k)},[a,t,k,N]);let D=L("contactType")===w.BROKER,M=(0,s.useCallback)(e=>{let t=e.target.value;W("contactType",t),t===w.CUSTOMER&&(W("brokerLicence",""),W("commisionRate",""),W("yearsExperience",""),W("specialization",""))},[W]),R=(0,s.useCallback)(async(e,t)=>{try{await (0,y.CI)(e,t),l.oR.success("Successfully updated ".concat(t.ContactType.toLowerCase()),{containerId:"success"})}catch(o){var a,r;let e=(null==o||null==(r=o.response)||null==(a=r.data)?void 0:a.message)||"Failed to update ".concat(t.ContactType.toLowerCase());throw l.oR.error(e,{containerId:"error"}),o}},[]),F=I(async e=>{try{var a,r,n,i,s,d,u,h,p,m;let x=(0,c.lq)(e.phoneNumber);if(!x)return void l.oR.error("Invalid phone number format",{containerId:"error"});let g={ContactFName:e.firstName.trim(),ContactLName:e.lastName.trim(),ContactNo:Number(x.nationalNumber),ContactEmail:(null==(a=e.email)?void 0:a.trim())||null,ContactCity:(null==(r=e.city)?void 0:r.trim())||null,ContactState:(null==(n=e.state)?void 0:n.trim())||null,ContactPostalCode:(null==(i=e.zipCode)?void 0:i.trim())||null,ContactAddress:(null==(s=e.address)?void 0:s.trim())||null,ContactType:e.contactType,ContactCountryCode:x.country,ContactId:null==t?void 0:t.ContactId,Instagram:(null==(d=e.instagram)?void 0:d.trim())||null,Facebook:(null==(u=e.facebook)?void 0:u.trim())||null,Twitter:(null==(h=e.twitter)?void 0:h.trim())||null,...e.contactType===w.BROKER&&{AccountId:(null==t?void 0:t.AccountId)||null,BrokerLicence:(null==(p=e.brokerLicence)?void 0:p.trim())||null,CommisionRate:"number"==typeof e.commisionRate?e.commisionRate:null,YearsExperience:"number"==typeof e.yearsExperience?e.yearsExperience:null,Specialization:(null==(m=e.specialization)?void 0:m.trim())||null}};if(null==t?void 0:t.ContactId){await R(t.ContactId,g);let a={...t,...g,name:"".concat(e.firstName," ").concat(e.lastName),phone:"+".concat(x.country).concat(x.nationalNumber),location:[e.city,e.state,x.country].filter(Boolean).join(", "),role:e.contactType};null==A||A(a)}N(),o()}catch(e){"UpdateContactError"!==e.name&&l.oR.error("An unexpected error occurred. Please try again.",{containerId:"error"})}},e=>{let t=Object.values(e)[0];(null==t?void 0:t.message)&&l.oR.error(t.message,{containerId:"error"})});return(0,r.jsxs)(u.A,{fullWidth:!0,maxWidth:"sm",open:a,onClose:o,children:[(0,r.jsx)(l.N9,{position:"top-right",autoClose:3e3}),(0,r.jsxs)(j.lV,{methods:S,onSubmit:F,children:[(0,r.jsx)(h.A,{sx:{display:"grid",placeItems:"center"},children:"Edit Contact"}),(0,r.jsx)(p.default,{}),(0,r.jsx)(m.A,{dividers:!0,children:(0,r.jsxs)(x.A,{spacing:3,sx:{mt:2},children:[(0,r.jsxs)(g.A,{children:[(0,r.jsx)(f.default,{variant:"subtitle2",sx:{mb:2},children:"Contact Type"}),(0,r.jsxs)(j.D0.Select,{name:"contactType",label:"Role",onChange:M,children:[(0,r.jsx)(b.default,{value:w.CUSTOMER,children:"Customer"}),(0,r.jsx)(b.default,{value:w.BROKER,children:"Broker"})]})]}),(0,r.jsxs)(g.A,{children:[(0,r.jsx)(f.default,{variant:"subtitle2",sx:{mb:2},children:"Basic Information"}),(0,r.jsxs)(g.A,{sx:{gap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)"}},children:[(0,r.jsx)(j.D0.Text2,{name:"firstName",label:"First Name",placeholder:"Enter first name"}),(0,r.jsx)(j.D0.Text2,{name:"lastName",label:"Last Name",placeholder:"Enter last name"}),(0,r.jsx)(j.D0.Phone,{name:"phoneNumber",label:"Phone Number",placeholder:"+91 XXXXX-XXXXX",country:(null==t?void 0:t.ContactCountryCode)||"IN"}),(0,r.jsx)(j.D0.Text2,{name:"email",label:"Email Address",placeholder:"abc@gmail.com"})]})]}),(0,r.jsxs)(g.A,{children:[(0,r.jsx)(f.default,{variant:"subtitle2",sx:{mb:2},children:"Address Details"}),(0,r.jsxs)(x.A,{spacing:2,children:[(0,r.jsxs)(g.A,{sx:{gap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(3, 1fr)"}},children:[(0,r.jsx)(j.D0.Text2,{name:"city",label:"City/Town",placeholder:"Enter city"}),(0,r.jsx)(j.D0.Text2,{name:"state",label:"State",placeholder:"Enter state"}),(0,r.jsx)(j.D0.Text2,{name:"zipCode",label:"Zip Code",placeholder:"Ex-391242"})]}),(0,r.jsx)(j.D0.Text2,{name:"address",label:"Full Address",placeholder:"Ex- Flat/House Number, Floor Number, Street Name and Number, Building Name or Number, Area/Locality, Landmark etc.",multiline:!0,rows:3,fullWidth:!0})]})]}),D&&(0,r.jsxs)(g.A,{children:[(0,r.jsx)(f.default,{variant:"subtitle2",sx:{mb:2},children:"Broker Details"}),(0,r.jsxs)(g.A,{sx:{gap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)"}},children:[(0,r.jsx)(j.D0.Text2,{name:"brokerLicence",label:"Broker License",placeholder:"License Number"}),(0,r.jsx)(j.D0.Text2,{name:"commisionRate",label:"Commission Rate (%)",placeholder:"Ex-5%",type:"number"}),(0,r.jsx)(j.D0.Text2,{name:"yearsExperience",label:"Years of Experience",placeholder:"Ex- 0,1,2 years",type:"number"}),(0,r.jsx)(j.D0.Text2,{name:"specialization",label:"Specialization",placeholder:"Ex-Area of expertise (Residential etc.)"})]})]}),(0,r.jsxs)(g.A,{children:[(0,r.jsx)(f.default,{variant:"subtitle2",sx:{mb:2},children:"Social Media"}),(0,r.jsxs)(g.A,{sx:{gap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(3, 1fr)"}},children:[(0,r.jsx)(j.D0.Text2,{name:"instagram",label:"Instagram",placeholder:"@yourhandle"}),(0,r.jsx)(j.D0.Text2,{name:"facebook",label:"Facebook",placeholder:"facebook.com/yourprofile"}),(0,r.jsx)(j.D0.Text2,{name:"twitter",label:"Twitter",placeholder:"@yourhandle"})]})]})]})}),(0,r.jsxs)(C.default,{children:[(0,r.jsx)(v.default,{color:"inherit",variant:"outlined",onClick:()=>{N(),o()},children:"Cancel"}),(0,r.jsx)(d.default,{type:"submit",variant:"contained",loading:E,disabled:E,children:"Save"})]})]})]})}},71690:(e,t,a)=>{"use strict";a.d(t,{t:()=>m});var r=a(95155),o=a(67598),n=a(5624),i=a(43312),l=a(11654),s=a(35881);let c={hCenter:{left:0,right:0,margin:"auto"},vCenter:{top:0,bottom:0,margin:"auto"}},d=(e,t,a)=>({[e]:t?"auto":a,["left"===e?"right":"left"]:t?a:"auto"}),u=(e,t,a)=>{let r=e.vars.palette["cyan"===t?"info":"error"].mainChannel;return{backgroundRepeat:"no-repeat",backgroundSize:"".concat(3*a,"px ").concat(3*a,"px"),backgroundColor:e.vars.palette.background.paper,backgroundPosition:"cyan"===t?"top right":"bottom left",backgroundImage:"linear-gradient(45deg, ".concat((0,l.IG)(r,.1),", ").concat((0,l.IG)(r,.1),")")}},h={top:{top:0,rotate:"135deg",translate:"0 -50%"},bottom:{bottom:0,rotate:"-45deg",translate:"0 50%"},left:{rotate:"45deg",translate:"-50% 0"},right:{rotate:"-135deg",translate:"50% 0"}},p=(0,s.default)("span",{shouldForwardProp:e=>!["size","placement","offset","sx"].includes(e)})(e=>{let{offset:t=0,size:a=0,theme:r}=e,o="rtl"===r.direction,n=u(r,"cyan",a),i=u(r,"red",a);return{width:a,height:a,position:"absolute",backdropFilter:"6px",borderBottomLeftRadius:a/4,clipPath:"polygon(0% 0%, 100% 100%, 0% 100%)",backgroundColor:r.vars.palette.background.paper,border:"solid 1px ".concat((0,l.IG)(r.vars.palette.grey["500Channel"],.12)),...r.applyStyles("dark",{border:"solid 1px ".concat((0,l.IG)(r.vars.palette.common.blackChannel,.12))}),variants:[{props:e=>{let{placement:t}=e;return null==t?void 0:t.startsWith("top-")},style:{...h.top}},{props:{placement:"top-left"},style:{...d("left",o,t)}},{props:{placement:"top-center"},style:{...c.hCenter}},{props:{placement:"top-right"},style:{...d("right",o,t),...n}},{props:e=>{let{placement:t}=e;return null==t?void 0:t.startsWith("bottom-")},style:{...h.bottom}},{props:{placement:"bottom-left"},style:{...d("left",o,t),...i}},{props:{placement:"bottom-center"},style:{...c.hCenter}},{props:{placement:"bottom-right"},style:{...d("right",o,t)}},{props:e=>{let{placement:t}=e;return null==t?void 0:t.startsWith("left-")},style:{...d("left",o,0),...h.left}},{props:{placement:"left-top"},style:{top:t}},{props:{placement:"left-center"},style:{...c.vCenter,...i}},{props:{placement:"left-bottom"},style:{...i,bottom:t}},{props:e=>{let{placement:t}=e;return null==t?void 0:t.startsWith("right-")},style:{...d("right",o,0),...h.right}},{props:{placement:"right-top"},style:{...n,top:t}},{props:{placement:"right-center"},style:{...c.vCenter,...n}},{props:{placement:"right-bottom"},style:{bottom:t}}]}});function m(e){var t,a,l,s;let{open:c,onClose:d,children:u,anchorEl:h,slotProps:m,...x}=e,{arrow:g,paper:f,...b}=null!=m?m:{},C=null!=(t=null==g?void 0:g.size)?t:14,v=null!=(a=null==g?void 0:g.offset)?a:17,y=null!=(l=null==g?void 0:g.placement)?l:"top-right",{paperStyles:j,anchorOrigin:w,transformOrigin:A}=function(e){let t;switch(e){case"top-left":t={paperStyles:{ml:-.75},anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"}};break;case"top-center":t={paperStyles:void 0,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}};break;case"top-right":default:t={paperStyles:{ml:.75},anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}};break;case"bottom-left":t={paperStyles:{ml:-.75},anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"left"}};break;case"bottom-center":t={paperStyles:void 0,anchorOrigin:{vertical:"top",horizontal:"center"},transformOrigin:{vertical:"bottom",horizontal:"center"}};break;case"bottom-right":t={paperStyles:{ml:.75},anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"bottom",horizontal:"right"}};break;case"left-top":t={paperStyles:{mt:-.75},anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"left"}};break;case"left-center":t={paperStyles:void 0,anchorOrigin:{vertical:"center",horizontal:"right"},transformOrigin:{vertical:"center",horizontal:"left"}};break;case"left-bottom":t={paperStyles:{mt:.75},anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"bottom",horizontal:"left"}};break;case"right-top":t={paperStyles:{mt:-.75},anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"}};break;case"right-center":t={paperStyles:void 0,anchorOrigin:{vertical:"center",horizontal:"left"},transformOrigin:{vertical:"center",horizontal:"right"}};break;case"right-bottom":t={paperStyles:{mt:.75},anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"right"}}}return t}(y);return(0,r.jsxs)(o.Ay,{open:!!c,anchorEl:h,onClose:d,anchorOrigin:w,transformOrigin:A,slotProps:{...b,paper:{...f,sx:[j,{overflow:"inherit",["& .".concat(n.A.root)]:{minWidth:140},["& .".concat(i.A.root)]:{gap:2}},...Array.isArray(null==f?void 0:f.sx)?null!=(s=null==f?void 0:f.sx)?s:[]:[null==f?void 0:f.sx]]}},...x,children:[!(null==g?void 0:g.hide)&&(0,r.jsx)(p,{size:C,offset:v,placement:y,sx:null==g?void 0:g.sx}),u]})}},72845:(e,t,a)=>{"use strict";a.d(t,{p:()=>p});var r=a(95155),o=a(38637),n=a.n(o),i=a(12115),l=a(84762),s=a(7433),c=a(96801),d=a(44192),u=a(89438),h=a(5932);let p=(0,i.memo)(function(e){let{onFilterChange:t,isLoading:a=!1,totalContacts:o=0,customerCount:n=0,brokerCount:p=0,activeType:m=null,searchQuery:x=""}=e,[g,f]=(0,i.useState)(m||"all");(0,i.useEffect)(()=>{g!==(m||"all")&&f(m||"all")},[m,g]);let b=(0,i.useCallback)((e,a)=>{f(a),"all"===a?t({type:null,query:x}):t({type:a,query:x})},[t,x]),C=(0,i.useCallback)(e=>{t({type:"all"!==g?g:null,query:e})},[t,g]);return(0,r.jsxs)(l.default,{elevation:0,sx:{mb:3,position:"relative"},children:[a&&(0,r.jsx)(s.A,{sx:{position:"absolute",top:0,left:0,right:0,zIndex:1,height:2}}),(0,r.jsxs)(c.A,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},alignItems:{xs:"stretch",sm:"center"},borderBottom:{xs:1,sm:0},borderColor:"divider",px:2,py:{xs:0,sm:1},gap:{xs:0,sm:2}},children:[(0,r.jsxs)(d.A,{value:g,onChange:b,sx:{minHeight:{xs:48,sm:40},"& .MuiTab-root":{minHeight:{xs:48,sm:40},py:{xs:1.5,sm:1}}},children:[(0,r.jsx)(u.default,{label:null!==o?"All (".concat(o,")"):"All",value:"all"}),(0,r.jsx)(u.default,{label:null!==n?"Customer (".concat(n,")"):"Customer",value:"Customer"}),(0,r.jsx)(u.default,{label:null!==p?"Broker (".concat(p,")"):"Broker",value:"Broker"})]}),(0,r.jsx)(c.A,{sx:{flex:1,maxWidth:{xs:"100%",sm:400},ml:{xs:0,sm:"auto"},py:{xs:2,sm:0}},children:(0,r.jsx)(h.G,{onSearchChange:C,isLoading:a,value:x,placeholder:"Search contact by name or phone...",debounceTime:500})})]})]})});p.propTypes={onFilterChange:n().func.isRequired,isLoading:n().bool,totalContacts:n().number,customerCount:n().number,brokerCount:n().number,activeType:n().string,searchQuery:n().string}},78129:(e,t,a)=>{"use strict";a.d(t,{XL:()=>l,ig:()=>d,ot:()=>s,vY:()=>c});var r=a(19169),o=a(12115),n=a(18835);let i={revalidateIfStale:!1,revalidateOnFocus:!1,revalidateOnReconnect:!1};function l(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=n.vZ.contact.readAll(e,t,a,l),{data:c,isLoading:d,error:u,isValidating:h,mutate:p}=(0,r.Ay)(s,n.GO,{...i,keepPreviousData:!0});return(0,o.useMemo)(()=>({contactsData:null!=c?c:[],contactsLoading:d,contactsError:u?(null==u?void 0:u.message)||"Error fetching data":null,contactsValidating:h,contactsEmpty:!d&&!h&&(!Array.isArray(c)||0===c.length),refetchContact:()=>p()}),[c,u,d,h,p])}function s(e){let t=e?n.vZ.contact.readSingle(e):null,{data:a,isLoading:l,error:s,isValidating:c,mutate:d}=(0,r.Ay)(t,n.GO,i);return(0,o.useMemo)(()=>({contactData:null!=a?a:[],contactLoading:l,contactError:s?(null==s?void 0:s.message)||"Error fetching data":null,contactValidating:c,contactEmpty:!l&&!c&&(!Array.isArray(a)||0===a.length),refetchContact:()=>d()}),[a,s,l,c,d])}let c=async e=>{let t=n.vZ.contact.create;return(await (0,n.D5)([t,e])).data};function d(e,t){let a=e?n.vZ.contact.search(e,t):null,{data:l,isLoading:s,error:c,isValidating:d,mutate:u}=(0,r.Ay)(a,n.ev,i);return(0,o.useMemo)(()=>({searchResults:null!=l?l:[],searchLoading:s,searchError:c?(null==c?void 0:c.message)||"Error searching contacts":null,searchValidating:d,searchEmpty:!s&&!d&&(!Array.isArray(l)||0===l.length),refetchContactSearch:()=>u()}),[l,c,s,d,u])}},89227:(e,t,a)=>{"use strict";a.r(t),a.d(t,{ContactCardView:()=>ez});var r=a(95155);a(85716);var o=a(82940),n=a.n(o),i=a(38543),l=a(12115),s=a(68074),c=a(96801),d=a(78822),u=a(53494),h=a(49742),p=a(72635),m=a(84354),x=a(78129),g=a(35046),f=a(38867),b=a(83469),C=a(38637),v=a.n(C),y=a(9670),j=a(77498),w=a(26403),A=a(2360),k=a(62516),S=a(6722),z=a(11654),T=a(84256),N=a(17764),I=a(55398),L=a(34152),W=a(80158),E=a(80918),D=a(27740),M=a(35510),R=a(42758);let F={width:20,height:"auto",flexShrink:0},B=(0,l.forwardRef)((e,t)=>{let{sx:a,...o}=e;return(0,r.jsx)(R.default,{ref:t,sx:[()=>({...F,color:"#0A66C2"}),...Array.isArray(a)?a:[a]],...o,children:(0,r.jsx)("path",{fill:"var(--color, currentColor)",d:"M5.14678 2.52608C5.85835 2.65326 6.45746 3.09997 6.77593 3.74217C6.88945 3.97025 6.95882 4.20149 6.99245 4.46426C7.01558 4.64609 7.00822 4.94775 6.97669 5.12433C6.82323 5.99567 6.18418 6.68832 5.33071 6.9122C5.1699 6.95424 5.03326 6.97316 4.84722 6.98157C3.96327 7.01731 3.14449 6.52856 2.75034 5.72869C2.44342 5.10646 2.44342 4.37597 2.74928 3.75268C3.08983 3.06003 3.73729 2.60281 4.51613 2.50822C4.64962 2.4914 5.00909 2.50191 5.14678 2.52608ZM17.2025 8.64541C17.768 8.70007 18.324 8.84932 18.7844 9.0711C19.1407 9.24242 19.5464 9.50414 19.9154 9.80264C20.3274 10.1358 20.6175 10.5436 20.9549 11.2626C21.2281 11.8449 21.3784 12.341 21.4562 12.9128C21.473 13.0347 21.4741 13.3626 21.4772 17.2715L21.4804 21.5H19.5622H17.644V17.9442C17.644 15.5436 17.6408 14.3538 17.6335 14.2791C17.5452 13.3899 17.1374 12.753 16.4437 12.4188C16.2797 12.3399 16.1704 12.3 15.998 12.2558C15.3159 12.0803 14.5097 12.1791 13.9095 12.5102C13.3514 12.8182 12.931 13.4499 12.7733 14.2161C12.7113 14.5188 12.7145 14.3096 12.7145 18.0598V21.5H10.8015H8.88858V15.1778V8.85563H10.6912H12.4938V9.76585V10.675L12.5715 10.571C12.7344 10.3513 13.0351 10.037 13.2579 9.85204C14.1187 9.13626 15.2244 8.69271 16.2944 8.6349C16.4952 8.62439 17.0491 8.6307 17.2025 8.64541ZM6.72338 15.1778V21.5H4.76313H2.80289V15.1778V8.85563H4.76313H6.72338V15.1778Z"})})}),P=(0,l.forwardRef)((e,t)=>{let{sx:a,...o}=e;return(0,r.jsx)(R.default,{ref:t,sx:[()=>({...F,color:"#1877F2"}),...Array.isArray(a)?a:[a]],...o,children:(0,r.jsx)("path",{fill:"var(--color, currentColor)",d:"M14 13.5H16.5L17.5 9.5H14V7.5C14 6.47062 14 5.5 16 5.5H17.5V2.1401C17.1743 2.09685 15.943 2 14.6429 2C11.9284 2 10 3.65686 10 6.69971V9.5H7V13.5H10V22H14V13.5Z"})})}),_=(0,l.forwardRef)((e,t)=>{let{sx:a,...o}=e;return(0,r.jsx)(R.default,{ref:t,sx:[()=>({...F,color:"text.primary"}),...Array.isArray(a)?a:[a]],...o,children:(0,r.jsx)("path",{fill:"var(--color, currentColor)",d:"M17.7242 3H20.779L14.1069 10.624L21.956 21H15.8117L10.9959 14.7087L5.49201 21H2.43288L9.56798 12.8438L2.04346 3H8.34346L12.692 8.75048L17.7242 3ZM16.6511 19.174H18.343L7.42182 4.73077H5.60451L16.6511 19.174Z"})})}),O=(0,l.forwardRef)((e,t)=>{let{sx:a,...o}=e,n=(0,l.useId)();return(0,r.jsxs)(R.default,{ref:t,sx:[()=>({...F}),...Array.isArray(a)?a:[a]],...o,children:[(0,r.jsx)("path",{d:"M22.437 7.67096C22.3859 6.55328 22.2084 5.78997 21.9488 5.12223C21.6852 4.42158 21.2719 3.78688 20.7377 3.26241C20.2132 2.72817 19.5785 2.31476 18.8779 2.05101C18.2099 1.79158 17.4468 1.61423 16.3292 1.56345C15.2094 1.51218 14.8516 1.5 12.0001 1.5C9.14852 1.5 8.79073 1.51218 7.67096 1.56316C6.55328 1.61423 5.79018 1.79175 5.12223 2.05129C4.42156 2.31493 3.78685 2.72826 3.26237 3.26245C2.72813 3.78686 2.31472 4.4215 2.05097 5.12211C1.79154 5.79005 1.61419 6.55332 1.56341 7.67084C1.51218 8.79073 1.5 9.14835 1.5 11.9999C1.5 14.8516 1.51218 15.2094 1.56345 16.3291C1.61439 17.4467 1.79191 18.2099 2.05146 18.8779C2.31509 19.5785 2.7284 20.2132 3.26257 20.7376C3.78701 21.2718 4.4217 21.6851 5.12236 21.9487C5.79018 22.2084 6.55344 22.3857 7.67112 22.4368C8.79106 22.4879 9.14864 22.5 12.0002 22.5C14.8518 22.5 15.2096 22.4879 16.3293 22.4368C17.447 22.3857 18.2101 22.2084 18.8781 21.9487C19.5756 21.6789 20.209 21.2665 20.7378 20.7377C21.2666 20.2089 21.6791 19.5754 21.9488 18.8779C22.2085 18.2099 22.3859 17.4467 22.437 16.3292C22.4879 15.2092 22.5001 14.8516 22.5001 12.0001C22.5001 9.14835 22.4879 8.79073 22.437 7.67096ZM20.5469 16.2432C20.5003 17.2669 20.3292 17.8229 20.1855 18.1928C20.0108 18.6457 19.7432 19.057 19.4 19.4002C19.0568 19.7434 18.6455 20.011 18.1927 20.1856C17.8227 20.3294 17.2668 20.5005 16.243 20.5471C15.1361 20.5977 14.8039 20.6083 12.0001 20.6083C9.19614 20.6083 8.86415 20.5977 7.75701 20.5471C6.73342 20.5005 6.17749 20.3294 5.80736 20.1856C5.35132 20.0173 4.93879 19.7488 4.6001 19.4001C4.25133 19.0614 3.98291 18.6489 3.81457 18.1928C3.67085 17.8229 3.49973 17.2669 3.45309 16.2432C3.40264 15.1361 3.3919 14.8039 3.3919 12.0003C3.3919 9.19642 3.40264 8.86448 3.45309 7.75717C3.49985 6.73342 3.67085 6.17745 3.81457 5.80753C3.98296 5.35144 4.25138 4.93887 4.6001 4.6001C4.93879 4.25132 5.35139 3.98295 5.80753 3.81473C6.17749 3.67085 6.73342 3.49989 7.75722 3.45309C8.86432 3.40264 9.19646 3.3919 12.0001 3.3919C14.8038 3.3919 15.1357 3.40264 16.243 3.45326C17.2668 3.49989 17.8226 3.67101 18.1927 3.81473C18.6487 3.98311 19.0612 4.25147 19.3999 4.6001C19.7487 4.93879 20.0171 5.35139 20.1854 5.80753C20.3292 6.17749 20.5004 6.73342 20.5469 7.75722C20.5974 8.86432 20.6081 9.19646 20.6081 12.0001C20.6081 14.8039 20.5976 15.1358 20.5469 16.2432Z",fill:"url(#".concat(n,"-1)")}),(0,r.jsx)("path",{d:"M11.9999 6.60812C9.02211 6.60812 6.60808 9.02223 6.60808 12.0001C6.60808 14.9779 9.02211 17.3919 11.9999 17.3919C14.9779 17.3919 17.3919 14.9779 17.3919 12.0001C17.3919 9.02223 14.9779 6.60812 11.9999 6.60812ZM11.9999 15.5C10.067 15.4999 8.49993 13.9329 8.5001 11.9999C8.5001 10.067 10.067 8.49993 12.0001 8.49993C13.9331 8.5001 15.5 10.067 15.5 11.9999C15.5 13.9329 13.9329 15.5 11.9999 15.5Z",fill:"url(#".concat(n,"-2)")}),(0,r.jsx)("path",{d:"M18.8649 6.39516C18.8649 7.091 18.3008 7.65509 17.605 7.65509C16.909 7.65509 16.3449 7.09095 16.3449 6.39516C16.3449 5.69912 16.909 5.13503 17.605 5.13503C18.3008 5.13503 18.8649 5.69916 18.8649 6.39516Z",fill:"url(#".concat(n,"-3)")}),(0,r.jsxs)("defs",{children:[(0,r.jsxs)("linearGradient",{id:"".concat(n,"-1"),x1:"3.26229",y1:"20.7377",x2:"20.7378",y2:"3.26212",gradientUnits:"userSpaceOnUse",children:[(0,r.jsx)("stop",{stopColor:"var(--color, #FFD600)"}),(0,r.jsx)("stop",{offset:"0.5",stopColor:"var(--color, #FF0100)"}),(0,r.jsx)("stop",{offset:"1",stopColor:"var(--color, #D800B9)"})]}),(0,r.jsxs)("linearGradient",{id:"".concat(n,"-2"),x1:"4.57544",y1:"19.4246",x2:"19.4247",y2:"4.57532",gradientUnits:"userSpaceOnUse",children:[(0,r.jsx)("stop",{stopColor:"var(--color, #FF6400)"}),(0,r.jsx)("stop",{offset:"0.5",stopColor:"var(--color, #FF0100)"}),(0,r.jsx)("stop",{offset:"1",stopColor:"var(--color, #FD0056)"})]}),(0,r.jsxs)("linearGradient",{id:"".concat(n,"-3"),x1:"16.7139",y1:"7.28603",x2:"18.4957",y2:"5.50413",gradientUnits:"userSpaceOnUse",children:[(0,r.jsx)("stop",{stopColor:"var(--color, #F30072)"}),(0,r.jsx)("stop",{offset:"1",stopColor:"var(--color, #E50097)"})]})]})]})});var H=a(96807),V=a(60521),G=a(56548),Z=a(49247),U=a(39337),X=a(85396),Y=a(79608),q=a(20033),K=a(29716),Q=a(21030),$=a(15930),J=a(44192),ee=a(89438),et=a(12422),ea=a(7433),er=a(37070),eo=a(18835);class en{async initialize(){if(this.isInitialized)return void console.log("[Twilio] Already initialized");try{console.log("[Twilio] Initializing Voice Device...");let e=await this.fetchToken();this.device=new er.pF(e,{codecPreferences:["opus","pcmu"],fakeLocalDTMF:!0,enableRingingState:!0,logLevel:1}),this.setupDeviceEventHandlers(),await this.device.register(),this.isInitialized=!0,console.log("[Twilio] Device initialized and registered successfully")}catch(e){throw console.error("[Twilio] Failed to initialize:",e),this.isInitialized=!1,e}}async fetchToken(){try{let e=await fetch("".concat("https://azure-devops-deployer-342043280851.us-central1.run.app/").concat(eo.vZ.calls.getToken),{method:"POST",headers:{Authorization:"Bearer ".concat(this.getAuthToken()),"Content-Type":"application/json"}});if(!e.ok)throw Error("Failed to fetch token: ".concat(e.statusText));let t=await e.json();return this.token=t.token,console.log("[Twilio] Access token fetched successfully"),t.token}catch(e){throw console.error("[Twilio] Token fetch failed:",e),Error("Unable to fetch Twilio access token. Please check backend connectivity.")}}getAuthToken(){return localStorage.getItem("accessToken")||sessionStorage.getItem("accessToken")||""}setupDeviceEventHandlers(){this.device&&(this.device.on("registered",()=>{console.log("[Twilio] Device registered and ready"),this.onDeviceReady&&this.onDeviceReady()}),this.device.on("error",e=>{console.error("[Twilio] Device error:",e),this.onCallError&&this.onCallError(e)}),this.device.on("incoming",e=>{console.log("[Twilio] Incoming call from:",e.parameters.From),this.onIncomingCall&&this.onIncomingCall(e)}),this.device.on("tokenWillExpire",()=>{console.log("[Twilio] Token will expire soon, refreshing..."),this.refreshToken()}),this.device.on("unregistered",()=>{console.log("[Twilio] Device unregistered")}))}async makeCall(e){if(!this.device)throw Error("Twilio Device not initialized. Call initialize() first.");if(!this.isInitialized)throw Error("Twilio Device not ready. Wait for initialization.");let t=this.formatPhoneNumber(e);console.log("[Twilio] Making call to: ".concat(t));try{return this.activeCall=await this.device.connect({params:{To:t}}),this.setupCallEventHandlers(this.activeCall),this.activeCall}catch(e){throw console.error("[Twilio] Failed to make call:",e),e}}setupCallEventHandlers(e){e.on("ringing",()=>{console.log("[Twilio] Call is ringing"),this.onCallRinging&&this.onCallRinging()}),e.on("accept",()=>{console.log("[Twilio] Call connected"),this.onCallConnected&&this.onCallConnected()}),e.on("disconnect",()=>{console.log("[Twilio] Call disconnected"),this.activeCall=null,this.onCallEnded&&this.onCallEnded()}),e.on("error",e=>{console.error("[Twilio] Call error:",e),this.onCallError&&this.onCallError(e)}),e.on("mute",e=>{console.log("[Twilio] Call ".concat(e?"muted":"unmuted"))}),e.on("reconnecting",e=>{console.warn("[Twilio] Call reconnecting...",e)}),e.on("reconnected",()=>{console.log("[Twilio] Call reconnected")})}acceptIncomingCall(e){console.log("[Twilio] Accepting incoming call"),e.accept(),this.activeCall=e,this.setupCallEventHandlers(e)}rejectIncomingCall(e){console.log("[Twilio] Rejecting incoming call"),e.reject()}hangup(){this.activeCall?(console.log("[Twilio] Hanging up call"),this.activeCall.disconnect(),this.activeCall=null):console.warn("[Twilio] No active call to hang up")}mute(){this.activeCall&&(console.log("[Twilio] Muting call"),this.activeCall.mute(!0))}unmute(){this.activeCall&&(console.log("[Twilio] Unmuting call"),this.activeCall.mute(!1))}isMuted(){return!!this.activeCall&&this.activeCall.isMuted()}sendDigits(e){this.activeCall&&(console.log("[Twilio] Sending digits: ".concat(e)),this.activeCall.sendDigits(e))}getCallStatus(){return this.activeCall?this.activeCall.status():null}formatPhoneNumber(e){let t=e.replace(/\D/g,"");return(t.startsWith("91")||10!==t.length||(t="91".concat(t)),e.startsWith("+"))?e:"+".concat(t)}async refreshToken(){try{let e=await this.fetchToken();this.device&&(this.device.updateToken(e),console.log("[Twilio] Token refreshed successfully"))}catch(e){console.error("[Twilio] Failed to refresh token:",e),this.onCallError&&this.onCallError(Error("Failed to refresh authentication token"))}}destroy(){console.log("[Twilio] Destroying device..."),this.activeCall&&(this.activeCall.disconnect(),this.activeCall=null),this.device&&(this.device.destroy(),this.device=null),this.isInitialized=!1,this.token="",this.onIncomingCall=null,this.onCallEnded=null,this.onCallError=null,this.onDeviceReady=null,this.onCallConnected=null,this.onCallRinging=null,console.log("[Twilio] Device destroyed")}isReady(){return this.isInitialized&&null!==this.device}hasActiveCall(){return null!==this.activeCall}constructor(){this.device=null,this.activeCall=null,this.token="",this.isInitialized=!1,this.onIncomingCall=null,this.onCallEnded=null,this.onCallError=null,this.onDeviceReady=null,this.onCallConnected=null,this.onCallRinging=null}}let ei=new en,el={1:{chat:[{id:"msg-1",content:"Hi, I'm interested in the 3BHK apartment at Sunrise Heights.",sender_type:"contact",created_at:"2025-01-03T10:30:00Z",status:"delivered"},{id:"msg-2",content:"Hello! Yes, it's available. Would you like to schedule a visit this weekend?",sender_type:"user",created_at:"2025-01-03T10:32:00Z",status:"read"},{id:"msg-3",content:"Saturday 2 PM works for me. What is the address?",sender_type:"contact",created_at:"2025-01-03T10:35:00Z",status:"delivered"},{id:"msg-4",content:"Perfect! The address is 123 Main Street, Block A. See you then!",sender_type:"user",created_at:"2025-01-03T10:37:00Z",status:"read"}],sms:[{id:"sms-1",content:"Reminder: Your property visit is tomorrow at 2 PM. Looking forward to meeting you!",sender_type:"user",created_at:"2025-01-04T18:00:00Z",status:"delivered"},{id:"sms-2",content:"Thanks for the reminder! See you tomorrow.",sender_type:"contact",created_at:"2025-01-04T18:05:00Z",status:"delivered"}],whatsapp:[{id:"wa-1",content:"Hi! Thanks for showing me the apartment. I loved it! \uD83C\uDFE0",sender_type:"contact",created_at:"2025-01-05T15:30:00Z",status:"read"},{id:"wa-2",content:"That's great to hear! Would you like to proceed with the booking?",sender_type:"user",created_at:"2025-01-05T15:35:00Z",status:"read"},{id:"wa-3",content:"Yes, please send me the documents.",sender_type:"contact",created_at:"2025-01-05T15:40:00Z",status:"delivered"}]},2:{chat:[{id:"msg-5",content:"Do you have any 2BHK apartments available?",sender_type:"contact",created_at:"2025-01-02T14:20:00Z",status:"delivered"},{id:"msg-6",content:"Yes, we have several options. What is your preferred location?",sender_type:"user",created_at:"2025-01-02T14:25:00Z",status:"read"}],sms:[],whatsapp:[]}},es={chat:[],sms:[],whatsapp:[]},ec=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"chat";await new Promise(e=>{setTimeout(e,500)});let a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"chat";return(el[e]||es)[t]||[]}(e,t);return{conversation:{id:"conv-".concat(e,"-").concat(t),contact_id:e,channel_type:t,last_message_at:a.length>0?a[a.length-1].created_at:new Date().toISOString(),created_at:new Date().toISOString()},messages:a}},ed=async function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"chat";await new Promise(e=>{setTimeout(e,300)});let r=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"chat",r={id:"msg-".concat(Date.now()),content:t,sender_type:"user",created_at:new Date().toISOString(),status:"sent"};return el[e]||(el[e]={...es}),el[e][a]||(el[e][a]=[]),el[e][a].push(r),r}(e,t,a);return console.log("[MOCK] Message sent to contact ".concat(e," via ").concat(a,":"),t),r},eu=async(e,t)=>{try{let a=await (0,eo.D5)([eo.vZ.calls.initiate,{contact_id:e,phone_number:t}]);return console.log("[API] Call initiated to ".concat(t)),a.data}catch(a){return console.error("[API] Failed to initiate call:",a),console.warn("[MOCK] Using mock call data as fallback"),{call_id:"call-".concat(Date.now()),contact_id:e,phone_number:t,status:"initiated",created_at:new Date().toISOString()}}};var eh=a(56626),ep=a(78894),em=a(66292);function ex(e){let{onClose:t}=e;return(0,r.jsx)(c.A,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:(0,ep.X4)("#000000",.3),backdropFilter:"blur(2px)",WebkitBackdropFilter:"blur(2px)"},onClick:e=>{e.target===e.currentTarget&&t()},children:(0,r.jsxs)(c.A,{sx:{backgroundColor:"background.paper",borderRadius:2,p:4,textAlign:"center",maxWidth:400,width:"90%",boxShadow:e=>e.shadows[24],position:"relative",animation:"fadeInScale 0.3s ease-in-out","@keyframes fadeInScale":{"0%":{opacity:0,transform:"scale(0.9)"},"100%":{opacity:1,transform:"scale(1)"}}},children:[(0,r.jsx)(c.A,{sx:{width:80,height:80,borderRadius:"50%",backgroundColor:e=>(0,ep.X4)(e.palette.primary.main,.08),display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto",mb:3},children:(0,r.jsx)(f.W,{icon:"carbon:development",width:40,sx:{color:"primary.main"}})}),(0,r.jsx)(y.default,{variant:"h5",sx:{mb:1.5,fontWeight:600},children:"Feature Coming Soon"}),(0,r.jsx)(y.default,{variant:"body1",sx:{color:"text.secondary",mb:3,lineHeight:1.6},children:"Chat and calling features are being perfected to provide you with the best communication experience."}),(0,r.jsx)(em.default,{variant:"contained",size:"large",onClick:t,sx:{minWidth:120,boxShadow:e=>e.shadows[8],"&:hover":{boxShadow:e=>e.shadows[12]}},children:"Got it"})]})})}var eg=a(84762),ef=a(32104);function eb(e){var t,a;let{message:o,contact:n,currentUserId:i}=e,l="user"===o.sender_type;return o.content?(0,r.jsxs)(c.A,{sx:{mb:5,display:"flex",justifyContent:l?"flex-end":"unset"},children:[!l&&(0,r.jsx)(I.A,{alt:(null==n?void 0:n.name)||"Contact",sx:{width:32,height:32,mr:2,bgcolor:"primary.main"},children:(null==n||null==(a=n.name)||null==(t=a.charAt(0))?void 0:t.toUpperCase())||"C"}),(0,r.jsxs)(Q.A,{alignItems:l?"flex-end":"flex-start",children:[(0,r.jsxs)(y.default,{noWrap:!0,variant:"caption",sx:{mb:1,color:"text.disabled",...!l&&{mr:"auto"}},children:[!l&&"".concat((null==n?void 0:n.name)||"Contact",", "),(0,ef.kH)(o.created_at)]}),(0,r.jsxs)(c.A,{sx:{display:"flex",alignItems:"center",position:"relative","&:hover":{"& .message-actions":{opacity:1}}},children:[(0,r.jsxs)(Q.A,{direction:"row",alignItems:"center",spacing:.5,children:[(0,r.jsx)(eg.default,{sx:{p:1.5,minWidth:48,maxWidth:320,borderRadius:1.5,typography:"body2",wordBreak:"break-word",bgcolor:"background.neutral",...l&&{color:"grey.800",bgcolor:"primary.lighter"}},elevation:+!l,children:o.content}),l&&(0,r.jsx)(c.A,{sx:{display:"flex",alignItems:"flex-end",pb:.5},children:l?(0,r.jsx)(f.W,{icon:"read"===o.status?"solar:check-read-bold":"delivered"===o.status?"solar:check-circle-bold":"solar:check-circle-linear",width:14,sx:{opacity:.7}}):null})]}),(0,r.jsxs)(c.A,{className:"message-actions",sx:e=>({pt:.5,left:0,opacity:0,top:"100%",display:"flex",position:"absolute",transition:e.transitions.create(["opacity"],{duration:e.transitions.duration.shorter}),...l&&{right:0,left:"unset"}}),children:[(0,r.jsx)(u.default,{size:"small",children:(0,r.jsx)(f.W,{icon:"solar:reply-bold",width:16})}),(0,r.jsx)(u.default,{size:"small",children:(0,r.jsx)(f.W,{icon:"eva:smiling-face-fill",width:16})}),(0,r.jsx)(u.default,{size:"small",children:(0,r.jsx)(f.W,{icon:"solar:trash-bin-trash-bold",width:16})})]})]})]})]}):null}var eC=a(91095);function ev(e){let{onSendMessage:t,disabled:a,channel:o,loading:n}=e,[i,s]=(0,l.useState)(""),d=(0,l.useCallback)(e=>{s(e.target.value)},[]),h=(0,l.useCallback)(()=>{i.trim()&&!n&&(t(i.trim()),s(""))},[i,n,t]),p=(0,l.useCallback)(e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),h())},[h]);return(0,r.jsx)(eC.default,{name:"chat-message",id:"chat-message-input",value:i,onKeyDown:p,onChange:d,placeholder:"Type a ".concat(o," message..."),disabled:a||n,multiline:!0,maxRows:3,startAdornment:(0,r.jsx)(u.default,{size:"small",disabled:a||n,children:(0,r.jsx)(f.W,{icon:"eva:smiling-face-fill"})}),endAdornment:(0,r.jsxs)(c.A,{sx:{flexShrink:0,display:"flex",gap:.5},children:[(0,r.jsx)(u.default,{size:"small",disabled:a||n,children:(0,r.jsx)(f.W,{icon:"solar:gallery-add-bold"})}),(0,r.jsx)(u.default,{size:"small",disabled:a||n,children:(0,r.jsx)(f.W,{icon:"eva:attach-2-fill"})}),(0,r.jsx)(u.default,{size:"small",onClick:h,disabled:!i.trim()||a||n,sx:{color:"primary.main","&:hover":{bgcolor:"primary.lighter"}},children:(0,r.jsx)(f.W,{icon:"solar:plain-3-bold"})})]}),sx:[e=>({px:2,py:1.5,minHeight:56,flexShrink:0,borderTop:"solid 1px ".concat(e.palette.divider),alignItems:"flex-end","& .MuiInputBase-input":{py:1}})]})}function ey(e){var t,a;let{contact:o,open:n,onClose:s,autoCall:d=!1}=e,[h,p]=(0,l.useState)([]),[m,x]=(0,l.useState)("chat"),[g,b]=(0,l.useState)("idle"),[C,v]=(0,l.useState)(!1),[j,w]=(0,l.useState)(!1),[A,k]=(0,l.useState)(0),[S,z]=(0,l.useState)(!1),T=(0,l.useRef)(null),N=(0,l.useRef)(null),L=(0,l.useCallback)(()=>{T.current&&setTimeout(()=>{T.current&&(T.current.scrollTop=T.current.scrollHeight)},100)},[]);(0,l.useEffect)(()=>()=>{N.current&&clearInterval(N.current)},[n]),(0,l.useEffect)(()=>{n&&o&&W()},[n,null==o?void 0:o.id,m]),(0,l.useEffect)(()=>{},[n,d,S]),(0,l.useEffect)(()=>{L()},[h,L]),(0,l.useEffect)(()=>("connected"===g?N.current=setInterval(()=>{k(e=>e+1)},1e3):(N.current&&clearInterval(N.current),k(0)),()=>{N.current&&clearInterval(N.current)}),[g]);let W=async()=>{w(!0);try{let e=await ec(o.id,m);p(e.messages||[])}catch(e){console.error("Failed to load messages:",e),p([])}finally{w(!1)}},E=async e=>{if(null==e?void 0:e.trim())try{let t=await ed(o.id,e,m);p(e=>[...e,t]),L()}catch(e){console.error("Failed to send message:",e)}},D=async()=>{if(!(null==o?void 0:o.phone))return void i.oR.error("No phone number available");if(!S)return void i.oR.error("Voice service not ready. Please wait...");try{b("calling"),await eu(o.id,o.phone),await ei.makeCall(o.phone),console.log("Call initiated to:",o.phone)}catch(e){console.error("Failed to make call:",e),b("idle"),i.oR.error("Failed to initiate call")}},M=(0,l.useCallback)((e,t)=>{x(t)},[]),R=e=>{let t=Math.floor(e/60);return"".concat(t.toString().padStart(2,"0"),":").concat((e%60).toString().padStart(2,"0"))},F=["calling","ringing","connected"].includes(g);return(0,r.jsxs)(K.A,{open:n,onClose:s,maxWidth:"md",fullWidth:!0,PaperProps:{sx:{height:{xs:"100vh",sm:"80vh"},maxHeight:{xs:"100vh",sm:"80vh"},display:"flex",flexDirection:"column",m:{xs:0,sm:2}}},children:[(0,r.jsxs)(c.A,{sx:{p:2.5,borderBottom:1,borderColor:"divider",bgcolor:"background.paper"},children:[(0,r.jsxs)(Q.A,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{mb:2},children:[(0,r.jsxs)(Q.A,{direction:"row",spacing:2,alignItems:"center",children:[(0,r.jsx)($.default,{variant:"dot",color:"success",anchorOrigin:{vertical:"bottom",horizontal:"right"},overlap:"circular",children:(0,r.jsx)(I.A,{sx:{width:48,height:48,bgcolor:"primary.main"},children:(null==(a=o.name)||null==(t=a.charAt(0))?void 0:t.toUpperCase())||"C"})}),(0,r.jsxs)(c.A,{children:[(0,r.jsx)(y.default,{variant:"subtitle1",sx:{fontWeight:600},children:o.name}),(0,r.jsx)(y.default,{variant:"caption",color:"text.secondary",children:o.phone})]})]}),(0,r.jsxs)(Q.A,{direction:"row",spacing:.5,children:[F?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(u.default,{onClick:()=>{C?(ei.unmute(),v(!1)):(ei.mute(),v(!0))},color:C?"error":"default",disabled:"connected"!==g,sx:{"&:hover":{bgcolor:C?"error.lighter":"action.hover"}},children:C?(0,r.jsx)(G.A,{}):(0,r.jsx)(Z.A,{})}),(0,r.jsx)(u.default,{onClick:()=>{ei.hangup(),b("idle"),v(!1)},color:"error",sx:{"&:hover":{bgcolor:"error.lighter"}},children:(0,r.jsx)(U.A,{})})]}):(0,r.jsx)(u.default,{onClick:D,disabled:!0,sx:{"&:hover":{bgcolor:"primary.lighter",color:"primary.main"}},children:(0,r.jsx)(X.A,{})}),(0,r.jsx)(u.default,{onClick:s,sx:{"&:hover":{bgcolor:"action.hover"}},children:(0,r.jsx)(Y.A,{})})]})]}),F&&(0,r.jsxs)(c.A,{sx:{p:1,mb:2,bgcolor:"connected"===g?"success.lighter":"ringing"===g?"warning.lighter":"info.lighter",borderRadius:1,display:"flex",alignItems:"center",justifyContent:"center",gap:1},children:[(0,r.jsx)(c.A,{sx:{width:8,height:8,borderRadius:"50%",bgcolor:"connected"===g?"success.main":"ringing"===g?"warning.main":"info.main",animation:"pulse 1.5s ease-in-out infinite","@keyframes pulse":{"0%, 100%":{opacity:1},"50%":{opacity:.5}}}}),(0,r.jsxs)(y.default,{variant:"body2",color:"connected"===g?"success.dark":"ringing"===g?"warning.dark":"info.dark",children:[(()=>{switch(g){case"initializing":return"Initializing...";case"calling":return"Calling...";case"ringing":return"Ringing...";case"connected":return"Connected - ".concat(R(A));default:return""}})()," ",C&&"(Muted)"]})]}),(0,r.jsxs)(J.A,{value:m,onChange:M,variant:"fullWidth",sx:{minHeight:40,"& .MuiTab-root":{minHeight:40,fontSize:"0.875rem"}},children:[(0,r.jsx)(ee.default,{value:"chat",label:"Chat",icon:(0,r.jsx)(f.W,{icon:"solar:chat-round-dots-bold",width:20}),iconPosition:"start"}),(0,r.jsx)(ee.default,{value:"sms",label:"SMS",icon:(0,r.jsx)(q.A,{fontSize:"small"}),iconPosition:"start"}),(0,r.jsx)(ee.default,{value:"whatsapp",label:"WhatsApp",icon:(0,r.jsx)(f.W,{icon:"ic:baseline-whatsapp",width:20}),iconPosition:"start"})]})]}),(0,r.jsxs)(et.A,{sx:{flex:1,p:0,overflow:"hidden",position:"relative"},children:[j?(0,r.jsx)(ea.A,{color:"inherit",sx:{top:0,left:0,width:1,height:2,borderRadius:0,position:"absolute"}}):null,(0,r.jsx)(eh.Z,{ref:T,sx:{px:3,pt:5,pb:3,height:1,bgcolor:"background.neutral"},children:0===h.length?(0,r.jsxs)(c.A,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",minHeight:300,color:"text.disabled"},children:[(0,r.jsx)(f.W,{icon:"solar:chat-round-line-broken",width:80,sx:{mb:2,opacity:.3}}),(0,r.jsx)(y.default,{variant:"body2",children:"No messages yet. Start a conversation!"})]}):h.map(e=>(0,r.jsx)(eb,{message:e,contact:o},e.id))})]}),(0,r.jsx)(ev,{onSendMessage:E,disabled:!1,channel:m,loading:j}),(0,r.jsx)(ex,{onClose:s})]})}var ej=a(70788);function ew(e){let{user:t,sx:a,...o}=e,[n,i]=(0,l.useState)(!1),[s,x]=(0,l.useState)(!1),[g,b]=(0,l.useState)(!1),[C,v]=(0,l.useState)(t),j=h.f.dashboard.contact.profile(null==C?void 0:C.id);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(T.A,{sx:[{textAlign:"center"},...Array.isArray(a)?a:[a]],...o,children:[(0,r.jsx)(N.A,{component:p.W,href:j.toString(),sx:{cursor:"pointer",color:"white",position:"absolute",zIndex:10,top:10,right:16,"&:hover":{color:"#1976D2"}},children:"View More"}),(0,r.jsx)(d.default,{title:"Edit contact",children:(0,r.jsx)(u.default,{onClick:()=>{i(!0)},sx:{cursor:"pointer",position:"absolute",zIndex:10,top:5,left:16,color:"white"},children:(0,r.jsx)(f.W,{icon:"solar:pen-bold",width:20})})}),(0,r.jsxs)(c.A,{sx:{position:"relative"},children:[(0,r.jsx)(M.b$,{sx:{left:0,right:0,zIndex:10,mx:"auto",bottom:-26,position:"absolute"}}),(0,r.jsx)(I.A,{alt:null==C?void 0:C.name,sx:{left:0,right:0,width:64,height:64,zIndex:11,mx:"auto",bottom:-32,position:"absolute",textTransform:"uppercase"},children:C.name.charAt(0).toUpperCase()}),(0,r.jsx)(H._,{src:C.coverUrl,alt:C.coverUrl,ratio:"16/6",slotProps:{overlay:{sx:e=>({bgcolor:(0,z.IG)(e.vars.palette.common.blackChannel,.48)})}}})]}),(0,r.jsx)(L.A,{sx:{mt:4.5,mb:0},primary:null==C?void 0:C.name.split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join(" "),secondary:null==C?void 0:C.role,primaryTypographyProps:{typography:"subtitle1"},secondaryTypographyProps:{component:"span",mt:0}}),(0,r.jsxs)(c.A,{sx:{display:"flex",alignItems:"center",justifyContent:"center",px:1},children:[(0,r.jsx)(u.default,{onClick:()=>{x(!0),b(!0)},children:(0,r.jsx)(d.default,{title:"Call contact",arrow:!0,children:(0,r.jsx)(f.W,{icon:"solar:phone-bold"})})},"call"),(0,r.jsx)(u.default,{onClick:()=>{x(!0),b(!1)},children:(0,r.jsx)(d.default,{title:"Chat with contact",arrow:!0,children:(0,r.jsx)(V.Q,{src:"".concat(D.P.assetsDir,"/assets/icons/navbar/ic-chat.svg")})})},"chat"),m.tP.map(e=>(0,r.jsxs)(u.default,{children:["twitter"===e.value&&(0,r.jsx)(_,{}),"facebook"===e.value&&(0,r.jsx)(P,{}),"instagram"===e.value&&(0,r.jsx)(O,{}),"linkedin"===e.value&&(0,r.jsx)(B,{})]},e.label))]}),(0,r.jsx)(W.default,{sx:{borderStyle:"dashed"}}),(0,r.jsxs)(c.A,{sx:{p:1,display:"flex",flexDirection:"column",textAlign:"left"},children:[(0,r.jsx)(E.A,{children:(0,r.jsxs)(c.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,r.jsx)(y.default,{variant:"caption",minWidth:80,children:"Contact No."}),(0,r.jsx)(y.default,{variant:"caption",children:":"}),(0,r.jsx)(y.default,{variant:"caption",children:null==C?void 0:C.phone})]})}),(0,r.jsxs)(c.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,r.jsx)(y.default,{variant:"caption",minWidth:80,children:"E-mail"}),(0,r.jsx)(y.default,{variant:"caption",children:":"}),(0,r.jsx)(y.default,{variant:"caption",children:null==C?void 0:C.email})]}),(0,r.jsxs)(c.A,{children:[(0,r.jsxs)(c.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,r.jsx)(y.default,{variant:"caption",minWidth:80,children:"Total Lead"}),(0,r.jsx)(y.default,{variant:"caption",children:":"}),(0,r.jsx)(y.default,{variant:"caption",children:null==C?void 0:C.leadcount})]}),(0,r.jsx)(y.default,{variant:"caption",sx:{paddingLeft:1,marginTop:-.5,display:"block"},children:"count"})]}),(0,r.jsxs)(c.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,r.jsx)(y.default,{variant:"caption",minWidth:80,children:"Contact Since"}),(0,r.jsx)(y.default,{variant:"caption",children:":"}),(0,r.jsx)(y.default,{variant:"caption",children:C.createdDate})]})]})]}),(0,r.jsx)(ej.A,{currentContact:(()=>{let e="";(null==C?void 0:C.phone)&&(e=String(C.phone).replace(/\D/g,""));let t="+".concat("91").concat(e),a=(null==C?void 0:C.name)?C.name.split(" "):["",""],r=a[0]||"",o=a.slice(1).join(" ")||"";return{ContactId:null==C?void 0:C.id,ContactFName:r,ContactLName:o,ContactNo:e,ContactCountryCode:"91",ContactEmail:(null==C?void 0:C.email)||"",ContactCity:(null==C?void 0:C.city)||"",ContactState:(null==C?void 0:C.state)||"",ContactPostalCode:(null==C?void 0:C.zipCode)||"",ContactAddress:(null==C?void 0:C.address)||"",ContactType:(null==C?void 0:C.role)||"Customer",BrokerLicence:(null==C?void 0:C.brokerLicence)||"",CommisionRate:(null==C?void 0:C.commisionRate)||0,YearsExperience:(null==C?void 0:C.yearsExperience)||0,Specialization:(null==C?void 0:C.specialization)||"",AccountId:(null==C?void 0:C.AccountId)||null,phoneNumber:t,firstName:r,lastName:o,email:(null==C?void 0:C.email)||"",city:(null==C?void 0:C.city)||"",state:(null==C?void 0:C.state)||"",zipCode:(null==C?void 0:C.zipCode)||"",address:(null==C?void 0:C.address)||"",contactType:(null==C?void 0:C.role)||"Customer"}})(),open:n,onClose:()=>{i(!1)},onCreate:e=>{let t=e.ContactNo;v({...C,id:e.ContactId,name:"".concat(e.ContactFName||""," ").concat(e.ContactLName||"").trim(),role:e.ContactType,email:e.ContactEmail||"",phone:t,city:e.ContactCity||"",state:e.ContactState||"",zipCode:e.ContactPostalCode||"",address:e.ContactAddress||"",brokerLicence:e.BrokerLicence||"",commisionRate:e.CommisionRate||0,yearsExperience:e.YearsExperience||0,specialization:e.Specialization||"",avatarUrl:C.avatarUrl,coverUrl:C.coverUrl,leadcount:C.leadcount,createdDate:C.createdDate}),i(!1)}}),(0,r.jsx)(ey,{contact:{id:C.id,name:C.name,phone:C.phone,email:C.email},open:s,onClose:()=>{x(!1),b(!1)},autoCall:g})]})}function eA(e){let{users:t,isLoading:a=!1,onPageChange:o=null,pageSize:n=12,totalItems:i=0,currentPage:s=1,showPagination:d=!0}=e,[u,h]=(0,l.useState)(s),[p,m]=(0,l.useState)(n);(0,l.useEffect)(()=>{h(s)},[s]),(0,l.useEffect)(()=>{m(n)},[n]);let x=(0,l.useMemo)(()=>i||(null==t?void 0:t.length)||0,[i,t]),g=(0,l.useMemo)(()=>Math.max(1,Math.ceil(x/p)),[x,p]),f=(0,l.useMemo)(()=>t&&Array.isArray(t)?t:[],[t]),b=(0,l.useMemo)(()=>{if(0===x)return"0-0 of 0";let e=(u-1)*p+1,t=Math.min(e+f.length-1,x);return"".concat(e,"-").concat(t," of ").concat(x)},[u,p,x,f.length]),C=(0,l.useMemo)(()=>!!d&&!(g<=1)&&(!a||!!t&&0!==t.length),[d,g,a,t]),v=(0,l.useMemo)(()=>x>0||t&&t.length>0,[x,t]),z=(0,l.useCallback)((e,t)=>{h(t),o&&o(t,p),window.scrollTo({top:0,behavior:"smooth"})},[o,p]),T=(0,l.useCallback)(e=>{let t=parseInt(e.target.value,10);m(t),h(1),o&&o(1,t)},[o]);return(0,r.jsxs)(r.Fragment,{children:[v&&(0,r.jsxs)(c.A,{sx:{mb:3,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,r.jsxs)(y.default,{variant:"body2",color:"text.secondary",children:["Showing ",b]}),(0,r.jsx)(j.A,{size:"small",sx:{minWidth:120},children:(0,r.jsxs)(w.A,{value:p,onChange:T,displayEmpty:!0,disabled:a,inputProps:{"aria-label":"Records per page"},children:[(0,r.jsx)(A.default,{value:6,children:"6 per page"}),(0,r.jsx)(A.default,{value:12,children:"12 per page"}),(0,r.jsx)(A.default,{value:24,children:"24 per page"}),(0,r.jsx)(A.default,{value:48,children:"48 per page"})]})})]}),a&&0===f.length?(0,r.jsx)(c.A,{sx:{display:"flex",justifyContent:"center",py:5},children:(0,r.jsx)(k.default,{})}):(0,r.jsxs)(c.A,{sx:{gap:3,display:"grid",gridTemplateColumns:{xs:"repeat(auto-fill, minmax(280px, 1fr))",sm:"repeat(auto-fill, minmax(320px, 1fr))",md:"repeat(auto-fill, minmax(300px, 1fr))",lg:"repeat(auto-fill, minmax(280px, 1fr))",xl:"repeat(auto-fill, minmax(270px, 1fr))","2xl":"repeat(auto-fill, minmax(260px, 1fr))"},minHeight:"400px",position:"relative"},children:[a&&(0,r.jsx)(c.A,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(255, 255, 255, 0.7)",zIndex:1},children:(0,r.jsx)(k.default,{})}),f.length>0?f.map(e=>(0,r.jsx)(ew,{user:e},e.id)):(0,r.jsx)(c.A,{sx:{gridColumn:"1/-1",display:"flex",justifyContent:"center",alignItems:"center",py:5},children:(0,r.jsx)(y.default,{variant:"body1",color:"text.secondary",children:"No contacts found"})})]}),C&&(0,r.jsx)(c.A,{sx:{mt:{xs:5,md:8},display:"flex",justifyContent:"center"},children:(0,r.jsx)(S.A,{page:u,count:g,shape:"circular",onChange:z,disabled:a,showFirstButton:!0,showLastButton:!0,siblingCount:1,boundaryCount:1,"aria-label":"Contact pagination",sx:{mx:"auto"}})})]})}eA.propTypes={users:v().array,isLoading:v().bool,onPageChange:v().func,pageSize:v().number,totalItems:v().number,currentPage:v().number,showPagination:v().bool};var ek=a(72845);let eS=e=>e?n()(e).format("DD MMM YYYY"):"-";function ez(){let[e,t]=(0,l.useState)(1),[a,o]=(0,l.useState)(12),[n,C]=(0,l.useState)(""),[v,y]=(0,l.useState)(""),[j,w]=(0,l.useState)([]),[A,k]=(0,l.useState)(0),S=(e-1)*a+1,{contactsData:z,contactsLoading:T}=(0,x.XL)(S,a,v,n),N=(0,l.useCallback)(e=>e&&Array.isArray(e)?e.map((e,t)=>{let a="".concat((null==e?void 0:e.ContactFName)||""," ").concat((null==e?void 0:e.ContactLName)||"").trim();return{id:e.ContactId,role:e.ContactType,name:a,coverUrl:m.EV.image.cover(1),totalFollowers:m.EV.number.nativeL(t),totalPosts:m.EV.number.nativeL(t+2),totalFollowing:m.EV.number.nativeL(t+1),phone:e.ContactNo,email:e.ContactEmail,city:e.ContactCity,state:e.ContactState,zipCode:e.ContactPostalCode,address:e.ContactAddress,createdDate:eS(e.CreatedDate),leadcount:"Broker"===e.ContactType?e.broker_leadcount:e.customer_leadcount,brokerLicence:e.BrokerLicence||null,commisionRate:e.CommisionRate||0,yearsExperience:e.YearsExperience||0,specialization:e.Specialization||""}}):[],[]);(0,l.useEffect)(()=>{(null==z?void 0:z.data)?(w(N(z.data)),k(z.total_records||0)):(w([]),k(0))},[z,N]);let I=(0,l.useCallback)(e=>{let{type:a,query:r}=e;t(1),C(a||""),y(r||"")},[]),L=(0,l.useCallback)((e,r)=>{r&&r!==a?(o(r),t(1)):t(e)},[a]),W="Customer"===n?A:null,E="Broker"===n?A:null,D=""===n?A:null;return(0,r.jsxs)(g.KG,{sx:{maxWidth:"none !important",width:"100% !important",margin:0,"& .MuiContainer-root":{maxWidth:"none !important",width:"100% !important",padding:0}},children:[(0,r.jsx)(b.g,{links:[{name:"Home",href:h.f.dashboard.root},{name:"Contact"},{name:"Cards View"}],sx:{mb:{xs:1,xl:2}}}),(0,r.jsxs)(c.A,{sx:{display:"flex",alignItems:"center",mb:{xs:1,xl:2},width:"100%"},children:[(0,r.jsx)(s.default,{size:"small",color:"inherit",variant:"contained",component:p.W,href:h.f.dashboard.contact.new,startIcon:(0,r.jsx)(f.W,{icon:"mingcute:add-line"}),sx:{pr:1.5,mr:1.5},children:"New"}),(0,r.jsx)(d.default,{title:"View List",arrow:!0,children:(0,r.jsx)(u.default,{component:p.W,href:h.f.dashboard.contact.list,children:(0,r.jsx)(f.W,{icon:"material-symbols:view-list",sx:{width:30,height:30}})})})]}),(0,r.jsx)(c.A,{sx:{mb:1,width:"100%"},children:(0,r.jsx)(ek.p,{onFilterChange:I,isLoading:T,totalContacts:D,customerCount:W,brokerCount:E,activeType:n,searchQuery:v})}),(0,r.jsx)(c.A,{sx:{width:"100%"},children:(0,r.jsx)(eA,{users:j,isLoading:T,onPageChange:L,pageSize:a,totalItems:A,currentPage:e,sx:{width:"100%","& .contact-cards-grid":{gap:{xs:2,sm:2.5,md:3,lg:3,xl:3},gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)",md:"repeat(3, 1fr)",lg:"repeat(4, 1fr)",xl:"repeat(5, 1fr)","2xl":"repeat(6, 1fr)","@media (min-width: 1800px)":{gridTemplateColumns:"repeat(7, 1fr)"},"@media (min-width: 2200px)":{gridTemplateColumns:"repeat(8, 1fr)"}}}}})}),(0,r.jsx)(i.N9,{position:"top-right",autoClose:3e3})]})}}}]);