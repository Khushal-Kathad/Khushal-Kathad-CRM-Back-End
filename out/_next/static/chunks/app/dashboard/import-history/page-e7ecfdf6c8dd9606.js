(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7890],{10179:(e,t,i)=>{"use strict";i.d(t,{ImportHistoryList:()=>ee});var l=i(95155),r=i(35695),s=i(12115),a=i(66292),n=i(21030),o=i(84256),d=i(96801),c=i(9670),u=i(95946),x=i(73816),h=i(77498),f=i(78880),m=i(26403),p=i(2360),g=i(91580),j=i(40001),v=i(62516),y=i(49742),b=i(35046),A=i(19169),w=i(18835);let S={revalidateIfStale:!1,revalidateOnFocus:!1,revalidateOnReconnect:!1};var C=i(38867),I=i(83469),R=i(78822),P=i(7433),W=i(15876),D=i(25949),E=i(72137),k=i(60032),T=i(72330),z=i(57236),N=i(76681),M=i(32104),F=i(38637),L=i.n(F);let O={queued:{label:"Queued",color:"default",variant:"outlined"},processing:{label:"Processing",color:"info",variant:"filled",animated:!0},validating:{label:"Validating",color:"warning",variant:"filled"},importing:{label:"Importing",color:"info",variant:"filled",animated:!0},completed:{label:"Completed",color:"success",variant:"filled"},failed:{label:"Failed",color:"error",variant:"filled"},partial:{label:"Partial",color:"warning",variant:"filled"}};function B(e){let{status:t,showProgress:i=!1,progress:r=0}=e,s=O[t]||O.queued;return(0,l.jsxs)(d.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,l.jsx)(g.default,{label:s.label,color:s.color,variant:s.variant,size:"small",sx:{fontWeight:600,...s.animated&&{animation:"pulse 2s infinite","@keyframes pulse":{"0%":{opacity:1},"50%":{opacity:.7},"100%":{opacity:1}}}}}),i&&("processing"===t||"importing"===t)&&(0,l.jsx)(v.default,{size:16,thickness:4,value:r,variant:r>0?"determinate":"indeterminate"})]})}B.propTypes={status:L().oneOf(["queued","processing","validating","importing","completed","failed","partial"]).isRequired,showProgress:L().bool,progress:L().number};var H=i(29716),G=i(62966),q=i(53494),U=i(80158),_=i(12422),K=i(84762),V=i(3951),Q=i(96358);function Z(e){var t,i,r,o,u,x,h,f,m;let{open:p,onClose:j,importId:y,initialData:b}=e,{importDetailsData:I,importDetailsLoading:R,importDetailsError:N,refetchImportDetails:F}=function(e){let t=e?w.vZ.fileTracker.readSingle(e):null,{data:i,isLoading:l,error:r,isValidating:a,mutate:n}=(0,A.Ay)(t,w.ev,S);return(0,s.useMemo)(()=>({importDetailsData:null!=i?i:[],importDetailsLoading:l,importDetailsError:r?(null==r?void 0:r.message)||"Error fetching import details":null,importDetailsIsValidating:a,importDetailsEmpty:!l&&!a&&(!Array.isArray(i)||0===i.length),refetchImportDetails:()=>n()}),[i,l,r,a,n])}(y),L=y&&(null==I?void 0:I.length)>0?I[0]:b;if((0,s.useEffect)(()=>{p&&y&&F()},[p,y]),!L&&!R)return null;let O=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"primary";return(0,l.jsxs)(d.A,{sx:{textAlign:"center"},children:[(0,l.jsx)(c.default,{variant:"h3",color:"".concat(i,".main"),fontWeight:600,children:t}),(0,l.jsx)(c.default,{variant:"body2",color:"text.secondary",children:e})]})},Z=(e,t)=>(0,l.jsxs)(n.A,{direction:"row",spacing:2,sx:{py:.5},children:[(0,l.jsx)(c.default,{variant:"body2",color:"text.secondary",sx:{minWidth:120},children:e}),(0,l.jsx)(c.default,{variant:"body2",fontWeight:500,children:t})]});return(0,l.jsxs)(H.A,{open:p,onClose:j,maxWidth:"md",fullWidth:!0,children:[(0,l.jsx)(G.A,{children:(0,l.jsxs)(n.A,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,l.jsxs)(d.A,{sx:{flex:1,minWidth:0},children:[(0,l.jsx)(c.default,{variant:"h6",fontWeight:600,noWrap:!0,children:L.fileName}),(0,l.jsxs)(c.default,{variant:"caption",color:"text.secondary",children:[L.fileSizeFormatted," â€¢ ",(0,M.uK)(L.uploadedAt)]})]}),(0,l.jsx)(q.default,{onClick:j,size:"small",children:(0,l.jsx)(C.W,{icon:"solar:close-circle-bold"})})]})}),(0,l.jsx)(U.default,{}),(0,l.jsx)(_.A,{sx:{p:2},children:R?(0,l.jsx)(d.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",py:8},children:(0,l.jsx)(v.default,{})}):N?(0,l.jsxs)(d.A,{sx:{textAlign:"center",py:4},children:[(0,l.jsx)(C.W,{icon:"solar:danger-triangle-bold",sx:{width:64,height:64,color:"error.main",mb:2}}),(0,l.jsx)(c.default,{variant:"h6",color:"error",gutterBottom:!0,children:"Failed to Load Details"}),(0,l.jsx)(c.default,{variant:"body2",color:"text.secondary",sx:{mb:3},children:(null==N?void 0:N.includes("401"))?"Authentication required. Please login again.":(null==N?void 0:N.includes("404"))?"Import details not found. The record may have been deleted.":(null==N?void 0:N.includes("500"))?"Server error occurred. Please try again later.":N||"Unable to load import details"}),(0,l.jsx)(a.default,{onClick:F,variant:"contained",startIcon:(0,l.jsx)(C.W,{icon:"solar:refresh-bold"}),children:"Retry"})]}):(0,l.jsxs)(n.A,{spacing:2,children:[(0,l.jsxs)(n.A,{direction:"row",spacing:1.5,alignItems:"center",flexWrap:"wrap",children:[(0,l.jsx)(B,{status:L.status}),(0,l.jsx)(g.default,{label:L.importType,size:"small",color:"leads"===L.importType?"info":"warning",sx:{textTransform:"capitalize"}}),L.processingTime&&(0,l.jsx)(g.default,{label:"Duration: ".concat(L.processingTime),size:"small",variant:"outlined"})]}),(0,l.jsxs)(d.A,{children:[(0,l.jsx)(c.default,{variant:"subtitle2",gutterBottom:!0,fontWeight:600,sx:{mb:1},children:"Statistics"}),(0,l.jsxs)(K.default,{variant:"outlined",sx:{p:1.5},children:[(0,l.jsxs)(V.Ay,{container:!0,spacing:2,children:[(0,l.jsx)(V.Ay,{item:!0,xs:3,children:O("Total",(null==(t=L.statistics)?void 0:t.totalRows)||0,"default")}),(0,l.jsx)(V.Ay,{item:!0,xs:3,children:O("Success",(null==(i=L.statistics)?void 0:i.successfulRows)||0,"success")}),(0,l.jsx)(V.Ay,{item:!0,xs:3,children:O("Failed",(null==(r=L.statistics)?void 0:r.failedRows)||0,"error")}),(0,l.jsx)(V.Ay,{item:!0,xs:3,children:O("Skipped",(null==(o=L.statistics)?void 0:o.skippedRows)||0,"warning")})]}),(null==(u=L.statistics)?void 0:u.successRate)!==void 0&&(0,l.jsx)(d.A,{sx:{mt:1.5,pt:1.5,borderTop:1,borderColor:"divider"},children:(0,l.jsxs)(c.default,{variant:"body2",color:"text.secondary",align:"center",children:["Success Rate: ",(0,l.jsxs)("strong",{children:[L.statistics.successRate,"%"]})]})})]})]}),(0,l.jsxs)(d.A,{children:[(0,l.jsx)(c.default,{variant:"subtitle2",gutterBottom:!0,fontWeight:600,sx:{mb:1},children:"Processing Timeline"}),(0,l.jsx)(n.A,{spacing:.75,children:null==(x=L.stages)?void 0:x.map(e=>{let t="completed"===e.status,i="failed"===e.status,r="processing"===e.status;return(0,l.jsxs)(d.A,{sx:{p:1,border:1,borderRadius:1,borderColor:t?"success.main":i?"error.main":r?"info.main":"divider"},children:[(0,l.jsxs)(n.A,{direction:"row",spacing:1,alignItems:"center",children:[(0,l.jsx)(C.W,{icon:t?"solar:check-circle-bold":i?"solar:close-circle-bold":r?"solar:refresh-bold":"solar:clock-circle-bold",width:20,sx:{color:t?"success.main":i?"error.main":r?"info.main":"text.disabled"}}),(0,l.jsxs)(d.A,{sx:{flex:1},children:[(0,l.jsx)(c.default,{variant:"body2",fontWeight:600,textTransform:"capitalize",children:e.name}),(0,l.jsx)(c.default,{variant:"caption",color:"text.secondary",children:e.message})]})]}),void 0!==e.progress&&r&&(0,l.jsx)(d.A,{sx:{mt:.75,ml:3},children:(0,l.jsxs)(n.A,{direction:"row",spacing:1,alignItems:"center",children:[(0,l.jsx)(P.A,{variant:"determinate",value:e.progress,sx:{flex:1,height:5,borderRadius:2.5}}),(0,l.jsxs)(c.default,{variant:"caption",fontWeight:600,sx:{minWidth:35},children:[e.progress,"%"]})]})})]},e.name)})})]}),L.errors&&L.errors.length>0&&(0,l.jsxs)(d.A,{children:[(0,l.jsxs)(c.default,{variant:"subtitle2",gutterBottom:!0,fontWeight:600,color:"error.main",sx:{mb:1},children:["Errors (",L.errors.length,")"]}),(0,l.jsx)(W.A,{component:K.default,variant:"outlined",sx:{maxHeight:300},children:(0,l.jsxs)(D.A,{size:"small",stickyHeader:!0,children:[(0,l.jsx)(E.A,{children:(0,l.jsxs)(k.default,{children:[(0,l.jsx)(T.default,{sx:{fontWeight:600,width:70},children:"Row"}),(0,l.jsx)(T.default,{sx:{fontWeight:600,width:130},children:"Column"}),(0,l.jsx)(T.default,{sx:{fontWeight:600},children:"Error"}),(0,l.jsx)(T.default,{sx:{fontWeight:600,width:120},children:"Value"})]})}),(0,l.jsx)(z.A,{children:L.errors.map((e,t)=>(0,l.jsxs)(k.default,{hover:!0,children:[(0,l.jsx)(T.default,{children:(0,l.jsx)(g.default,{label:e.row,size:"small",color:"error",sx:{minWidth:45}})}),(0,l.jsx)(T.default,{children:(0,l.jsx)(c.default,{variant:"body2",children:e.column})}),(0,l.jsx)(T.default,{children:(0,l.jsx)(c.default,{variant:"body2",color:"error",children:e.error})}),(0,l.jsx)(T.default,{children:(0,l.jsx)(c.default,{variant:"caption",sx:{fontFamily:"monospace"},children:e.value||"(empty)"})})]},t))})]})})]}),L.warnings&&L.warnings.length>0&&(0,l.jsxs)(d.A,{children:[(0,l.jsxs)(c.default,{variant:"subtitle2",gutterBottom:!0,fontWeight:600,color:"warning.main",sx:{mb:1},children:["Warnings (",L.warnings.length,")"]}),(0,l.jsxs)(n.A,{spacing:.5,children:[L.warnings.slice(0,5).map((e,t)=>(0,l.jsx)(d.A,{sx:{p:.75,border:1,borderRadius:1,borderColor:"warning.main"},children:(0,l.jsxs)(c.default,{variant:"body2",children:[(0,l.jsxs)("strong",{children:["Row ",e.row]})," - ",e.column,": ",e.warning]})},t)),L.warnings.length>5&&(0,l.jsxs)(c.default,{variant:"caption",color:"text.secondary",sx:{pt:.5},children:["+",L.warnings.length-5," more warnings"]})]})]}),(0,l.jsxs)(d.A,{children:[(0,l.jsx)(c.default,{variant:"subtitle2",gutterBottom:!0,fontWeight:600,sx:{mb:1},children:"Column Mappings"}),(0,l.jsx)(K.default,{variant:"outlined",sx:{p:1.5},children:(0,l.jsx)(V.Ay,{container:!0,spacing:1,children:Object.entries(L.columnMappings||{}).map(e=>{let[t,i]=e;return(0,l.jsx)(V.Ay,{item:!0,xs:12,sm:6,children:(0,l.jsxs)(n.A,{direction:"row",spacing:1,alignItems:"center",children:[(0,l.jsx)(c.default,{variant:"body2",color:"text.secondary",children:t}),(0,l.jsx)(C.W,{icon:"solar:arrow-right-bold",width:16}),(0,l.jsx)(c.default,{variant:"body2",fontWeight:600,color:"primary.main",children:i})]})},t)})})})]}),(0,l.jsxs)(d.A,{children:[(0,l.jsx)(c.default,{variant:"subtitle2",gutterBottom:!0,fontWeight:600,sx:{mb:1},children:"Import Information"}),(0,l.jsx)(K.default,{variant:"outlined",sx:{p:1.5},children:(0,l.jsxs)(n.A,{spacing:.5,children:[Z("Upload Date",(0,M.uK)(L.uploadedAt)),L.completedAt&&Z("Completed Date",(0,M.uK)(L.completedAt)),Z("Total Rows",(null==(h=L.statistics)?void 0:h.totalRows)||0),Z("Original Columns",(null==(f=L.metadata)?void 0:f.originalColumns)||0),Z("Mapped Columns",(null==(m=L.metadata)?void 0:m.mappedColumns)||0)]})})]})]})}),(0,l.jsx)(U.default,{}),(0,l.jsx)(Q.default,{sx:{px:2,py:1.5},children:(0,l.jsx)(a.default,{variant:"outlined",color:"inherit",onClick:j,children:"Close"})})]})}function Y(e){let{imports:t,loading:i=!1}=e,[r,a]=(0,s.useState)(0),[n,u]=(0,s.useState)(10),[x,h]=(0,s.useState)(null),[f,m]=(0,s.useState)(!1),p=(0,s.useCallback)((e,t)=>{a(t)},[]),j=(0,s.useCallback)(e=>{u(parseInt(e.target.value,10)),a(0)},[]),v=(0,s.useCallback)(e=>{h(e),m(!0)},[]),y=(0,s.useCallback)(()=>{m(!1),h(null)},[]),b=e=>{if(!e)return"-";let{successfulRows:t,failedRows:i,totalRows:r}=e,s=i>0;return(0,l.jsxs)(d.A,{sx:{display:"flex",alignItems:"center",gap:.5},children:[(0,l.jsxs)(c.default,{variant:"body2",color:s?"error":"success.main",children:[t,"/",r]}),s&&(0,l.jsx)(R.default,{title:"".concat(i," failed"),children:(0,l.jsx)(C.W,{icon:"solar:danger-triangle-bold",sx:{color:"error.main",width:16,height:16}})})]})},A=e=>{var t;if("processing"!==e.status&&"importing"!==e.status)return null;let i=null==(t=e.stages)?void 0:t.find(e=>"processing"===e.status),r=(null==i?void 0:i.progress)||0;return(0,l.jsxs)(d.A,{sx:{width:"100%",display:"flex",alignItems:"center",gap:1},children:[(0,l.jsx)(P.A,{variant:"determinate",value:r,sx:{flexGrow:1,height:6,borderRadius:3}}),(0,l.jsxs)(c.default,{variant:"caption",color:"text.secondary",children:[r,"%"]})]})},w=t.slice(r*n,r*n+n);return(0,l.jsxs)(o.A,{children:[(0,l.jsxs)(W.A,{sx:{maxHeight:600,overflow:"auto"},children:[i&&(0,l.jsx)(P.A,{}),(0,l.jsxs)(D.A,{sx:{minWidth:1200},stickyHeader:!0,children:[(0,l.jsx)(E.A,{children:(0,l.jsxs)(k.default,{children:[(0,l.jsx)(T.default,{align:"center",sx:{width:320},children:"File Name"}),(0,l.jsx)(T.default,{align:"center",sx:{width:120},children:"Type"}),(0,l.jsx)(T.default,{sx:{width:20}}),(0,l.jsx)(T.default,{align:"center",sx:{width:140},children:"Status"}),(0,l.jsx)(T.default,{align:"center",sx:{width:180},children:"Progress"}),(0,l.jsx)(T.default,{align:"center",sx:{width:180},children:"Upload Date"}),(0,l.jsx)(T.default,{align:"center",sx:{width:130},children:"Results"}),(0,l.jsx)(T.default,{align:"center",sx:{width:110},children:"Duration"})]})}),(0,l.jsx)(z.A,{children:0===w.length?(0,l.jsx)(k.default,{children:(0,l.jsx)(T.default,{colSpan:8,align:"center",children:(0,l.jsxs)(d.A,{sx:{py:8},children:[(0,l.jsx)(C.W,{icon:"solar:inbox-line-bold",sx:{width:80,height:80,color:"text.disabled",mb:2}}),(0,l.jsx)(c.default,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"No import history found"}),(0,l.jsx)(c.default,{variant:"body2",color:"text.secondary",children:"Start by importing your first file"})]})})}):w.map(e=>(0,l.jsxs)(k.default,{hover:!0,sx:{"&:hover":{bgcolor:"action.hover"}},children:[(0,l.jsx)(T.default,{children:(0,l.jsxs)(d.A,{sx:{display:"flex",alignItems:"center",gap:1.5,cursor:"pointer","&:hover .eye-icon":{color:"primary.main"},"&:hover .file-name":{color:"primary.main"}},onClick:()=>v(e),children:[(0,l.jsx)(C.W,{icon:"solar:eye-bold",className:"eye-icon",sx:{width:20,height:20,color:"text.secondary",transition:"color 0.2s"}}),(0,l.jsxs)(d.A,{children:[(0,l.jsx)(c.default,{variant:"body2",className:"file-name",sx:{fontWeight:500,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",transition:"color 0.2s"},children:e.fileName}),(0,l.jsx)(c.default,{variant:"caption",color:"text.secondary",children:e.fileSizeFormatted})]})]})}),(0,l.jsx)(T.default,{align:"center",children:(0,l.jsx)(g.default,{label:e.importType,size:"small",variant:"soft",color:"leads"===e.importType?"info":"warning",sx:{textTransform:"capitalize",fontWeight:600,minWidth:90}})}),(0,l.jsx)(T.default,{}),(0,l.jsx)(T.default,{align:"center",children:(0,l.jsx)(B,{status:e.status})}),(0,l.jsx)(T.default,{children:A(e)}),(0,l.jsx)(T.default,{align:"center",children:(0,l.jsx)(c.default,{variant:"body2",sx:{fontSize:"0.875rem"},children:(0,M.uK)(e.uploadedAt)})}),(0,l.jsx)(T.default,{align:"center",children:b(e.statistics)}),(0,l.jsx)(T.default,{align:"center",children:(0,l.jsx)(g.default,{label:e.processingTime||"-",size:"small",variant:"outlined",sx:{fontWeight:500}})})]},e.id))})]})]}),(0,l.jsx)(N.A,{component:"div",count:t.length,page:r,onPageChange:p,rowsPerPage:n,onRowsPerPageChange:j,rowsPerPageOptions:[5,10,25,50]}),x&&(0,l.jsx)(Z,{open:f,onClose:y,importId:x.fileId,initialData:x})]})}function J(e){var t;if(!e)return null;return{id:"IMP-2025-".concat(String(e.FileId).padStart(3,"0")),fileId:e.FileId,fileName:e.FileName,fileSize:e.FileSize,fileSizeFormatted:function(e){if(!e||0===e)return"0 Bytes";let t=Math.floor(Math.log(e)/Math.log(1024));return"".concat((e/Math.pow(1024,t)).toFixed(2)," ").concat(["Bytes","KB","MB","GB"][t])}(e.FileSize),fileExtension:e.FileExtension,importType:({lead:"leads",leads:"leads",infrastructure_units:"infrastructure",infrastructure:"infrastructure"})[t=e.DestinationTableName]||t,uploadedBy:{id:e.UploadedBy,name:"User ".concat(e.UploadedBy),email:"user".concat(e.UploadedBy,"@company.com")},uploadedAt:e.CreatedDate,completedAt:e.ProcessEndTime||e.ModifiedDate,processingTime:function(e){if(!e||0===e)return"0s";let t=Math.floor(e/3600),i=Math.floor(e%3600/60),l=e%60;return t>0?"".concat(t,"h ").concat(i,"m ").concat(l,"s"):i>0?"".concat(i,"m ").concat(l,"s"):"".concat(l,"s")}(e.ProcessingDuration),status:X(e.Status),currentStage:X(e.Status),statistics:{totalRows:e.RecordsExpected||0,headerRows:1,dataRows:(e.RecordsExpected||1)-1,processedRows:e.RecordsProcessed||0,successfulRows:e.RecordsProcessed||0,failedRows:e.RecordsFailed||0,skippedRows:0,duplicateRows:0,successRate:$(e)},progress:"PROCESSING"===e.Status?Math.round(e.RecordsProcessed/e.RecordsExpected*100):100*("COMPLETED"===e.Status),isLoaded:e.IsLoaded,priority:e.Priority,sourceTable:e.SourceTableName,destinationTable:e.DestinationTableName,sourceSchema:e.SourceSchema,destinationSchema:e.DestinationSchema,processStartTime:e.ProcessStartTime,processEndTime:e.ProcessEndTime,modifiedDate:e.ModifiedDate,errors:[],warnings:[],stages:function(e){let t=[];return t.push({name:"upload",status:"completed",startedAt:e.CreatedDate,completedAt:e.CreatedDate,message:"File uploaded successfully"}),e.ProcessStartTime&&t.push({name:"validation",status:"FAILED"===e.Status?"failed":"completed",startedAt:e.ProcessStartTime,completedAt:e.ProcessStartTime,message:"FAILED"===e.Status?"Validation failed":"Data validation completed",details:{validRows:e.RecordsProcessed||0,invalidRows:e.RecordsFailed||0,warnings:0}}),("PROCESSING"===e.Status||"COMPLETED"===e.Status)&&t.push({name:"import",status:X(e.Status),startedAt:e.ProcessStartTime,completedAt:e.ProcessEndTime,message:"PROCESSING"===e.Status?"Importing data...":"Import ".concat("COMPLETED"===e.Status?"completed":"failed"),progress:$(e)}),t}(e),columnMappings:{},metadata:{originalColumns:0,mappedColumns:0,unmappedColumns:0,importSettings:{skipDuplicates:!0,validateEmails:!0,validatePhones:!0,applyDefaults:!0}}}}function X(e){return({COMPLETED:"completed",FAILED:"failed",PROCESSING:"processing",PENDING:"queued",IN_PROGRESS:"importing",VALIDATING:"validating",QUEUED:"queued"})[e]||(null==e?void 0:e.toLowerCase())||"unknown"}function $(e){return e.RecordsExpected&&0!==e.RecordsExpected?Math.round((e.RecordsProcessed||0)/e.RecordsExpected*100):0}function ee(){let e=(0,r.useRouter)(),[t,i]=(0,s.useState)(""),[R,P]=(0,s.useState)("all"),{importHistoryData:W,importHistoryLoading:D,importHistoryError:E,importHistoryEmpty:k,refetchImportHistory:T}=function(){let e=w.vZ.fileTracker.readAll,{data:t,isLoading:i,error:l,isValidating:r,mutate:a}=(0,A.Ay)(e,w.ev,S);return(0,s.useMemo)(()=>({importHistoryData:null!=t?t:[],importHistoryLoading:i,importHistoryError:l?(null==l?void 0:l.message)||"Error fetching (useGetAllImportHistory)":null,importHistoryIsValidating:r,importHistoryEmpty:!i&&!r&&(!Array.isArray(t)||0===t.length),refetchImportHistory:()=>a()}),[t,i,l,r,a])}(),z=(0,s.useMemo)(()=>{if(W&&W.length>0)return Array.isArray(W)?W.map(J):[];return[]},[W]),N=(0,s.useMemo)(()=>{let e=z;if("all"!==R&&(e=e.filter(e=>e.status===R)),t){let i=t.toLowerCase();e=e.filter(e=>{var t,l,r;return(null==(t=e.fileName)?void 0:t.toLowerCase().includes(i))||(null==(l=e.id)?void 0:l.toLowerCase().includes(i))||(null==(r=e.importType)?void 0:r.toLowerCase().includes(i))})}return[...e].sort((e,t)=>{let i=new Date(e.uploadedAt);return new Date(t.uploadedAt)-i})},[z,R,t]),M=(0,s.useMemo)(()=>z.filter(e=>["processing","importing","validating","queued"].includes(e.status)).length,[z]),F=(0,s.useCallback)(()=>{e.push(y.f.dashboard.importData.root)},[e]),L=(0,s.useCallback)(e=>{i(e.target.value)},[]),O=(0,s.useCallback)(e=>{P(e.target.value)},[]),B=(0,s.useCallback)(()=>{i(""),P("all")},[]),H=t||"all"!==R;return(0,l.jsxs)(b.KG,{maxWidth:"xl",children:[(0,l.jsx)(I.g,{links:[{name:"Home",href:y.f.dashboard.root},{name:"Import Data",href:y.f.dashboard.importData.root},{name:"Import History"}],action:(0,l.jsx)(a.default,{variant:"contained",startIcon:(0,l.jsx)(C.W,{icon:"solar:add-circle-bold"}),onClick:F,children:"New Import"}),sx:{mb:3}}),(0,l.jsxs)(n.A,{spacing:3,children:[(0,l.jsx)(o.A,{sx:{p:3},children:(0,l.jsxs)(n.A,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,l.jsxs)(d.A,{children:[(0,l.jsx)(c.default,{variant:"h4",children:"Import History"}),(0,l.jsx)(c.default,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"Track and manage your data imports"})]}),(0,l.jsxs)(n.A,{direction:"row",spacing:2,children:[(0,l.jsxs)(d.A,{sx:{textAlign:"center"},children:[(0,l.jsx)(c.default,{variant:"h3",children:z.length}),(0,l.jsx)(c.default,{variant:"body2",color:"text.secondary",children:"Total Imports"})]}),M>0&&(0,l.jsxs)(d.A,{sx:{textAlign:"center"},children:[(0,l.jsx)(c.default,{variant:"h3",color:"info.main",children:M}),(0,l.jsx)(c.default,{variant:"body2",color:"text.secondary",children:"Active Imports"})]})]})]})}),(0,l.jsx)(o.A,{sx:{p:2},children:(0,l.jsxs)(n.A,{direction:{xs:"column",sm:"row"},spacing:2,alignItems:{xs:"stretch",sm:"center"},children:[(0,l.jsx)(u.default,{placeholder:"Search by file name or import ID...",value:t,onChange:L,size:"small",sx:{flexGrow:1,maxWidth:{sm:400}},InputProps:{startAdornment:(0,l.jsx)(x.A,{position:"start",children:(0,l.jsx)(C.W,{icon:"solar:magnifer-bold"})})}}),(0,l.jsxs)(h.A,{size:"small",sx:{minWidth:150},children:[(0,l.jsx)(f.default,{children:"Status"}),(0,l.jsxs)(m.A,{value:R,label:"Status",onChange:O,children:[(0,l.jsx)(p.default,{value:"all",children:"All Status"}),(0,l.jsx)(p.default,{value:"completed",children:(0,l.jsx)(g.default,{label:"Completed",color:"success",size:"small"})}),(0,l.jsx)(p.default,{value:"failed",children:(0,l.jsx)(g.default,{label:"Failed",color:"error",size:"small"})}),(0,l.jsx)(p.default,{value:"processing",children:(0,l.jsx)(g.default,{label:"Processing",color:"info",size:"small"})}),(0,l.jsx)(p.default,{value:"partial",children:(0,l.jsx)(g.default,{label:"Partial",color:"warning",size:"small"})}),(0,l.jsx)(p.default,{value:"importing",children:(0,l.jsx)(g.default,{label:"Importing",color:"info",size:"small"})}),(0,l.jsx)(p.default,{value:"queued",children:(0,l.jsx)(g.default,{label:"Queued",color:"default",size:"small"})})]})]}),H&&(0,l.jsx)(a.default,{size:"small",variant:"text",onClick:B,startIcon:(0,l.jsx)(C.W,{icon:"solar:close-circle-bold"}),children:"Clear"}),(0,l.jsx)(d.A,{sx:{flexGrow:1}}),(0,l.jsx)(a.default,{size:"small",variant:"outlined",startIcon:(0,l.jsx)(C.W,{icon:"solar:refresh-bold"}),onClick:T,disabled:D,children:"Refresh"})]})}),E&&(0,l.jsx)(j.default,{severity:(null==E?void 0:E.includes("401"))?"error":"warning",action:(0,l.jsx)(a.default,{color:"inherit",size:"small",onClick:T,children:"Retry"}),children:(null==E?void 0:E.includes("401"))||(null==E?void 0:E.includes("Authentication"))?"Authentication failed. Please login again to view import history.":(null==E?void 0:E.includes("404"))?"Import history endpoint not found. Please contact support.":(null==E?void 0:E.includes("500"))?"Server error occurred. Please try again later.":(null==E?void 0:E.includes("network"))||(null==E?void 0:E.includes("Network"))?"Network error. Please check your internet connection.":"Failed to load import history: ".concat(E)}),!D&&!E&&k&&(0,l.jsx)(j.default,{severity:"info",children:'No import history available. Start by importing your first file using the "New Import" button above.'}),(0,l.jsx)(o.A,{children:D?(0,l.jsx)(d.A,{sx:{display:"flex",justifyContent:"center",p:4},children:(0,l.jsx)(v.default,{})}):(0,l.jsx)(Y,{imports:N,loading:D,onRefresh:T})})]})]})}},35046:(e,t,i)=>{"use strict";i.d(t,{KG:()=>l.DashboardContent}),i(57452);var l=i(39303)},43655:(e,t,i)=>{Promise.resolve().then(i.bind(i,10179))},83469:(e,t,i)=>{"use strict";i.d(t,{g:()=>y});var l=i(95155),r=i(35206),s=i(17764),a=i(72635),n=i(38867);function o(e){let{sx:t,label:i,...r}=e;return(0,l.jsxs)(s.A,{component:a.W,color:"inherit",underline:"none",sx:[e=>({verticalAlign:"middle",["& .".concat(n.M.root)]:{verticalAlign:"inherit",transform:"translateY(-2px)",ml:{xs:"-14px",md:"-18px"},transition:e.transitions.create(["opacity"],{duration:e.transitions.duration.shorter,easing:e.transitions.easing.sharp})},"&:hover":{["& .".concat(n.M.root)]:{opacity:.48}}}),...Array.isArray(t)?t:[t]],...r,children:[(0,l.jsx)(n.W,{width:18,icon:"eva:arrow-ios-back-fill"}),i]})}var d=i(35881);function c(e){let{links:t,sx:i,...r}=e;return(0,l.jsx)(u,{sx:i,...r,children:null==t?void 0:t.map(e=>(0,l.jsx)("li",{children:(0,l.jsx)(s.A,{href:e,variant:"body2",target:"_blank",rel:"noopener",children:e})},e))})}let u=(0,d.default)("ul")(()=>({display:"flex",flexDirection:"column","& > li":{display:"flex"}}));function x(e){let{href:t,icon:i,name:r,disabled:n,...o}=e,d=()=>(0,l.jsxs)(h,{disabled:n,...o,children:[i&&(0,l.jsx)(f,{children:i}),r]});return t?(0,l.jsx)(s.A,{component:a.W,href:t,color:"inherit",sx:{display:"inline-flex",...n&&{pointerEvents:"none"}},children:d()}):d()}let h=(0,d.default)("div",{shouldForwardProp:e=>!["disabled","sx"].includes(e)})(e=>{let{disabled:t,theme:i}=e;return{...i.typography.body2,alignItems:"center",gap:i.spacing(1),display:"inline-flex",color:i.vars.palette.text.primary,...t&&{cursor:"default",pointerEvents:"none",color:i.vars.palette.text.disabled}}}),f=(0,d.default)("span")(()=>({display:"inherit","& > :first-of-type:not(style):not(:first-of-type ~ *), & > style + *":{width:20,height:20}})),m=(0,d.default)("div")(e=>{let{theme:t}=e;return{display:"flex",flexDirection:"column",gap:t.spacing(2)}}),p=(0,d.default)("h6")(e=>{let{theme:t}=e;return{...t.typography.h4,margin:0,padding:0,display:"inline-flex"}}),g=(0,d.default)("div")(e=>{let{theme:t}=e;return{display:"flex",flexWrap:"wrap",gap:t.spacing(2),alignItems:"flex-start",justifyContent:"flex-end"}}),j=(0,d.default)("div")(e=>{let{theme:t}=e;return{display:"flex",flex:"1 1 auto",gap:t.spacing(2),flexDirection:"column"}}),v=(0,d.default)("span")(e=>{let{theme:t}=e;return{width:4,height:4,borderRadius:"50%",backgroundColor:t.vars.palette.text.disabled}});function y(e){var t,i;let{sx:s,action:a,backHref:n,heading:d,slots:u={},links:h=[],moreLinks:f=[],slotProps:y={},activeLast:b=!1,...A}=e,w=null==(t=h[h.length-1])?void 0:t.name;return(0,l.jsxs)(m,{sx:s,...A,children:[(0,l.jsxs)(g,{...null==y?void 0:y.container,children:[(0,l.jsxs)(j,{...null==y?void 0:y.content,children:[(d||n)&&(0,l.jsx)(p,{...null==y?void 0:y.heading,children:n?(0,l.jsx)(o,{href:n,label:d}):d}),(!!h.length||(null==u?void 0:u.breadcrumbs))&&(null!=(i=null==u?void 0:u.breadcrumbs)?i:(0,l.jsx)(r.A,{separator:(0,l.jsx)(v,{}),...null==y?void 0:y.breadcrumbs,children:h.map((e,t)=>{var i;return(0,l.jsx)(x,{icon:e.icon,href:e.href,name:e.name,disabled:e.name===w&&!b||!e.href},null!=(i=e.name)?i:t)})}))]}),a]}),!!(null==f?void 0:f.length)&&(0,l.jsx)(c,{links:f,...null==y?void 0:y.moreLinks})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[2051,2156,6635,3003,7433,8500,3683,1256,6292,7950,4515,1695,117,2230,3807,4281,7587,1982,6414,7594,6494,567,7452,8441,1684,7358],()=>t(43655)),_N_E=e.O()}]);