(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9311],{866:(e,l,t)=>{"use strict";t.d(l,{k:()=>o,o:()=>s});var r=t(95155),a=t(62177),i=t(11654),n=t(95946);function s(e){let{name:l,helperText:t,slotProps:s,type:o="text",defaultValue:u,...d}=e,{control:c}=(0,a.xW)(),m="number"===o;return(0,r.jsx)(a.xI,{name:l,control:c,defaultValue:u,render:e=>{var l;let{field:a,fieldState:{error:u}}=e;return(0,r.jsx)(n.default,{...a,fullWidth:!0,value:m?(0,i.oV)(a.value):a.value,onChange:e=>{let l=m?(0,i.h6)(e.target.value):e.target.value;a.onChange(l)},onBlur:e=>{let l=m?(0,i.Ow)(e.target.value):e.target.value;a.onChange(l)},type:m?"text":o,error:!!u,helperText:null!=(l=null==u?void 0:u.message)?l:t,slotProps:{...s,htmlInput:{autoComplete:"off",...null==s?void 0:s.htmlInput,...m&&{inputMode:"decimal",pattern:"[0-9]*\\.?[0-9]*"}}},...d})}})}function o(e){let{name:l,helperText:t,slotProps:s,type:o="text",...u}=e,{control:d}=(0,a.xW)(),c="number"===o;return(0,r.jsx)(a.xI,{name:l,control:d,render:e=>{var l;let{field:a,fieldState:{error:d}}=e;return(0,r.jsx)(n.default,{...a,fullWidth:!0,value:c?(0,i.oV)(a.value):a.value,onChange:e=>{let l=c?(0,i.h6)(e.target.value):e.target.value.replace(/\s+/g," ");a.onChange(l)},onBlur:e=>{let l=c?(0,i.Ow)(e.target.value):e.target.value.replace(/\s+/g," ").trim();a.onChange(l)},onKeyDown:e=>{if("Enter"===e.key&&!c){let l=e.target.value.replace(/\s+/g," ").trim();a.onChange(l)}},type:c?"text":o,error:!!d,helperText:null!=(l=null==d?void 0:d.message)?l:t,slotProps:{...s,htmlInput:{autoComplete:"off",...null==s?void 0:s.htmlInput,...c&&{inputMode:"decimal",pattern:"[0-9]*\\.?[0-9]*"}}},...u})}})}},7787:(e,l,t)=>{"use strict";t.d(l,{l:()=>i});var r=t(95155),a=t(62177);function i(e){let{children:l,onSubmit:t,methods:i}=e;return(0,r.jsx)(a.Op,{...i,children:(0,r.jsx)("form",{onSubmit:t,noValidate:!0,autoComplete:"off",children:l})})}},13896:(e,l,t)=>{"use strict";t.d(l,{FA:()=>s,Fq:()=>a,ed:()=>i,j:()=>n});var r=t(55594);let a=r.z.object({siteName:r.z.string().min(1,{message:"Site name is required!"}),siteType:r.z.number().min(1,{message:"Site Type is required"}),siteStatus:r.z.enum(["Active","Under Construction","Planned","Completed"],{message:"Site Status is required"}),siteCity:r.z.string().min(1,{message:"Site City is required"}),nearByLandMark:r.z.string().nullable(),address:r.z.string().nullable(),siteSize:r.z.number().nullable(),operationalDate:r.z.union([r.z.string(),r.z.date()]).nullable().transform(e=>e instanceof Date?e.toISOString():e).nullable(),siteDescription:r.z.string().nullable(),isOperational:r.z.boolean().nullable()}),i=r.z.object({SiteId:r.z.preprocess(e=>""===e||null==e?0:Number(e),r.z.number().min(1,{message:"Site is required"})),InfraName:r.z.string().min(1,{message:"Infra name is required!"}),InfraCategory:r.z.string().min(1,{message:"Category is required"}).refine(e=>["Residential","Commercial","Mixed","Other"].includes(e),{message:"Please select a valid category"}),InfraFloorCount:r.z.preprocess(e=>""===e||null==e?0:Number(e),r.z.number().min(0,{message:"Floor count cannot be negative"})),AvailableUnits:r.z.preprocess(e=>""===e||null==e?0:Number(e),r.z.number().min(0,{message:"Available units cannot be negative"})),SoldUnits:r.z.preprocess(e=>""===e||null==e?0:Number(e),r.z.number().min(0,{message:"Sold units cannot be negative"})),BookedUnits:r.z.preprocess(e=>""===e||null==e?0:Number(e),r.z.number().min(0,{message:"Booked units cannot be negative"})),TotalUnits:r.z.preprocess(e=>""===e||null==e?0:Number(e),r.z.number().min(0,{message:"Total units cannot be negative"}))}),n=r.z.object({site:r.z.number().min(1,"Site is required"),infrastructure:r.z.number().min(1,"Infrastructure is required"),floorType:r.z.enum(["single","multiple"],{required_error:"Floor type is required"}),formula:r.z.string().min(1,"Formula is required"),prefix:r.z.string().min(1,"Prefix is required"),floor:r.z.string().optional(),floorRange:r.z.string().optional(),numberOfUnits:r.z.union([r.z.number(),r.z.string()]).optional(),startNumber:r.z.union([r.z.number(),r.z.string()]).optional(),numberRange:r.z.string().optional(),defaultUnits:r.z.string().optional(),defaultUnitAvailability:r.z.string().optional(),defaultUnitDirection:r.z.string().optional(),defaultUnitView:r.z.string().optional(),defaultUnitSize:r.z.number().min(1,"Default unit size must be at least 1").optional()}).refine(e=>!!(e.numberRange&&e.numberRange.trim())||!!e.numberRange&&!!e.numberRange.trim()||e.numberOfUnits&&e.startNumber,{message:'Either provide "Enter Number or Range" OR both "No. of Units" and "Start Number"',path:["numberOfUnits"]}).refine(e=>!!(e.numberRange&&e.numberRange.trim())||!!e.numberRange&&!!e.numberRange.trim()||e.numberOfUnits&&e.startNumber,{message:'Either provide "Enter Number or Range" OR both "No. of Units" and "Start Number"',path:["startNumber"]}),s=r.z.object({InfraId:r.z.number().min(0,"Infrastructure ID is required"),UnitNumber:r.z.number().min(1,"Unit number is required"),FloorNumber:r.z.number().min(0,"Floor number is required"),UnitSize:r.z.number().min(1,"Unit size must be at least 1"),AvailabilityStatus:r.z.string().min(1,"Availability status is required"),Direction:r.z.string().min(1,"Direction is required"),UnitType:r.z.string().min(1,"Unit type is required"),View:r.z.string().min(1,"View is required"),PurchaseReason:r.z.string().optional()})},19688:(e,l,t)=>{"use strict";t.d(l,{E:()=>i});var r=t(95155),a=t(83025);function i(e){let{sx:l,helperText:t,errorMessage:i,disableGutters:n,...s}=e;return i||t?(0,r.jsx)(a.A,{error:!!i,sx:[{mx:1.75*!n},...Array.isArray(l)?l:[l]],...s,children:i||t}):null}},21471:(e,l,t)=>{"use strict";t.d(l,{b:()=>c});var r=t(95155),a=t(62177),i=t(90805),n=t(47298),s=t(67384),o=t(77498),u=t(54102),d=t(19688);function c(e){let{sx:l,name:t,label:c,options:m,helperText:f,slotProps:h,defaultValue:x,...b}=e,{control:p}=(0,a.xW)(),g="".concat(t,"-radios");return(0,r.jsx)(a.xI,{name:t,control:p,defaultValue:x,render:e=>{var t,a,x,p;let{field:v,fieldState:{error:y}}=e;return(0,r.jsxs)(o.A,{component:"fieldset",...null==h?void 0:h.wrapper,children:[c&&(0,r.jsx)(n.A,{id:g,component:"legend",...null==h?void 0:h.formLabel,sx:[{mb:1,typography:"body2"},...Array.isArray(null==h||null==(t=h.formLabel)?void 0:t.sx)?null!=(p=null==h||null==(a=h.formLabel)?void 0:a.sx)?p:[]:[null==h||null==(x=h.formLabel)?void 0:x.sx]],children:c}),(0,r.jsx)(s.A,{...v,"aria-labelledby":g,sx:l,...b,children:m.map(e=>{var l;return(0,r.jsx)(u.default,{value:e.value,control:(0,r.jsx)(i.default,{...null==h?void 0:h.radio,inputProps:{id:"".concat(e.label,"-radio"),...!e.label&&{"aria-label":"".concat(e.label," radio")},...null==h||null==(l=h.radio)?void 0:l.inputProps}}),label:e.label},e.value)})}),(0,r.jsx)(d.E,{...null==h?void 0:h.helperText,disableGutters:!0,errorMessage:null==y?void 0:y.message,helperText:f})]})}})}},31847:(e,l,t)=>{"use strict";t.d(l,{I4:()=>C,JT:()=>A,KI:()=>w,Li:()=>z,ND:()=>x,Nz:()=>b,Oe:()=>y,Pu:()=>u,T7:()=>f,Xk:()=>i,c5:()=>j,dk:()=>p,eD:()=>v,eX:()=>N,en:()=>o,h0:()=>r,ie:()=>h,mA:()=>d,nz:()=>s,o4:()=>U,oU:()=>m,rl:()=>n,z4:()=>g,zR:()=>a,zf:()=>c});let r=[{value:"single",label:"Single Floor"},{value:"multiple",label:"Multiple Floor"}],a=[{value:"residential",label:"Residential"},{value:"commercial",label:"Commercial"},{value:"mixed",label:"Mixed Use"}],i=[{value:"available",label:"Available"},{value:"sold",label:"Sold"},{value:"reserved",label:"Reserved"},{value:"blocked",label:"Blocked"}],n=[{value:"north",label:"North"},{value:"south",label:"South"},{value:"east",label:"East"},{value:"west",label:"West"},{value:"northeast",label:"North East"},{value:"northwest",label:"North West"},{value:"southeast",label:"South East"},{value:"southwest",label:"South West"}],s=[{value:"garden",label:"Garden View"},{value:"city",label:"City View"},{value:"sea",label:"Sea View"},{value:"mountain",label:"Mountain View"},{value:"pool",label:"Pool View"},{value:"road",label:"Road View"}],o=[{label:"1 BHK",value:"1 BHK"},{label:"2 BHK",value:"2 BHK"},{label:"3 BHK",value:"3 BHK"},{label:"4 BHK",value:"4 BHK"},{label:"Studio Apartment",value:"Studio Apartment"},{label:"Penthouse",value:"Penthouse"},{label:"Duplex",value:"Duplex"},{label:"Triplex",value:"Triplex"},{label:"Office Space",value:"Office Space"},{label:"Retail Shop",value:"Retail Shop"},{label:"Coworking Space",value:"Coworking Space"},{label:"Showroom",value:"Showroom"},{label:"Row House",value:"Row House"},{label:"Bungalow",value:"Bungalow"},{label:"Farmhouse",value:"Farmhouse"},{label:"Factory Unit",value:"Factory Unit"},{label:"Warehouse/Storage",value:"Warehouse/Storage"},{label:"None/Unknown",value:null}],u=["North","South","East","West","Northeast","Northwest","Southeast","Southwest"],d=[{label:"Available",value:"Available"},{label:"Booked",value:"Booked"},{label:"Purchased",value:"Purchased"},{label:"Sold",value:"Sold"},{label:"None/Unknown",value:null}],c=["Garden View","City View","Sea View","Lake View","Mountain View","Pool View","Street View","Main Road View","Open Land View","Forest View","Industrial Area View","Highway View"],m={available:"success",booked:"warning",purchased:"info",sold:"error"},f=[{label:"New",value:"New"},{label:"Completed",value:"Completed"}],h=[{label:"Today",value:"today"},{label:"This week",value:"this_week"},{label:"Overdue",value:"overdue"}],x={New:{color:"secondary",label:"New"},Completed:{color:"success",label:"Completed"}},b=[{value:"Call",label:"Call"},{value:"Text/SMS",label:"Text/SMS"},{value:"Email",label:"Email"},{value:"Meeting",label:"Meeting"},{value:"Other",label:"Other"}],p=[{value:"Pending",label:"Pending"},{value:"Completed",label:"Completed"},{value:"Cancelled",label:"Cancelled"},{value:"Rescheduled",label:"Rescheduled"},{value:"No Response",label:"No Response"}],g=[{group:"",classify:["New","Win","Lost","Visit","Stale","Qualify"]}],v=[{label:"New",value:"New"},{label:"Win",value:"Win"},{label:"Lost",value:"Lost"},{label:"Visit",value:"Visit"},{label:"Stale",value:"Stale"},{label:"Qualify",value:"Qualify"}],y=[{group:"Social Media(Specific)",classify:["Facebook","Instagram","Twitter/X","YouTube","WhatsApp","Reddit"]},{group:"Offline",classify:["Broker","Walk-in","Event/Expo","Networking","Print Advertisement"]},{group:"Online",classify:["Housing.com","Website","Email Campaign","Online Ads","Webinar","Social Media"]},{group:"Referral & Partner",classify:["Referral","Partner","Existing Customer","Employee Referral"]},{group:"Direct Outreach",classify:["Cold Call","Direct Mail","Door-to-Door Sales","Sales Team Outreach"]},{group:"Other",classify:["Other"]}],j=[{label:"Scheduled",value:"Scheduled"},{label:"Rescheduled",value:"Rescheduled"},{label:"Completed",value:"Completed"},{label:"Cancelled",value:"Cancelled"}],S=e=>({label:e,value:e}),A=["Property Viewing","Property Valuation","Market Analysis","Listing Consultation","Buyer Consultation","Property Inspection","Comparative Market Analysis","Investment Analysis","Rental Assessment","Final Walkthrough","Key Handover","Document Signing","Site Measurement","Photography/Marketing","Open House Preparation","Neighborhood Tour","Follow-up Visit","Client Meeting","Other"].map(S),w=["Positive","Neutral","Negative"].map(S),N={OVERDUE:"overdue",TODAY:"today",THIS_WEEK:"this_week",SCHEDULED:"scheduled",NONE:"none"},z={[N.OVERDUE]:"Overdue",[N.TODAY]:"Today",[N.THIS_WEEK]:"This Week",[N.SCHEDULED]:"Scheduled",[N.NONE]:"None"},C=e=>{if(!e)return N.NONE;let l=e.toLowerCase().trim().replace(/\s+/g,"_");return Object.values(N).includes(l)?l:N.NONE},U=function(e){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;switch(C(e)){case N.OVERDUE:return{label:"⚠️ ".concat(l||1,"d overdue"),emoji:"⚠️",text:"".concat(l||1,"d overdue"),color:"error"};case N.TODAY:return{label:"\uD83D\uDCC5 Due Today",emoji:"\uD83D\uDCC5",text:"Due Today",color:"warning"};case N.THIS_WEEK:return{label:"\uD83D\uDDD3️ This Week",emoji:"\uD83D\uDDD3️",text:"This Week",color:"warning"};case N.SCHEDULED:if(t){let e=new Date,l=Math.ceil((new Date(t)-e)/864e5);if(l>0&&l<=7)return{label:"✅ In ".concat(l,"d"),emoji:"✅",text:"In ".concat(l,"d"),color:"info"};return{label:"✅ Scheduled",emoji:"✅",text:"Scheduled",color:"info",date:t}}return{label:"✅ Scheduled",emoji:"✅",text:"Scheduled",color:"info"};case N.NONE:default:return{label:"—",emoji:"",text:"—",color:"default"}}}},52352:(e,l,t)=>{"use strict";t.d(l,{I:()=>b,t:()=>x});var r=t(95155),a=t(84089),i=t(62177),n=t(96801),s=t(91580),o=t(26403),u=t(2360),d=t(59886),c=t(95946),m=t(78880),f=t(77498),h=t(19688);function x(e){let{name:l,children:t,helperText:n,slotProps:s={},...o}=e,{control:u}=(0,i.xW)(),d="".concat(l,"-select"),m={select:{sx:{textTransform:"capitalize"},MenuProps:{slotProps:{paper:{sx:[{maxHeight:220}]}}}},htmlInput:{id:d},inputLabel:{htmlFor:d}};return(0,r.jsx)(i.xI,{name:l,control:u,render:e=>{var l;let{field:i,fieldState:{error:u}}=e;return(0,r.jsx)(c.default,{...i,select:!0,fullWidth:!0,error:!!u,helperText:null!=(l=null==u?void 0:u.message)?l:n,slotProps:(0,a.h)(m,s),...o,children:t})}})}function b(e){let{name:l,chip:t,label:a,options:c,checkbox:x,placeholder:b,slotProps:p,helperText:g,...v}=e,{control:y}=(0,i.xW)(),j="".concat(l,"-multi-select");return(0,r.jsx)(i.xI,{name:l,control:y,render:e=>{var l;let{field:i,fieldState:{error:y}}=e;return(0,r.jsxs)(f.A,{error:!!y,...v,children:[a&&(0,r.jsx)(m.default,{htmlFor:j,...null==p?void 0:p.inputLabel,children:a}),(0,r.jsx)(o.A,{...i,multiple:!0,displayEmpty:!!b,label:a,renderValue:e=>{let l=c.filter(l=>e.includes(l.value));return!l.length&&b?(0,r.jsx)(n.A,{sx:{color:"text.disabled"},children:b}):t?(0,r.jsx)(n.A,{sx:{gap:.5,display:"flex",flexWrap:"wrap"},children:l.map(e=>(0,r.jsx)(s.default,{size:"small",variant:"soft",label:e.label,...null==p?void 0:p.chip},e.value))}):l.map(e=>e.label).join(", ")},...null==p?void 0:p.select,inputProps:{id:j,...null==p||null==(l=p.select)?void 0:l.inputProps},children:c.map(e=>(0,r.jsxs)(u.default,{value:e.value,children:[x&&(0,r.jsx)(d.default,{size:"small",disableRipple:!0,checked:i.value.includes(e.value),...null==p?void 0:p.checkbox}),e.label]},e.value))}),(0,r.jsx)(h.E,{...null==p?void 0:p.helperText,errorMessage:null==y?void 0:y.message,helperText:g})]})}})}},68188:(e,l,t)=>{Promise.resolve().then(t.bind(t,77501))},71984:(e,l,t)=>{"use strict";t.d(l,{MZ:()=>s,Q$:()=>u,d0:()=>o,lr:()=>d});var r=t(19169),a=t(12115),i=t(18835);let n={revalidateIfStale:!1,revalidateOnFocus:!1,revalidateOnReconnect:!1};function s(){let e=i.vZ.site.readAll,{data:l,isLoading:t,error:s,isValidating:o,mutate:u}=(0,r.Ay)(e,i.GO,n);return(0,a.useMemo)(()=>({sitesData:null!=l?l:[],sitesLoading:t,sitesError:s?(null==s?void 0:s.message)||"Error fetching data":null,sitesValidating:o,sitesEmpty:!t&&!o&&(!Array.isArray(l)||0===l.length),mutateAllSites:u}),[l,s,t,o,u])}function o(){let e=i.vZ.site.siteType,{data:l,isLoading:t,error:s,isValidating:o,mutate:u}=(0,r.Ay)(e,i.GO,n);return(0,a.useMemo)(()=>({sitesTypeData:null!=l?l:[],sitesTypeLoading:t,sitesTypeError:s?(null==s?void 0:s.message)||"Error fetching data":null,sitesTypeValidating:o,sitesTypeEmpty:!t&&!o&&(!Array.isArray(l)||0===l.length),getAllSitesMutations:u}),[l,s,t,o,u])}function u(){let e=i.vZ.site.siteFullDetails,{data:l,isLoading:t,error:s,isValidating:o,mutate:u}=(0,r.Ay)(e,i.GO,n);return(0,a.useMemo)(()=>({siteFullData:null!=l?l:[],siteFullLoading:t,siteFullError:s?(null==s?void 0:s.message)||"Error fetching data":null,siteFullValidating:o,siteFullEmpty:!t&&!o&&(!Array.isArray(l)||0===l.length),getSiteFullDetailsMutation:u}),[l,s,t,o,u])}function d(e){let l=e?i.vZ.site.readSingle(e):null,{data:t,isLoading:s,error:o,isValidating:u,mutate:d}=(0,r.Ay)(l,i.GO,n);return(0,a.useMemo)(()=>({siteData:null!=t?t:[],siteLoading:s,siteError:o?(null==o?void 0:o.message)||"Error fetching data":null,siteValidating:u,siteEmpty:!s&&!u&&(!Array.isArray(t)||0===t.length),getSiteMutation:d}),[t,o,s,u,d])}},75191:(e,l,t)=>{"use strict";t.d(l,{_q:()=>u,ce:()=>o,qy:()=>s});var r=t(19169),a=t(12115),i=t(18835);let n={revalidateIfStale:!1,revalidateOnFocus:!1,revalidateOnReconnect:!1};function s(){let e=i.vZ.infra.readAll,{data:l,isLoading:t,error:s,isValidating:o,mutate:u}=(0,r.Ay)(e,i.GO,n);return(0,a.useMemo)(()=>({infrasData:null!=l?l:[],infrasLoading:t||o,infrasError:s?(null==s?void 0:s.message)||"Error fetching infras":null,infrasValidating:o,infrasEmpty:!t&&!o&&(!Array.isArray(l)||0===l.length),getAllInfrasMutations:()=>u()}),[l,s,t,o,u])}function o(e){let l=e?i.vZ.infra.readSingle(e):null,{data:t,isLoading:s,error:o,isValidating:u,mutate:d}=(0,r.Ay)(l,i.GO,n);return(0,a.useMemo)(()=>({infraData:null!=t?t:[],infraLoading:s,infraError:o?(null==o?void 0:o.message)||"Error fetching infras":null,infraValidating:u,infraEmpty:!s&&!u&&(!Array.isArray(t)||0===t.length),getInfraMutation:()=>d()}),[t,o,s,u,d])}function u(e){var l,t,s,o,u,d,c;let m=e?i.vZ.infra.getBySiteId(e):null,{data:f,isLoading:h,error:x,isValidating:b,mutate:p}=(0,r.Ay)(m,i.ev,n),g=x&&((null==(s=x.response)||null==(t=s.data)||null==(l=t.detail)?void 0:l.includes("No infrastructure found"))||(null==(d=x.response)||null==(u=d.data)||null==(o=u.detail)?void 0:o.includes("not found"))||(null==(c=x.response)?void 0:c.status)===404);return(0,a.useMemo)(()=>({infrasData:g||!f?[]:f,infrasLoading:h,infrasError:g?null:x?(null==x?void 0:x.message)||"Error fetching infrastructure":null,infrasValidating:b,infrasEmpty:!h&&!b&&(!Array.isArray(f)||0===f.length||g),refetch:()=>p()}),[f,x,h,b,p,g])}},77501:(e,l,t)=>{"use strict";t.d(l,{NewInfraUnits:()=>q});var r=t(95155),a=t(12115),i=t(38543),n=t(49742),s=t(71984),o=t(75191),u=t(35046),d=t(83469),c=t(62177),m=t(90221),f=t(80918),h=t(11743),x=t(53494),b=t(96801),p=t(2360),g=t(9670),v=t(91580),y=t(80158),j=t(76438),S=t(78914),A=t(16964),w=t(84256),N=t(96670),z=t(6968),C=t(90912),U=t(84762),E=t(66292),R=t(83339),I=t(695);let O=e=>{if(!e)return[];let l=[];for(let t of e.split(",").map(e=>e.trim()))if(t.includes("-")){let[e,r]=t.split("-").map(e=>e.trim()),a=parseInt(e),i=parseInt(r);if(isNaN(a)||isNaN(i))l.push(t);else for(let e=a;e<=i;e++)l.push(e.toString())}else l.push(t);return l};var T=t(74234),k=t(13896),D=t(31847),W=t(48731),P=t(38867),M=t(7787),V=t(52352),F=t(866),B=t(21471);let L=e=>{let{sitesData:l,infrasData:t,infrasLoading:s,setFilters:o}=e,[u,d]=(0,a.useState)([]),[L,q]=(0,a.useState)([]),[H,G]=(0,a.useState)(!1),[_,K]=(0,a.useState)(["Prefix","-","Floor","Number"]),[Z,Y]=(0,a.useState)(!1),[X,Q]=(0,a.useState)(null),[J,$]=(0,a.useState)(!1),[ee,el]=(0,a.useState)(null),[et,er]=(0,a.useState)(!1),[ea,ei]=(0,a.useState)(!1),en=(0,I.rd)(),es=l.map(e=>{let{SiteName:l,SiteId:t}=e;return{label:l,id:t,value:t}}),eo=t.map(e=>{let{InfraName:l,InfraId:t}=e;return{label:l,id:t,value:t}}),eu=e=>{K(l=>{let t=l.includes(e)?l.filter(l=>l!==e):[...l,e];return ex("formula",t.map(e=>"{".concat(e,"}")).join(" + "),{shouldValidate:!0}),t})},ed=()=>{Y(!1)},ec=()=>{$(!1)},em=(0,c.mN)({resolver:(0,m.u)(k.j),defaultValues:{site:"",infrastructure:"",floorType:"single",formula:"{Prefix} + {Floor} + {Number}",prefix:"",floor:"",floorRange:"",numberOfUnits:"",startNumber:"",numberRange:"",defaultUnits:"",defaultUnitAvailability:"",defaultUnitDirection:"",defaultUnitView:"",defaultUnitSize:""}}),{handleSubmit:ef,watch:eh,setValue:ex,clearErrors:eb}=em,ep=eh("numberOfUnits"),eg=eh("startNumber"),ev=eh("prefix"),ey=eh("floor"),ej=eh("floorType"),eS=eh("floorRange"),eA=eh("site"),ew=eh("formula"),eN=eh("numberRange");(0,a.useEffect)(()=>{eA&&o({siteId:eA})},[eA,o]);let ez=e=>{if(!e)return[];let l=[];return e.split(",").map(e=>e.trim()).forEach(e=>{if(e.includes("-")){let[t,r]=e.split("-").map(e=>parseInt(e.trim()));if(!isNaN(t)&&!isNaN(r))for(let e=t;e<=r;e++)l.push(e)}else{let t=parseInt(e.trim());isNaN(t)||l.push(t)}}),l.sort((e,l)=>e-l)},eC=(e,l)=>{let t=String(l).length;return String(e).padStart(t,"0")},eU=(0,a.useCallback)((e,l,t,r,a)=>r?ew.replace(/{([^}]+)}/g,(t,r)=>{switch(r){case"Floor":return e||"";case"Number":return a?eC(l,a):l||"";case"Prefix":return ev||"";case"-":return"-";default:return t}}).replace(/\s\+\s/g,"").replace(/\s/g,""):"".concat(t||"").concat(l||""),[ev,ew]);(0,a.useEffect)(()=>{let e="single"===ej?ey:eS;if(ew&&e){let e=[],l=[];l="single"===ej?ey?[ey]:["Floor"]:eS?O(eS):["Multiple floors"];let t=1;l.forEach(l=>{let r=[];if(eN)r=ez(eN);else if(ep&&eg)for(let e=0;e<ep;e++)r.push(eg+e);else r=[1];let a=r.length>0?Math.max(...r):0;r.forEach(r=>{let i=eU(l,r,ev,ew,a);e.push({id:t,unitNumber:r,name:i,floor:l}),t++})}),d(e),er(!0),ei(!0)}else d([]),er(!1),ei(!1)},[ep,eg,ev,ey,ej,eS,ew,eN,eU]);let eE=async e=>{if(console.log("Generating units with form data:",e),!e.numberRange&&(!e.numberOfUnits||!e.startNumber))return void i.oR.error('Please fill either "Enter Number or Range" OR both "No. of Units" and "Start Number"');if(!e.prefix)return void i.oR.error("Please enter a prefix");if("single"===e.floorType&&!e.floor)return void i.oR.error("Please enter a floor for single floor type");if("multiple"===e.floorType&&!e.floorRange)return void i.oR.error("Please enter floor number/range for multiple floor type");let l=[],t=[],r=[];if("single"===e.floorType)r=[e.floor];else if(0===(r=O(e.floorRange)).length)return void i.oR.error("Invalid floor range format. Please use format like: 1-5, 1,3,5 or G,1,2,3");let a=1;r.forEach(r=>{let i=[];if(e.numberRange)i=ez(e.numberRange);else if(e.numberOfUnits&&e.startNumber)for(let l=0;l<e.numberOfUnits;l++)i.push(e.startNumber+l);let n=i.length>0?Math.max(...i):0;i.forEach(i=>{let s=eU(r,i,e.prefix,e.formula,n);l.push({id:a,unitNumber:i,name:s,floor:r}),t.push({id:a,unitName:s,unitType:e.defaultUnits||"",unitSize:e.defaultUnitSize||"",floor:r,status:e.defaultUnitAvailability||"",unitView:e.defaultUnitView||"",direction:e.defaultUnitDirection||"",infraId:e.infrastructure||0}),a++})}),d(l),q(t),console.log("Successfully generated ".concat(t.length," units across ").concat(r.length," floor(s) for table configuration"))},eR=async()=>{if(0===L.length)return void i.oR.error("No units to save. Please generate units first using the form above.");G(!0);try{eh("site");let e=L.map(e=>({InfraId:e.infraId||0,UnitNumber:e.unitName||"",FloorNumber:parseInt(e.floor)||0,UnitSize:e.unitSize||0,AvailabilityStatus:e.status||"available",Direction:e.direction||"north",UnitType:e.unitType||"residential",View:e.unitView||"garden",PurchaseReason:"",InfraType:e.unitType||"residential",Active:"True"}));await (0,T.G4)(e),i.oR.success("Successfully saved all units to the system!"),en.push(n.f.dashboard.site.details(2))}catch(l){var e;if(console.error("Error saving units to API:",l),null==(e=l.response)?void 0:e.data){let e=l.response.data;if(Array.isArray(e)){let l=e.map(e=>"".concat(e.loc.join("."),": ").concat(e.msg)).join(", ");i.oR.error("Validation errors: ".concat(l))}else e.detail?i.oR.error(e.detail):i.oR.error("Failed to save units: ".concat(l.message))}else"Network Error"===l.message?i.oR.error("Network error: Please check your connection and try again"):i.oR.error("Failed to save units: ".concat(l.message))}finally{G(!1)}},eI=[{field:"unitName",headerName:"Unit Number",flex:1.2,minWidth:150,editable:!1},{field:"unitType",headerName:"Unit Type",flex:1.2,minWidth:150,editable:!0,type:"singleSelect",valueOptions:D.zR.map(e=>({value:e.value,label:e.label}))},{field:"unitSize",headerName:"Unit Size (sq ft)",flex:1.2,minWidth:150,editable:!0,type:"number"},{field:"floor",headerName:"Floor",flex:.8,minWidth:100,editable:!0},{field:"status",headerName:"Status",flex:1,minWidth:130,editable:!0,type:"singleSelect",valueOptions:D.Xk.map(e=>({value:e.value,label:e.label})),renderCell:e=>{var l;return(0,r.jsx)(W.JU,{variant:"soft",color:D.oU[null==(l=e.value)?void 0:l.toLowerCase()]||"default",children:e.value})}},{field:"unitView",headerName:"Unit View",flex:1.2,minWidth:150,editable:!0,type:"singleSelect",valueOptions:D.nz.map(e=>({value:e.value,label:e.label}))},{field:"direction",headerName:"Direction",flex:1,minWidth:130,editable:!0,type:"singleSelect",valueOptions:D.rl.map(e=>({value:e.value,label:e.label}))},{field:"actions",headerName:"Actions",flex:.8,minWidth:100,sortable:!1,filterable:!1,disableColumnMenu:!0,renderCell:e=>(0,r.jsx)(x.default,{size:"small",color:"error",onClick:()=>{q(l=>l.filter(l=>l.id!==e.row.id))},children:(0,r.jsx)(P.W,{icon:"solar:trash-bin-trash-bold"})})}];return(0,r.jsxs)(b.A,{sx:{p:3},children:[(0,r.jsxs)(M.l,{methods:em,onSubmit:ef(eE),children:[(0,r.jsxs)(f.A,{container:!0,spacing:3,sx:{mb:3},children:[(0,r.jsx)(f.A,{size:{xs:12,sm:4},children:(0,r.jsx)(V.t,{name:"site",label:"Site",placeholder:"Select a site",children:es.map(e=>(0,r.jsx)(p.default,{value:e.value,children:e.label},e.value))})}),(0,r.jsx)(f.A,{size:{xs:12,sm:4},children:(0,r.jsx)(V.t,{name:"infrastructure",label:"Infrastructure",placeholder:eA?"Select infrastructure":"Select a site first",disabled:!eA||s,helperText:eA?"":"Please select a site first",children:eA?s?(0,r.jsx)(p.default,{disabled:!0,children:"Loading infrastructure..."}):eo.length>0?eo.map(e=>(0,r.jsx)(p.default,{value:e.value,children:e.label},e.value)):(0,r.jsx)(p.default,{disabled:!0,children:"No infrastructure found. Please create infrastructure for this site first"}):(0,r.jsx)(p.default,{disabled:!0,children:"Select a site first"})})}),(0,r.jsx)(f.A,{size:{xs:12,sm:4},children:(0,r.jsx)(B.b,{name:"floorType",label:"Floor Type",slotProps:{formLabel:{sx:{margin:0}}},options:D.h0,sx:{display:"flex",height:"100%",flexDirection:"row",justifyContent:"flex-start",flexWrap:"wrap","& .MuiFormControlLabel-root":{margin:0,marginRight:2}}})})]}),(0,r.jsxs)(b.A,{sx:{mb:3},children:[(0,r.jsx)(g.default,{variant:"subtitle1",gutterBottom:!0,children:"Choose Unit number pattern"}),(0,r.jsx)(g.default,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Build your custom unit numbering pattern using the following variables."}),(0,r.jsx)(b.A,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:["Floor","Number","Prefix","-","/"].map(e=>(0,r.jsx)(v.default,{label:e,variant:_.includes(e)?"filled":"outlined",color:"primary",onClick:()=>eu(e),onDelete:_.includes(e)?()=>eu(e):void 0},e))})]}),(0,r.jsxs)(f.A,{container:!0,spacing:2,sx:{mb:2},children:[(0,r.jsx)(f.A,{size:{xs:12,sm:6,md:2.4},children:(0,r.jsx)(F.o,{name:"formula",label:"Formula",placeholder:"Enter formula (e.g., {Prefix}{Number}, {Floor}-{Number})"})}),(0,r.jsx)(f.A,{size:{xs:12,sm:6,md:2.4},children:(0,r.jsx)(F.o,{name:"prefix",label:"Prefix",placeholder:"Enter prefix"})}),(0,r.jsx)(f.A,{size:{xs:12,sm:6,md:2.4},children:(0,r.jsx)(F.o,{name:"single"===ej?"floor":"floorRange",label:"single"===ej?"Floor Number":"Floor Range",placeholder:"single"===ej?"e.g., 1":"e.g., 1-5, 1,3,5"})}),(0,r.jsx)(f.A,{size:{xs:12,sm:6,md:2.4},children:(0,r.jsx)(F.o,{name:"numberOfUnits",label:"No. of Units",type:"number",placeholder:"e.g., 10",disabled:!!eN,InputProps:{inputProps:{min:0,max:1e3}},onChange:e=>{let l=e.target.value;if(""===l||null===l)ex("numberOfUnits","");else{let e=parseInt(l);!isNaN(e)&&e>=0&&(ex("numberOfUnits",e),eg&&eb("numberRange"))}}})}),(0,r.jsx)(f.A,{size:{xs:12,sm:6,md:2.4},children:(0,r.jsx)(F.o,{name:"startNumber",label:"Start Number",type:"number",placeholder:"e.g., 1",disabled:!!eN,onChange:e=>{let l=e.target.value;if(""===l||null===l)ex("startNumber","");else{let e=parseInt(l);!isNaN(e)&&e>=0&&(ex("startNumber",e),ep&&eb("numberRange"))}}})})]}),(0,r.jsxs)(b.A,{sx:{display:"flex",alignItems:"center",mb:2},children:[(0,r.jsx)(y.default,{sx:{flexGrow:1}}),(0,r.jsx)(g.default,{variant:"body2",sx:{mx:2,color:"text.secondary",fontWeight:"medium"},children:"OR"}),(0,r.jsx)(y.default,{sx:{flexGrow:1}})]}),(0,r.jsxs)(f.A,{container:!0,spacing:2,sx:{mb:3},children:[(0,r.jsx)(f.A,{size:{xs:12,sm:12,md:6},children:(0,r.jsx)(F.o,{name:"numberRange",label:"Enter Number or Range",placeholder:"e.g., 101,102,105-108",disabled:!!(ep||eg),helperText:"Comma separated numbers or ranges",onChange:e=>{ex("numberRange",e.target.value),e.target.value&&eb(["numberOfUnits","startNumber"])}})}),(0,r.jsxs)(f.A,{size:{xs:12,sm:12,md:6},children:[(0,r.jsxs)(b.A,{sx:{p:1,bgcolor:"grey.100",border:"1px solid",borderColor:"divider",borderRadius:1,display:"flex",alignItems:"center",gap:2,height:"68%"},children:[(0,r.jsx)(x.default,{onClick:e=>{Q(e.currentTarget),Y(!Z)},sx:{color:"primary.main"},size:"small",children:(0,r.jsx)(P.W,{icon:"solar:info-circle-bold",width:20})}),(0,r.jsx)(g.default,{variant:"body2",color:"text.secondary",children:"Click the info icon for unit numbering methods and examples"})]}),(0,r.jsx)(j.A,{open:Z,anchorEl:X,placement:"bottom-start",transition:!0,sx:{zIndex:1300},modifiers:[{name:"offset",options:{offset:[0,8]}}],children:e=>{let{TransitionProps:l}=e;return(0,r.jsx)(S.x,{onClickAway:ed,children:(0,r.jsx)(A.A,{...l,timeout:200,children:(0,r.jsxs)(w.A,{sx:{maxWidth:500,p:3,boxShadow:3,border:"1px solid",borderColor:"divider"},children:[(0,r.jsx)(g.default,{variant:"h6",gutterBottom:!0,children:"Unit Number Entry Methods"}),(0,r.jsx)(g.default,{variant:"subtitle2",color:"text.primary",sx:{mb:1},children:"Available Methods for Unit Numbering:"}),(0,r.jsxs)(g.default,{variant:"body2",color:"text.secondary",sx:{mb:1},children:[(0,r.jsx)("strong",{children:"Method 1: Sequential Numbering"}),(0,r.jsxs)(b.A,{component:"span",sx:{color:"primary.main",fontWeight:"bold"},children:[" ",'- Use "No. of Units" + "Start Number“']})," ","for continuous sequences (e.g., Units 101-105, 201-210)"]}),(0,r.jsxs)(g.default,{variant:"body2",color:"text.secondary",sx:{mb:2},children:[(0,r.jsx)("strong",{children:"Method 2: Custom Range Entry"}),(0,r.jsxs)(b.A,{component:"span",sx:{color:"primary.main",fontWeight:"bold"},children:[" ",'- Use "Enter Number or Range" field']})," ","for flexible unit numbering patterns"]}),(0,r.jsxs)(b.A,{component:"ul",sx:{listStyleType:"disc",pl:2,m:0},children:[(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Individual Numbers:"})," e.g. 1,3,5,7"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Range Format:"})," e.g. 1-10"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Mixed Format:"})," Combine both methods (e.g., 1-5,7,9-12)"]})]})]})})})}})]})]}),(0,r.jsxs)(N.default,{expanded:et,onChange:(e,l)=>er(l),sx:{mb:3},children:[(0,r.jsxs)(z.default,{expandIcon:(0,r.jsx)(P.W,{icon:"eva:arrow-ios-downward-fill"}),sx:{bgcolor:"grey.100",borderBottom:"1px solid",borderColor:"divider","& .MuiAccordionSummary-content":{alignItems:"center",gap:2}},children:[(0,r.jsx)(P.W,{icon:"solar:eye-bold",width:24,sx:{color:"primary.main"}}),(0,r.jsx)(g.default,{variant:"h6",color:"primary.main",children:"Preview Section"}),(0,r.jsx)(g.default,{variant:"body2",color:"text.secondary",sx:{ml:"auto"},children:u.length>0?"".concat(u.length," units will be generated"):"No units to preview"})]}),(0,r.jsxs)(C.A,{sx:{pt:2},children:[(0,r.jsxs)(b.A,{sx:{display:"flex",alignItems:"center",gap:2,mb:2,p:2,bgcolor:"grey.50",borderRadius:1,border:"1px solid",borderColor:"divider"},children:[(0,r.jsx)(P.W,{icon:u.length>0?"solar:check-circle-bold":"solar:info-circle-bold",width:20,sx:{color:u.length>0?"success.main":"warning.main"}}),(0,r.jsx)(g.default,{variant:"body1",color:u.length>0?"success.main":"warning.main",fontWeight:"medium",children:u.length>0?"".concat(u.length," units ready for generation"):'Enter "No. of Units" value to see preview'})]}),u.length>0?(0,r.jsx)(b.A,{sx:{maxHeight:300,overflow:"auto"},children:(0,r.jsx)(f.A,{container:!0,spacing:1,children:u.map(e=>(0,r.jsx)(f.A,{size:{xs:6,sm:4,md:3},children:(0,r.jsxs)(U.default,{sx:{p:1.5,textAlign:"center",bgcolor:"background.paper",border:"1px solid",borderColor:"divider",boxShadow:e=>e.shadows[1],transition:"all 0.2s","&:hover":{boxShadow:e=>e.shadows[3],transform:"translateY(-1px)"}},children:[(0,r.jsx)(g.default,{variant:"body2",fontWeight:"bold",color:"primary.main",children:e.name}),(0,r.jsxs)(g.default,{variant:"caption",color:"text.secondary",children:["Floor: ",e.floor]})]})},e.id))})}):(0,r.jsxs)(b.A,{sx:{textAlign:"center",py:3},children:[(0,r.jsx)(P.W,{icon:"solar:document-add-bold",width:48,sx:{color:"text.disabled"}}),(0,r.jsx)(g.default,{variant:"body1",color:"text.secondary",sx:{mt:1},children:"Fill in the form fields above to preview units"})]})]})]}),(0,r.jsxs)(N.default,{expanded:ea,onChange:(e,l)=>ei(l),sx:{mb:3},children:[(0,r.jsxs)(z.default,{expandIcon:(0,r.jsx)(P.W,{icon:"eva:arrow-ios-downward-fill"}),sx:{bgcolor:"grey.100",borderBottom:"1px solid",borderColor:"divider","& .MuiAccordionSummary-content":{alignItems:"center",gap:2}},children:[(0,r.jsx)(P.W,{icon:"solar:settings-bold",width:24,sx:{color:"primary.main"}}),(0,r.jsx)(g.default,{variant:"h6",color:"primary.main",children:"Unit Configuration"}),(0,r.jsx)(g.default,{variant:"body2",color:"text.secondary",sx:{ml:"auto"},children:"Set default values for generated units"})]}),(0,r.jsxs)(C.A,{sx:{pt:3},children:[(0,r.jsxs)(f.A,{container:!0,spacing:3,sx:{mb:3},children:[(0,r.jsx)(f.A,{size:{xs:12,sm:6,md:4},children:(0,r.jsxs)(V.t,{name:"defaultUnits",label:"Default Units",placeholder:"Select unit type",children:[(0,r.jsx)(p.default,{value:"",children:"None"}),D.zR.map(e=>(0,r.jsx)(p.default,{value:e.value,children:e.label},e.value))]})}),(0,r.jsx)(f.A,{size:{xs:12,sm:6,md:4},children:(0,r.jsxs)(V.t,{name:"defaultUnitAvailability",label:"Default Unit Availability",placeholder:"Select availability status",children:[(0,r.jsx)(p.default,{value:"",children:"None"}),D.Xk.map(e=>(0,r.jsx)(p.default,{value:e.value,children:e.label},e.value))]})}),(0,r.jsx)(f.A,{size:{xs:12,sm:6,md:4},children:(0,r.jsxs)(V.t,{name:"defaultUnitDirection",label:"Default Unit Direction",placeholder:"Select direction",children:[(0,r.jsx)(p.default,{value:"",children:"None"}),D.rl.map(e=>(0,r.jsx)(p.default,{value:e.value,children:e.label},e.value))]})})]}),(0,r.jsxs)(f.A,{container:!0,spacing:3,sx:{mb:3},children:[(0,r.jsx)(f.A,{size:{xs:12,sm:6,md:6},children:(0,r.jsxs)(V.t,{name:"defaultUnitView",label:"Default Unit View",placeholder:"Select view type",children:[(0,r.jsx)(p.default,{value:"",children:"None"}),D.nz.map(e=>(0,r.jsx)(p.default,{value:e.value,children:e.label},e.value))]})}),(0,r.jsx)(f.A,{size:{xs:12,sm:6,md:6},children:(0,r.jsx)(F.o,{name:"defaultUnitSize",label:"Default Unit Size",type:"number",placeholder:"e.g., 1200",helperText:"Enter size in square feet",onChange:e=>ex("defaultUnitSize",parseInt(e.target.value)||1)})})]}),(0,r.jsxs)(b.A,{sx:{display:"flex",alignItems:"center",mt:2},children:[(0,r.jsx)(x.default,{onClick:e=>{el(e.currentTarget),$(!J)},sx:{color:"primary.main",mr:1},size:"small",children:(0,r.jsx)(P.W,{icon:"solar:info-circle-bold",width:20})}),(0,r.jsx)(g.default,{variant:"body2",color:"text.secondary",children:"Click the info icon to learn about default configuration settings"}),(0,r.jsx)(j.A,{open:J,anchorEl:ee,placement:"top-start",transition:!0,sx:{zIndex:1300},modifiers:[{name:"offset",options:{offset:[0,8]}}],children:e=>{let{TransitionProps:l}=e;return(0,r.jsx)(S.x,{onClickAway:ec,children:(0,r.jsx)(A.A,{...l,timeout:200,children:(0,r.jsxs)(w.A,{sx:{maxWidth:450,p:3,boxShadow:3,border:"1px solid",borderColor:"divider"},children:[(0,r.jsx)(g.default,{variant:"h6",gutterBottom:!0,children:"Default Configuration Settings"}),(0,r.jsxs)(g.default,{variant:"body2",color:"text.secondary",sx:{mb:2},children:[(0,r.jsx)("strong",{children:"How it works:"})," These default configurations will be applied to all units created during generation."]}),(0,r.jsxs)(b.A,{component:"ul",sx:{listStyleType:"disc",pl:2,m:0,mb:2},children:[(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Unit Type:"})," Residential, Commercial, etc."]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Availability:"})," Available, Booked, Sold, etc."]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Direction:"})," North, South, East, West facing"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"View:"})," Garden, City, Pool, etc."]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Size:"})," Square footage (recommended in sq ft)"]})]}),(0,r.jsxs)(g.default,{variant:"body2",color:"text.secondary",children:[(0,r.jsx)("strong",{children:"Note:"})," You can modify individual unit settings after creation if needed. All generated units will inherit these default values initially."]})]})})})}})]})]})]}),(0,r.jsxs)(b.A,{sx:{display:"flex",justifyContent:"flex-end",gap:2,mb:4},children:[(0,r.jsx)(E.default,{variant:"outlined",color:"inherit",children:"Cancel"}),(0,r.jsx)(E.default,{type:"submit",variant:"contained",color:"primary",size:"large",children:"Generate Units"})]})]}),(0,r.jsx)(y.default,{sx:{my:4,borderStyle:"dashed",borderWidth:2}}),(0,r.jsxs)(b.A,{sx:{mb:3},children:[(0,r.jsx)(g.default,{variant:"h5",gutterBottom:!0,children:"Unit Configuration & Management"}),(0,r.jsx)(g.default,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"After generating units above, configure individual unit details and save to the system."}),L.length>0&&(0,r.jsx)(w.A,{children:(0,r.jsxs)(R.A,{children:[(0,r.jsxs)(b.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,r.jsxs)(g.default,{variant:"h6",children:["Units Configuration Table (",L.length," units)"]}),(0,r.jsxs)(b.A,{sx:{display:"flex",gap:2},children:[(0,r.jsx)(E.default,{variant:"outlined",color:"error",onClick:()=>{q([]),d([])},disabled:H,startIcon:(0,r.jsx)(P.W,{icon:"solar:trash-bin-trash-bold"}),children:"Clear All"}),(0,r.jsx)(E.default,{variant:"contained",color:"primary",onClick:eR,disabled:H||0===L.length,startIcon:(0,r.jsx)(P.W,{icon:"solar:diskette-bold"}),children:H?"Saving...":"Save All Units"})]})]}),(0,r.jsx)(y.default,{sx:{mb:2}}),(0,r.jsx)(b.A,{sx:{height:400,width:"100%"},children:(0,r.jsx)(h._,{rows:L,columns:eI,pageSize:10,rowsPerPageOptions:[5,10,25],disableSelectionOnClick:!0,loading:H,experimentalFeatures:{newEditingApi:!0},processRowUpdate:e=>(q(l=>l.map(l=>l.id===e.id?e:l)),e),onProcessRowUpdateError:e=>{console.error("Row update error:",e)},sx:{"& .MuiDataGrid-cell":{borderRight:"1px solid #e0e0e0"},"& .MuiDataGrid-columnHeaders":{backgroundColor:"#f5f5f5",borderBottom:"2px solid #e0e0e0"}}})}),(0,r.jsxs)(g.default,{variant:"body2",color:"text.secondary",sx:{mt:2},children:[(0,r.jsx)("strong",{children:"Instructions:"})," Double-click on any cell to edit values. Unit Size, and Floor are input fields. Other columns have dropdown selections. Use the delete icon to remove individual units."]})]})}),0===L.length&&(0,r.jsx)(w.A,{children:(0,r.jsxs)(R.A,{sx:{textAlign:"center",py:4},children:[(0,r.jsx)(g.default,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"No Units Generated Yet"}),(0,r.jsx)(g.default,{variant:"body2",color:"text.secondary",children:"Use the form above to generate units and they will appear here for configuration."})]})})]})]})},q=()=>{let[e,l]=(0,a.useState)({siteId:""}),{sitesData:t}=(0,s.MZ)(),{infrasData:c,infrasLoading:m}=(0,o._q)(e.siteId);return(0,r.jsxs)(u.KG,{maxWidth:"xl",children:[(0,r.jsx)(d.g,{links:[{name:"Home",href:n.f.dashboard.root},{name:"Site",href:n.f.dashboard.site.new},{name:"New Infra"}],sx:{mb:{xs:3,md:2}}}),(0,r.jsx)(L,{sitesData:t,infrasData:c,infrasLoading:m,setFilters:l}),(0,r.jsx)(i.N9,{position:"top-right",autoClose:3e3})]})}},83469:(e,l,t)=>{"use strict";t.d(l,{g:()=>y});var r=t(95155),a=t(35206),i=t(17764),n=t(72635),s=t(38867);function o(e){let{sx:l,label:t,...a}=e;return(0,r.jsxs)(i.A,{component:n.W,color:"inherit",underline:"none",sx:[e=>({verticalAlign:"middle",["& .".concat(s.M.root)]:{verticalAlign:"inherit",transform:"translateY(-2px)",ml:{xs:"-14px",md:"-18px"},transition:e.transitions.create(["opacity"],{duration:e.transitions.duration.shorter,easing:e.transitions.easing.sharp})},"&:hover":{["& .".concat(s.M.root)]:{opacity:.48}}}),...Array.isArray(l)?l:[l]],...a,children:[(0,r.jsx)(s.W,{width:18,icon:"eva:arrow-ios-back-fill"}),t]})}var u=t(35881);function d(e){let{links:l,sx:t,...a}=e;return(0,r.jsx)(c,{sx:t,...a,children:null==l?void 0:l.map(e=>(0,r.jsx)("li",{children:(0,r.jsx)(i.A,{href:e,variant:"body2",target:"_blank",rel:"noopener",children:e})},e))})}let c=(0,u.default)("ul")(()=>({display:"flex",flexDirection:"column","& > li":{display:"flex"}}));function m(e){let{href:l,icon:t,name:a,disabled:s,...o}=e,u=()=>(0,r.jsxs)(f,{disabled:s,...o,children:[t&&(0,r.jsx)(h,{children:t}),a]});return l?(0,r.jsx)(i.A,{component:n.W,href:l,color:"inherit",sx:{display:"inline-flex",...s&&{pointerEvents:"none"}},children:u()}):u()}let f=(0,u.default)("div",{shouldForwardProp:e=>!["disabled","sx"].includes(e)})(e=>{let{disabled:l,theme:t}=e;return{...t.typography.body2,alignItems:"center",gap:t.spacing(1),display:"inline-flex",color:t.vars.palette.text.primary,...l&&{cursor:"default",pointerEvents:"none",color:t.vars.palette.text.disabled}}}),h=(0,u.default)("span")(()=>({display:"inherit","& > :first-of-type:not(style):not(:first-of-type ~ *), & > style + *":{width:20,height:20}})),x=(0,u.default)("div")(e=>{let{theme:l}=e;return{display:"flex",flexDirection:"column",gap:l.spacing(2)}}),b=(0,u.default)("h6")(e=>{let{theme:l}=e;return{...l.typography.h4,margin:0,padding:0,display:"inline-flex"}}),p=(0,u.default)("div")(e=>{let{theme:l}=e;return{display:"flex",flexWrap:"wrap",gap:l.spacing(2),alignItems:"flex-start",justifyContent:"flex-end"}}),g=(0,u.default)("div")(e=>{let{theme:l}=e;return{display:"flex",flex:"1 1 auto",gap:l.spacing(2),flexDirection:"column"}}),v=(0,u.default)("span")(e=>{let{theme:l}=e;return{width:4,height:4,borderRadius:"50%",backgroundColor:l.vars.palette.text.disabled}});function y(e){var l,t;let{sx:i,action:n,backHref:s,heading:u,slots:c={},links:f=[],moreLinks:h=[],slotProps:y={},activeLast:j=!1,...S}=e,A=null==(l=f[f.length-1])?void 0:l.name;return(0,r.jsxs)(x,{sx:i,...S,children:[(0,r.jsxs)(p,{...null==y?void 0:y.container,children:[(0,r.jsxs)(g,{...null==y?void 0:y.content,children:[(u||s)&&(0,r.jsx)(b,{...null==y?void 0:y.heading,children:s?(0,r.jsx)(o,{href:s,label:u}):u}),(!!f.length||(null==c?void 0:c.breadcrumbs))&&(null!=(t=null==c?void 0:c.breadcrumbs)?t:(0,r.jsx)(a.A,{separator:(0,r.jsx)(v,{}),...null==y?void 0:y.breadcrumbs,children:f.map((e,l)=>{var t;return(0,r.jsx)(m,{icon:e.icon,href:e.href,name:e.name,disabled:e.name===A&&!j||!e.href},null!=(t=e.name)?t:l)})}))]}),n]}),!!(null==h?void 0:h.length)&&(0,r.jsx)(d,{links:h,...null==y?void 0:y.moreLinks})]})}}},e=>{var l=l=>e(e.s=l);e.O(0,[2051,2156,6635,3003,7433,8500,3683,1256,6292,7950,4515,1695,117,1641,2230,3807,4281,2973,779,3296,1743,4189,5149,4053,6414,7594,6494,567,7452,9669,8441,1684,7358],()=>l(68188)),_N_E=e.O()}]);